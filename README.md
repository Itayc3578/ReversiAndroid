![](media/image1.png){width="3.2286417322834646in"
height="1.07831583552056in"}

[\
]{dir="rtl"}

[\
]{dir="rtl"}

[]{#_Toc76826884 .anchor}[מבוא]{dir="rtl"}

[]{#_Toc76826885
.anchor}![](media/image2.png){width="2.5972222222222223in"
height="4.807638888888889in"}[מטרת המשחק]{dir="rtl"}

[במשחק זה, רברסי, על השחקן]{dir="rtl"}

[להפוך כמה שיותר דיסקיות על הלוח לצבעו, על ידי דריסת דיסקיות
היריב.]{dir="rtl"}

[\"דריסת\" דסקית היא הנחת דסקית בצבע השחקן הנוכחי כך שתכלא בינה לבין
דיסקית נוספת של השחקן הנוכחי דסקית אחת או יותר של היריב, וכך דסקיות
היריב הכלואות נהפכות לדסקיות השחקן הנוכחי.]{dir="rtl"}

[]{#_Toc76826886 .anchor}[אופן המשחק]{dir="rtl"}

[המשחק מתנהל בתורות. עמדת הפתיחה היא מטריצה של דסקיות בגודל קבוע (בדרך
כלל]{dir="rtl"} 2x2[), הכלואה בתוך מטריצה גדולה יותר (בדרך
כלל]{dir="rtl"} 8x8[) כך שצבעי הדסקיות מחולקים באופן שווה בין היריבים:
כל שתי דסקיות צמודות (אנכית או אופקית) תהיינה בצבע שונה.\
כל שחקן רשאי לבצע מהלך למשבצת ריקה אך ורק אם במהלך זה ידרוס דסקית אחת
לפחות של היריב.]{dir="rtl"}

[]{#_Toc76826887 .anchor}[סיום המשחק]{dir="rtl"}

[המשחק נגמר בארבעה מצבים:]{dir="rtl"}

1.  [כאשר הלוח כולו מתמלא.]{dir="rtl"}

2.  [כאשר אין מהלכים אפשריים נוספים לאף אחד מהצדדים.]{dir="rtl"}

3.  [כאשר כל הכלים המונחים על הלוח הם באותו בצבע (גם אם הלוח אינו
    מלא).]{dir="rtl"}

4.  [כאשר תם הזמן שהוקצב למשחק.]{dir="rtl"}

[כאשר נגמר המשחק, המנצח הוא השחקן שברשותו המספר הגדול יותר של הדסקיות.
אם מספר הדסקיות זהה המשחק מסתיים בתיקו.]{dir="rtl"}

[]{#_Toc76826888 .anchor}[הרשאות]{dir="rtl"}

-   [רטט (מוענק ללא אישור המשתמש).]{dir="rtl"}

-   [מצלמה (לצורך תמונת פרופיל).]{dir="rtl"}

-   [קריאה של מצב הטלפון.]{dir="rtl"}

[]{#_Toc76826889 .anchor}[דרישות מינימליות]{dir="rtl"}

API 19

[]{#_Toc76826890 .anchor}[תיעוד]{dir="rtl"}

[התיעוד לפרויקט - מחלקות, תכונות, פעולות ועוד - נמצא הן בספר הפרויקט
(בעיקר בעברית) והן באפליקציית הפרויקט עצמה בתור]{dir="rtl"} JavaDoc
[והערות (באנגלית). רוב התיעודים מפורטים יותר באפליקציה, בתור]{dir="rtl"}
JavaDoc[, לכן אני ממליץ לקרוא גם אותם לצורך הבנה מעמיקה יותר של
הפרויקט.\
]{dir="rtl"}

[]{#_Toc76826891 .anchor}[רפלקציה]{dir="rtl"}

[העבודה על אפליקציה זו היוותה עבורי חוויה מיוחדת, אשר במהלכה למדתי רבות
אודות תכנות אפליקציות, עבודה עם שפת]{dir="rtl"} Java[, היכרות עם עבודה
בצד ה-]{dir="rtl"} backend[, ה-]{dir="rtl"} frontend [ועוד. במהלך בניית
האפליקציה חקרתי נושאים רבים, לרוב מעבר לחומר הלימוד, במקורות מידע שונים.
המידע שלמדתי כך העשיר את הידע שלי וחיזק את המשיכה שלי למקצוע. לעומת
מקצועות אחרים, מקצוע/פרויקט זה באמת ריתק אותי ומשך אותי כך שמצאתי עצמי
משקיע בו שעות רבות, ולא פעם ללא תחושת זמן. דבר שניסיתי לשים אליו דגש
במהלך בניית האפליקציה הוא תכנות נכון של הקוד, בהנחה שבזמן מסוים בעתיד
אולי אפרסם את האפליקציה. הדבר בא לידי ביטוי, בין השאר, בכך שבמהלך התכנות
תמיד התמקדתי בבניית קוד נוח למניפולציה ושינוי ללא בעיות. כך, פעמים רבות
כאשר פניתי להוסיף לאפליקציה פיצ\'ר נוסף, ריגש אותי לגלות את הקלות של
התהליך לאור עבודה נכונה שלי בעבר. היבט נוסף שהדבר בא לידי ביטוי בו הוא
יעילות הקוד. במקרים רבים באפליקציה השקעתי מאמץ נוסף בשביל לייעל את הקוד
שלי ולמנוע ריצות מיותרות או לא רלוונטיות. זאת ועוד, היו פעולות מסוימות
שאף ניסיתי לצמצם שימוש בתנאים ולבנות קוד מתוחכם תוך שימוש בפעולות
מתמטיות (ולמען נוחות הקריאה תיעדתי יותר בפירוט). כמו כן גם לפעמים קרה לי
שהעדפתי לממש אלגוריתמים בעצמי ולהתנסות בהם (לדוגמא חיפוש בינארי). ניסיתי
גם לשלב מבני נתונים מתאימים ולשמור על עקרונות תכנות מונחה עצמים ככל
הניתן, תוך שילוב מודלים רלוונטיים לקוד. יתר על כך, אחד הדברים שנהניתי
להוסיף לאפליקציה הוא תיעודי]{dir="rtl"} JavaDoc [והערות. היה עבורי אפקט
מרגיע בפשוט לשבת ולכתוב באנגלית על פעולות, משתנים, מטרות והערות שמצאתי
לנכון להוסיף לקוד. אחד הקשיים שצפיתי שיהיו לי במהלך בניית הפרויקט הוא
היה ההתמודדות עם הלימודים השונים שנכפו עלינו לאור תקופה הקורונה.
להפתעתי, מצאתי כי העבודה על האפליקציה מהבית הייתה עבורי נוחה מאוד, וכי
ללימודים הללו ישנם לא מעט יתרונות. אני מרוצה מכך שהצלחתי לבנות אפליקציה
שאני גאה בה, גם בתקופה קשה זו, ומקווה שבעתידי אמשיך להתפתח בתחום זה
ולהשתפר, ושאוכל להמשיך ולפתח עוד ועוד אפליקציות ולהנות מהן כמו שנהניתי
מזו. **\
**]{dir="rtl"}

[]{#_Toc76826892 .anchor}Activities

Main Activity

![](media/image3.png){width="0.5590277777777778in"
height="0.5590277777777778in"}

![](media/image4.png){width="3.1496062992125986in"
height="5.7204724409448815in"}

[]{#_Toc76826894
.anchor}![](media/image5.png){width="0.16597222222222222in"
height="0.16597222222222222in"}![](media/image5.png){width="0.16597222222222222in"
height="0.16597222222222222in"}![](media/image5.png){width="0.16535433070866143in"
height="0.16535433070866143in"}![](media/image5.png){width="0.16597222222222222in"
height="0.16597222222222222in"}![](media/image5.png){width="0.16597222222222222in"
height="0.16597222222222222in"}\
Select Difficulty Activity

![](media/image5.png){width="0.16597222222222222in"
height="0.16597222222222222in"}![](media/image5.png){width="0.16597222222222222in"
height="0.16597222222222222in"}![](media/image5.png){width="0.16597222222222222in"
height="0.16597222222222222in"}![](media/image5.png){width="0.16597222222222222in"
height="0.16597222222222222in"}![](media/image5.png){width="0.16597222222222222in"
height="0.16597222222222222in"}![](media/image6.png){width="3.1496062992125986in"
height="5.7204724409448815in"}

**\
**

[]{#_Toc76826895 .anchor}Game Activity

![](media/image7.png){width="3.1496062992125986in"
height="5.7204724409448815in"}

Game Activity

[]{#_Toc76826896 .anchor}Quit Game Dialog

![](media/image8.png){width="3.1496062992125986in"
height="5.7204724409448815in"}

Game Activity

[]{#_Toc76826897 .anchor}Finished Game Details

![](media/image9.png){width="3.1496062992125986in"
height="5.7204724409448815in"}

[\
]{dir="rtl"}

Game Activity

[]{#_Toc76826898 .anchor}Game Over Dialog

![](media/image10.png){width="3.1496062992125986in"
height="5.7204724409448815in"}

[\
]{dir="rtl"}

[]{#_Toc76826899 .anchor}Records Activity

![](media/image11.png){width="0.25in" height="0.25in"}

![](media/image12.png){width="3.1496062992125986in"
height="5.7204724409448815in"}

![](media/image13.png){width="0.1968503937007874in"
height="0.1968503937007874in"}\`

![](media/image14.png){width="0.25in" height="0.25in"}

![](media/image11.png){width="0.25in" height="0.25in"}[\
]{dir="rtl"}Records Activity

[]{#_Toc76826900 .anchor}Extended Record

![](media/image15.png){width="3.1496062992125986in"
height="5.7204724409448815in"}

[\
]{dir="rtl"}

Records Activity

[]{#_Toc76826901 .anchor}Delete Mode

![](media/image14.png){width="0.25in" height="0.25in"}

![](media/image16.png){width="2.7559055118110236in"
height="5.003937007874016in"}![](media/image17.png){width="2.7559055118110236in"
height="5.003937007874016in"}

[\
]{dir="rtl"}

Records Activity

[]{#_Toc76826904 .anchor}Delete Mode

[]{#_Toc76826905 .anchor}Delete Selected Records Dialog

![](media/image18.png){width="3.1493055555555554in"
height="5.720138888888889in"}

[\
]{dir="rtl"}

[]{#_Toc76826906 .anchor}Settings Activity

[]{#_Toc76826907 .anchor}Settings- Scrolled Up

![](media/image14.png){width="0.25in" height="0.25in"}

![](media/image19.png){width="0.25in" height="0.25in"}

![](media/image20.png){width="0.25in"
height="0.25in"}![](media/image20.png){width="0.25in" height="0.25in"}
![](media/image21.png){width="3.1496062992125986in"
height="5.7204724409448815in"}

\`

![](media/image14.png){width="0.25in" height="0.25in"}

![](media/image14.png){width="0.25in" height="0.25in"}

[\
]{dir="rtl"}![](media/image20.png){width="0.25in" height="0.25in"}

Settings Activity

[]{#_Toc76826908 .anchor}Settings- Scrolled Down

![](media/image22.png){width="3.1496062992125986in"
height="5.7204724409448815in"}

![](media/image13.png){width="0.1968503937007874in"
height="0.1968503937007874in"}

![](media/image23.png){width="0.19652777777777777in"
height="0.19652777777777777in"}

![](media/image13.png){width="0.1968503937007874in"
height="0.1968503937007874in"}

![](media/image13.png){width="0.1968503937007874in"
height="0.1968503937007874in"}

![](media/image13.png){width="0.1968503937007874in"
height="0.1968503937007874in"}

[\
]{dir="rtl"}

Settings Activity

[]{#_Toc76826909 .anchor}Settings Expanded

![](media/image24.png){width="3.1496062992125986in"
height="5.7204724409448815in"}

[\
]{dir="rtl"}

Settings Activity

[]{#_Toc76826910 .anchor}Select Match Duration Dialog

![](media/image25.png){width="3.1496062992125986in"
height="5.7204724409448815in"}

[\
]{dir="rtl"}

[]{#_Toc76826911 .anchor}Contact Activity

![](media/image26.png){width="3.1496062992125986in"
height="5.7204724409448815in"}

![](media/image5.png){width="0.16597222222222222in"
height="0.16597222222222222in"}[\
]{dir="rtl"}

[דיאגרמת מסכים ותיאור פנימי]{dir="rtl"}

![](media/image27.png){width="2.9274923447069114in"
height="4.406864610673666in"}![](media/image28.png){width="2.3961679790026245in"
height="5.615367454068242in"}

[\
]{dir="rtl"}

[]{#_Toc76826913 .anchor}Classes

[]{#_Toc76826914 .anchor}MainActivity

[המחלקה מקושרת למסך הראשי של המשחק. ממנה ניתן לנווט למסך \"צור קשר\",
למסך ההגדרות, למסך תוצאות המשחקים ולמסך המשחק עצמו על ידי \"משחק מהיר\"
או לחלופין בחירת רמה (ע\"י מעבר למסך בחירת רמה). המחלקה גם מבקשת הרשאות
הנדרשות לאפליקציה במידה שיש צורך, מטפלת בכל הקשור ל]{dir="rtl"}Broadcast
Receivers [ומטפלת גם במוזיקת הרקע (בחרתי שכל עוד האפליקציה פועלת ומוזיקת
הרקע מאופשרת בהגדרות, היא תתנגן).]{dir="rtl"}

**[תכונות המחלקה]{dir="rtl"}**

  ---------------------------------- ------------------------------------
  [עצם המייצג את המאזין לסוללה חלשה  private final BroadcastReceiver
  בטלפון: מזהיר את                   batteryReceiver
  המשתמש.]{dir="rtl"}                

  [עצם המייצג את שירות מוזיקת הרקע   private Intent bgMusicIntent
  על מנת לתקשר עמו.]{dir="rtl"}      

  [מערך של מחרוזות המייצגות את       private final String\[\]
  ההרשאות הנדרשות                    required_permissions
  לאפליקציה.]{dir="rtl"}             
  ---------------------------------- ------------------------------------

**[פעולות המחלקה]{dir="rtl"}**

  ----------------------------------- -----------------------------------
  **[דריסת פעולה הנקראת כאשר נוצר     \@Override\
  המסך.]{dir="rtl"}**                 protected void onCreate(Bundle
                                      savedInstanceState)

  [פעולה הנקראת כאשר המשתמש בחר לנווט public void goSettings(View view)
  למסך ההגדרות. היא מנווטת לשם        
  ע\"י]{dir="rtl"} Explicit           
  Intent[.]{dir="rtl"}                

  [פעולה הנקראת כאשר המשתמש בחר לנווט public void goContact(View view)
  למסך \"צור קשר\". היא מנווטת לשם    []{dir="rtl"}
  ע\"י]{dir="rtl"} Explicit           
  Intent[.]{dir="rtl"}                

  [פעולה הנקראת כאשר המשתמש בחר לשחק  public void goQuickGame(View view)
  משחק מהיר. היא מנווטת למסך המשחק    
  ע\"י]{dir="rtl"} Explicit           
  Intent[.]{dir="rtl"}                

  [פעולה הנקראת כאשר המשתמש בחר לנווט public void goSelectDifficulty(View
  למסך בחירת רמת המשחק. היא מנווטת    view)
  לשם ע\"י]{dir="rtl"} Explicit       
  Intent[.]{dir="rtl"}                

  [פעולה הנקראת כאשר המשתמש בחר לנווט public void goRecords(View view)
  למסך תוצאות המשחקים. היא מנווטת לשם 
  ע\"י]{dir="rtl"} Explicit           
  Intent[.]{dir="rtl"}                

  [פעולה הבודקת אם ההרשאות הנדרשות    private void
  למשחק ניתנו. במידה ולא- מבקשת       checkAndRequestPermissions()
  מהמשתמש לאשר אותן.]{dir="rtl"}      

  [דריסת פעולה הנקראת כאשר המסך       \@Override\
  \"נהרס\". הדריסה היא לשם ביטול      protected void onDestroy()
  הרישום ל]{dir="rtl"}Broadcast       
  Receivers[, ועצירת שירות מוזיקת     
  הרקע.]{dir="rtl"}                   
  ----------------------------------- -----------------------------------

[\
]{dir="rtl"}

[]{#_Toc76826915 .anchor}SelectDifficultyActivity

[המחלקה מקושרת למסך בחירת הרמה של המשחק. היא מאפשרת למשתמש לבחור רמת
משחק ולעבור למסך המשחק עם הרמה שנבחרה.]{dir="rtl"}

**[תכונות המחלקה]{dir="rtl"}**

  -----------------------------------------------------------------------
  [משתנה סטטי קבוע המייצג את שם       public static final String
  ה-]{dir="rtl"}Extra [שמכיל את רמת   *DIFFICULTY*
  המשחק שנבחרה המועברת למסך           
  המשחק.]{dir="rtl"}                  
  ----------------------------------- -----------------------------------

  -----------------------------------------------------------------------

**[פעולות המחלקה]{dir="rtl"}**

  ----------------------------------- -----------------------------------
  **[דריסת פעולה הנקראת כאשר נוצר     protected void onCreate(Bundle
  המסך.]{dir="rtl"}**                 savedInstanceState)

  [פעולה הנקראת כאשר בחר המשתמש רמת   public void goGame(View view)
  משחק רצויה, ומנווטת למסך המשחק      
  בעזרת]{dir="rtl"} Explicit Intent   
  [המכיל את הרמה הרצויה.]{dir="rtl"}  
  ----------------------------------- -----------------------------------

[\
]{dir="rtl"}

[]{#_Toc76826916 .anchor}GameActivity

[המחלקה מקושרת למסך המשחק. היא מחזיקה עצם של]{dir="rtl"} Controller
[המנהל את המשחק (בחרתי לעבוד לפי מודל ה-]{dir="rtl"} MVC[), ומנהלת את
תצוגת המשחק לפי פעולות המשתמש.]{dir="rtl"}

**[תכונות המחלקה]{dir="rtl"}**

+-----------------------------------+-----------------------------------+
| [משתנה סטטי קבוע המייצג את כמות   | private static final int          |
| הדסקיות החדשות לתור שמהוות        | *SUPER_MOVE*                      |
| \"מהלך-על\".]{dir="rtl"}          |                                   |
+-----------------------------------+-----------------------------------+
| [משתנה סטטי קבוע המייצג את ערך    | private static final int          |
| הבהירות (ה-]{dir="rtl"}alpha[)    | *ALPHA_MAX*                       |
| המקסימלי- בהירות                  |                                   |
| מלאה.]{dir="rtl"}                 |                                   |
+-----------------------------------+-----------------------------------+
| [משתנה סטטי קבוע המייצג את ערך    | private static final int          |
| הבהירות לבהירות                   | *ALPHA_INVISIBLE*                 |
| בלתי-נראית.]{dir="rtl"}           |                                   |
+-----------------------------------+-----------------------------------+
| [משתנה סטטי קבוע המייצג את ערך    | private static final int          |
| הבהירות של דסקית \"רמז\"- הדסקיות | *ALPHA_HINT*                      |
| שמציגות את המהלכים                |                                   |
| האפשריים.]{dir="rtl"}             |                                   |
|                                   |                                   |
| [(ראה תמונה מצורפת בסוף התיעוד    |                                   |
| תחת \"דסקיות                      |                                   |
| מיוחדות\").]{dir="rtl"}           |                                   |
+-----------------------------------+-----------------------------------+
| [משתנה סטטי קבוע המייצג את ערך    | private static final int          |
| הבהירות של דסקית \"פוטנציאלית\"-  | *ALPHA_ATTAINABLE*                |
| כאשר המשתמש לוחץ לחיצה ממושכת על  |                                   |
| דסקית \"רמז\", הדסקיות החדשות     |                                   |
| שייתוספו לו אם יבצע את המהלך      |                                   |
| לדסקית הלחוצה מוצגות, והן הדסקיות |                                   |
| ה\"פוטנציאליות\".]{dir="rtl"}     |                                   |
|                                   |                                   |
| [(ראה תמונה מצורפת בסוף התיעוד    |                                   |
| תחת \"דסקיות                      |                                   |
| מיוחדות\").]{dir="rtl"}           |                                   |
+-----------------------------------+-----------------------------------+
| [משתנה סטטי קבוע המייצג את מספר   | private static final int          |
| השניות מהן להתחיל את              | *START_TIME*                      |
| הטיימר.]{dir="rtl"}               |                                   |
+-----------------------------------+-----------------------------------+
| [משתנה סטטי קבוע המייצג את הזמן   | private static final long         |
| המינימלי שייקח למחשב לבצע את תורו | *MIN_PC_TURN_MILLIS*              |
| (באלפי שניות).]{dir="rtl"}        |                                   |
+-----------------------------------+-----------------------------------+
| [עצם המייצג את ה-]{dir="rtl"}     | private LinearLayout              |
| LinearLayout [הראשי של לוח המשחק  | boardContainer                    |
| של התצוגה.]{dir="rtl"}            |                                   |
+-----------------------------------+-----------------------------------+
| [עצם המייצג את אורך צלע מטריצת    | private int boardSize             |
| הלוח.]{dir="rtl"}                 |                                   |
+-----------------------------------+-----------------------------------+
| [עצם המייצג את מטריצת הכפתורים    | private Button\[\]\[\] board      |
| המהווים את דסקיות לוח המשחק של    |                                   |
| התצוגה.]{dir="rtl"}               |                                   |
+-----------------------------------+-----------------------------------+
| [עצם המייצג את                    | private ConstraintLayout          |
| ה-]{dir="rtl"}ConstraintLayout    | gameUpperContainer                |
| [העליון של התצוגה (שמכיל את פרטי  |                                   |
| מצב המשחק).]{dir="rtl"}           |                                   |
+-----------------------------------+-----------------------------------+
| [עצם ה-]{dir="rtl"}ImageView      | private ImageView ivFirstPlayer   |
| [המייצג את הדסקית של השחקן        |                                   |
| הראשון.]{dir="rtl"}               |                                   |
+-----------------------------------+-----------------------------------+
| [עצם ה-]{dir="rtl"}ImageView      | private ImageView ivSecondPlayer  |
| [המייצג את הדסקית של השחקן        |                                   |
| השני.]{dir="rtl"}                 |                                   |
+-----------------------------------+-----------------------------------+
| [עצם ה-]{dir="rtl"} TextView      | private TextView tvFirstPieces    |
| [המייצג את כמות הדסקיות שבבעלות   |                                   |
| השחקן הראשון.]{dir="rtl"}         |                                   |
+-----------------------------------+-----------------------------------+
| [עצם ה-]{dir="rtl"}               | private TextView tvSecondPieces   |
| TextView[המייצג את כמות הדסקיות   |                                   |
| שבבעלות השחקן השני.]{dir="rtl"}   |                                   |
+-----------------------------------+-----------------------------------+
| [עצם ה-]{dir="rtl"}               | private TextView tvCurrentPlayer  |
| TextView[המייצג את השחקן של התור  |                                   |
| הנוכחי.]{dir="rtl"}               |                                   |
+-----------------------------------+-----------------------------------+
| [עצם ה-]{dir="rtl"}               | private TextView tvTurnCount      |
| TextView[המייצג את מספר התורות    |                                   |
| ששוחקו מתחילת המשחק.]{dir="rtl"}  |                                   |
+-----------------------------------+-----------------------------------+
| [עצם ה-]{dir="rtl"}               | private TextView tvTime           |
| TextView[המייצג את כמות הזמן      |                                   |
| שעברה מתחילת המשחק (או את כמות    |                                   |
| הזמן שנותרה, תלוי בהגדרות         |                                   |
| המשתמש).]{dir="rtl"}              |                                   |
+-----------------------------------+-----------------------------------+
| [עצם המייצג את כפתור              | private ImageButton btnUndo       |
| ה-]{dir="rtl"}undo [(בטל ביצוע    |                                   |
| התור).]{dir="rtl"}                |                                   |
+-----------------------------------+-----------------------------------+
| [עצם המייצג את כפתור              | private ImageButton btnRedo       |
| ה-]{dir="rtl"}redo [(בצע          |                                   |
| שוב).]{dir="rtl"}                 |                                   |
+-----------------------------------+-----------------------------------+
| [עצם המאפשר תקשורת עם הגדרות      | private SettingsManager settings  |
| המשתמש.]{dir="rtl"}               |                                   |
+-----------------------------------+-----------------------------------+
| [עצם המאפשר תקשורת עם מסד הנתונים | private GameDetailsDataBase       |
| של המשתמש.]{dir="rtl"}            | database                          |
+-----------------------------------+-----------------------------------+
| [עצם המאפשר תקשורת עם השמעת       | private MusicControl musicControl |
| הצלילים של המשחק.]{dir="rtl"}     |                                   |
+-----------------------------------+-----------------------------------+
| [עצם המאפשר לבצע רטט.]{dir="rtl"} | private Vibrator vibrator         |
+-----------------------------------+-----------------------------------+
| [עצם ה-]{dir="rtl"}Handler        | private final Handler handler     |
| [לניהול ה-]{dir="rtl"}posts       |                                   |
| [וה-]{dir="rtl"}threads [של       |                                   |
| המשחק.]{dir="rtl"}                |                                   |
+-----------------------------------+-----------------------------------+
| [משתנה המחזיק את כמות הזמן שעברה  | private int timeCounter           |
| מתחילת המשחק                      |                                   |
| (בשניות).]{dir="rtl"}             |                                   |
+-----------------------------------+-----------------------------------+
| [משתנה המייצג את כמות הזמן        | private int endTime               |
| המקסימלית שמוקצבת                 |                                   |
| למשחק.]{dir="rtl"}                |                                   |
+-----------------------------------+-----------------------------------+
| [משתנה בוליאני המייצג אם ספירת    | private boolean isCountTime       |
| זמן מאופשרת.]{dir="rtl"}          |                                   |
+-----------------------------------+-----------------------------------+
| [משתנה בוליאני המייצג אם ספירת    | private boolean isCountUp         |
| הזמן היא כלפי מעלה.]{dir="rtl"}   |                                   |
+-----------------------------------+-----------------------------------+
| [משתנה המייצג את עצם              | private GameController controller |
| ה-]{dir="rtl"} Controller [המנהל  |                                   |
| את המשחק.]{dir="rtl"}             |                                   |
+-----------------------------------+-----------------------------------+
| [מילון המייצג את המשבצות האפשריות | private HashMap\<String,          |
| לביצוע התור: המפתחות מייצגים את   | List\<Cell>\> validLocations      |
| התג של מיקום המשבצת והערכים הם    |                                   |
| רשימת המשבצות החדשות שיתוספו      |                                   |
| למשתמש אם יבצע את תורו למשבצת     |                                   |
| שהמפתח מייצג.]{dir="rtl"}         |                                   |
+-----------------------------------+-----------------------------------+
| [מילון המייצג את משבצות הדסקיות   | private HashMap\<Cell, Integer>   |
| ה\"פוטנציאליות\" האחרונות שהוצגו: | prevAttainable                    |
| המפתחות הם המשבצות והערכים הם     |                                   |
| ערכי הבהירות הקודמים של הדסקיות   |                                   |
| לפני שהוצגו.]{dir="rtl"}          |                                   |
|                                   |                                   |
| [מטרת מילון זה היא לאפשר תמיכה    |                                   |
| בהחזרת הדסקיות למצבן הקודם לאחר   |                                   |
| ששונה להן ערך                     |                                   |
| הבהירות.]{dir="rtl"}              |                                   |
+-----------------------------------+-----------------------------------+
| [משתנה המייצג את תג המשבצת שבחר   | private String computerChoice     |
| המחשב עבור תורו.]{dir="rtl"}      |                                   |
+-----------------------------------+-----------------------------------+
| [משתנה בוליאני המייצג אם          | private boolean isInitiating      |
| האפליקציה בשלב האתחול הראשוני של  |                                   |
| לוח המשחק.]{dir="rtl"}            |                                   |
|                                   |                                   |
| [לאחר טעינת המשחק הראשון ערכו     |                                   |
| נהפך ל\"שקר\".]{dir="rtl"}        |                                   |
|                                   |                                   |
| [מטרתו היא מניעת ביצוע קוד מיותר  |                                   |
| ומניעת שכפול שמירת משחקים         |                                   |
| שהסתיימו הנטענים                  |                                   |
| מחדש.]{dir="rtl"}                 |                                   |
+-----------------------------------+-----------------------------------+
| [משתנה בוליאני המייצג אם התצוגה   | private boolean isFinished        |
| הציגה את סיום המשחק.]{dir="rtl"}  |                                   |
|                                   |                                   |
| [מטרת המשתנה היא מניעת הצגת סוף   |                                   |
| המשחק מספר פעמים ללא              |                                   |
| צורך.]{dir="rtl"}                 |                                   |
+-----------------------------------+-----------------------------------+
| [עצם המייצג מידע אודות המשחק כאשר | private FinishedGameDetails       |
| הסתיים.]{dir="rtl"}               | finishedGameDetails               |
+-----------------------------------+-----------------------------------+
| [עצם המכיל את הקוד שקורא          | private final Runnable            |
| ל-]{dir="rtl"} Controller [לבצע   | makeComputerChoice                |
| את החישובים הרלוונטיים ולהחליט את |                                   |
| מהלך תורו (בט\'רד נפרד), ומבצע את |                                   |
| מהלך המחשב (בדיליי מתאים אם סיים  |                                   |
| את חישוביו לפני הזמן המינימלי     |                                   |
| להמתנה לו).]{dir="rtl"}           |                                   |
+-----------------------------------+-----------------------------------+
| [עצם המכיל את הקוד שמבצע את התור  | private final Runnable            |
| עם החלטת המחשב.]{dir="rtl"}       | playComputerChoice                |
+-----------------------------------+-----------------------------------+
| [עצם המכיל את הקוד שנקרא עם       | private final Runnable timeRun    |
| כל]{dir="rtl"} tick [של הטיימר    |                                   |
| (כל שנייה), מקדם את               |                                   |
| ה]{dir="rtl"}counter [ומבצע את    |                                   |
| הפעולות הרלוונטיות.]{dir="rtl"}   |                                   |
+-----------------------------------+-----------------------------------+

**[פעולות המחלקה]{dir="rtl"}**

+-----------------------------------+-----------------------------------+
| **[דריסת פעולה הנקראת כאשר נוצר   | \@Override\                       |
| המסך.]{dir="rtl"}**               | protected void onCreate(Bundle    |
|                                   | savedInstanceState)               |
+-----------------------------------+-----------------------------------+
| [פעולה הנקראת כאשר המשתמש בחר     | private void quickGame()          |
| להתחיל משחק מהיר: אם אין משחק     |                                   |
| שמור, הפעולה מאתחלת משחק בהתאם    |                                   |
| להגדרות ברירת המחדל של המשתמש. אם |                                   |
| יש משחק שמור והמשתמש בחר בהגדרות  |                                   |
| לטעון משחקים שמורים אוטומטית,     |                                   |
| נטען המשחק השמור. אם יש משחק שמור |                                   |
| והמשתמש הגדיר שטעינת משחק שמור לא |                                   |
| תהיה אוטומטית, הפעולה פותחת       |                                   |
| דיאלוג השואל את המשתמש אם ברצונו  |                                   |
| לטעון משחק שמור או לאתחל משחק חדש |                                   |
| בהתאם להגדרות ברירת המחדש (או     |                                   |
| לחזור למסך הקודם).]{dir="rtl"}    |                                   |
|                                   |                                   |
| [(ראה תרשים מצורף בסוף התיעוד תחת |                                   |
| \"משחק מהיר\").]{dir="rtl"}       |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המקשרת את מצביעי עצמי      | private void linkDisplay()        |
| התצוגה הרלוונטיים                 |                                   |
| לתצוגה.]{dir="rtl"}               |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה השואלת את המשתמש האם       | private void loadGameDialog()     |
| ברצונו לטעון משחק קיים, לאתחל     |                                   |
| משחק חדש, או לחזור למסך           |                                   |
| הקודם.]{dir="rtl"}                |                                   |
|                                   |                                   |
| [(ראה תרשים מצורף בסוף התיעוד תחת |                                   |
| \"משחק מהיר\").]{dir="rtl"}       |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה הטוענת משחק קיים ומתחילה   | private void initGame()           |
| אותו.]{dir="rtl"}                 |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המקבלת מצב משחק ורמת קושי, | private void                      |
| ומאתחלת משחק בהתאם לרמת הקושי     | initGame(OngoingGameDetails       |
| ולמצב שהועבר כפרמטר (אם           | gameState,                        |
| הוא]{dir="rtl"} null[, הפעולה     | GameController.Difficulty         |
| מאתחלת משחק חדש).]{dir="rtl"}     | defaultDifficulty)                |
+-----------------------------------+-----------------------------------+
| [פעולה המאתחלת את לוח התצוגה של   | private void initBoard()          |
| המשחק]{dir="rtl"}                 |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה הנקראת כאשר המשתמש בחר     | public void undo(View view)       |
| לבטל את ביצוע התור הקודם- עושה    |                                   |
| זאת ומעדכנת את התצוגה             |                                   |
| בהתאם.]{dir="rtl"}                |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה הנקראת כאשר המשתמש בחר     | public void redo(View view)       |
| לבצע שוב את התור האחרון שבוטל-    |                                   |
| עושה זאת ומעדכנת את התצוגה        |                                   |
| בהתאם.]{dir="rtl"}                |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המעדכנת את התצוגה לאחר     | private void syncUndoRedo()       |
| שהמשתמש ביצע שוב פעולה או ביטל    |                                   |
| אותה.]{dir="rtl"}                 |                                   |
+-----------------------------------+-----------------------------------+
| [דריסת הפעולה הנקראת כאשר המשתמש  | \@Override\                       |
| לחץ על]{dir="rtl"} View [המאזין   | public void onClick(View view)    |
| ללחיצות. הכפתורים של דסקיות המשחק |                                   |
| הם הנרשמים לפעולה זאת- כאשר       |                                   |
| המשתמש בוחר לבצע את תורו ולוחץ על |                                   |
| המשבצת שברצונו להתקדם אליה,       |                                   |
| הפעולה נקראת.]{dir="rtl"}         |                                   |
|                                   |                                   |
| [היא מבצעת את התור, מעדכנת את     |                                   |
| התצוגה וקוראת למחשב לבצע את תורו  |                                   |
| במידה וזהו תורו.]{dir="rtl"}      |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המבצעת את תור המחשב        | private void playComputerTurn()   |
| (ב-]{dir="rtl"}thread [נפרד ע\"י  |                                   |
| בקשות]{dir="rtl"} post            |                                   |
| [של]{dir="rtl"} Handler[) אם התור |                                   |
| הנוכחי הוא תור המחשב.]{dir="rtl"} |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המבטלת את סימונן של דסקיות | private void                      |
| ה\"רמז\" על גבי                   | disableOldValidChoices()          |
| התצוגה.]{dir="rtl"}               |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המקבלת כפרמטר מחרוזת       | private void nextTurn(String      |
| המייצגת את המיקום על הלוח שהשחקן  | tagCurrentMove)                   |
| שתורו הוא הנוכחי בחר לשחק אליו,   |                                   |
| מבצעת את תורו ומעדכנת את התצוגה   |                                   |
| בהתאם.]{dir="rtl"}                |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המבצעת את הפעולות          | private void superMove()          |
| הרלוונטיות כאשר זוהה              |                                   |
| \"מהלך-על\".]{dir="rtl"}          |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המקבלת כפרמטר שורה ועמודה  | private void disableSquare(int    |
| המייצגות משבצת על לוח המשחק,      | row, int col)                     |
| ומבטלת את המשבצת, דהיינו, מבטלת   |                                   |
| את הלחיצות על המשבצת ומנקה את     |                                   |
| הטקסט שמוצג עליה.]{dir="rtl"}     |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המעדכנת על לוח התצוגה את   | private void showValidLocations() |
| דסקיות ה\"רמז\".]{dir="rtl"}      |                                   |
+-----------------------------------+-----------------------------------+
| [דריסת הפעולה הנקראת כאשר זוהה    | \@Override\                       |
| מגע עם ה-]{dir="rtl"}View [שהאזין | public boolean onTouch(View view, |
| לכך. מטרת הדריסה היא לזהות לחיצה  | MotionEvent motionEvent)          |
| ממושכת כדי להציג את הדסקיות       |                                   |
| ה\"פוטנציאליות\" וסיום הלחיצה     |                                   |
| הממושכת.]{dir="rtl"}              |                                   |
|                                   |                                   |
| [בחרתי להשתמש בפעולה זאת ולא      |                                   |
| בזיהוי לחיצה ארוכה                |                                   |
| (]{dir="rtl"}Long Click[), משום   |                                   |
| שלדעתי זיהוי זה יותר מתאים לתגובה |                                   |
| הרצויה הרלוונטית.]{dir="rtl"}     |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המקבלת כפרמטרים שורה       | private void syncSquareColor(int  |
| ועמודה המייצגות משבצת על המשחק,   | row, int col)                     |
| ומעדכנת את צבע הדסקית שעל המקלדת  |                                   |
| בהתאם למהלך המשחק.]{dir="rtl"}    |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המעדכנת את התצוגה בהתאם    | private void displayPlayerTurn()  |
| למצב המשחק הנוכחי.]{dir="rtl"}    |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המקבלת כפרמטר]{dir="rtl"}  | private void                      |
| ImageButton [ומשתנה בוליאני       | b                                 |
| המייצג אם לאפשר את הכפתור,        | tnSetEnabledWithAlpha(ImageButton |
| ומאפשרת או מבטלת אותו בהתאם (יחד  | btn, boolean isEnable)            |
| עם הבהירות).]{dir="rtl"}          |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המקבלת כפרמטר]{dir="rtl"}  | private void viewSetEnabled(View  |
| View [ומשתנה בוליאני המייצג אם    | view, boolean isEnable)           |
| לאפשר אותו, ומאפשרת או מבטלת אותו |                                   |
| בהתאם.]{dir="rtl"}                |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה הנקראת כאשר המשחק הסתיים   | private void finishGame()         |
| ומעדכנת את התצוגה בהתאם, מציגה    |                                   |
| דיאלוגים רלוונטיים ושומרת את      |                                   |
| הנתונים במידת הצורך.]{dir="rtl"}  |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה השומרת את נתוני המשחק      | private void saveEndgameStats()   |
| שנגמר (במידת הצורך).]{dir="rtl"}  |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המעדכנת את בסיס הנתונים    | private void                      |
| ואת התכונות הרלוונטיות לגבי המשחק | updateFinishedAndDB()             |
| שנגמר.]{dir="rtl"}                |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המעדכנת את הטקסט שבראש     | private void displayEndgame()     |
| הלוח בהתאם לתוצאות המשחק          |                                   |
| שהסתיים.]{dir="rtl"}              |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה השומרת מצב משחק קיים (כדי  | private void                      |
| לתמוך בטעינת משחק                 | saveOngoingGameStats()            |
| שמור).]{dir="rtl"}                |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המציגה את נתוני המשחק      | private void dialogStats()        |
| שהסתיים (ע\"י דיאלוג מותאם        |                                   |
| אישית).]{dir="rtl"}               |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המציגה דיאלוג, כאשר נגמר   | private void                      |
| המשחק, השואל את המשתמש אם ברצונו  | displayDialogEndgame()            |
| לשתף את תוצאות המשחק, להתחיל משחק |                                   |
| חדש, או לסגור את                  |                                   |
| הדיאלוג.]{dir="rtl"}              |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה שמזומנת כאשר המשתמש לחץ על | public void newGame(View view)    |
| כפתור \"משחק חדש\". היא מבטלת את  |                                   |
| תור המחשב אם היה בזמן ביצוע,      |                                   |
| ומאתחלת משחק חדש.]{dir="rtl"}     |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המקבלת כפרמטר משתנה המייצג | private void newGame(int          |
| באיזו נקודת זמן להתחיל את הטיימר, | setTimeTo)                        |
| ומתחילה משחק חדש.]{dir="rtl"}     |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המעדכנת עבור כל משבצת את   | private void syncBoardToModel()   |
| התצוגה שלה בהתאם למצב             |                                   |
| המשחק.]{dir="rtl"}                |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המקבלת כפרמטרים את צבעי    | private void                      |
| השחקן הראשון והשני, ומעדכנת את    | syncDisplayColors(int firstColor, |
| צבעי נתוני התצוגה                 | int secondColor)                  |
| בהתאם.]{dir="rtl"}                |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המעדכנת את טיימר המשחק     | private void displayTime()        |
| בהתאם לזמן הנתון ומבצעת את        |                                   |
| הפעולות הרלוונטיות.]{dir="rtl"}   |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה הכופה על המשחק להסתיים     | private void forceFinish()        |
| במצבו הקיים (דוגמא לשימוש בה הוא  |                                   |
| כאשר נגמר הזמן שהוקצב             |                                   |
| למשחק).]{dir="rtl"}               |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המפעילה/ממשיכה את ספירת    | private void resumeTimer()        |
| הטיימר.]{dir="rtl"}               |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה העוצרת את ספירת            | private void pauseTimer()         |
| הטיימר.]{dir="rtl"}               |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המקבלת כפרמטר נקודת זמן    | private void setTimer(int setTo)  |
| לאתחל בה את הטיימר, מאתחלת אותו   |                                   |
| ומעדכנת אותו בהתאם.]{dir="rtl"}   |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המקבלת כפרמטר סאונד        | private void                      |
| (]{dir="rtl"}Enum[- תיעוד בהמשך)  | playSound(MusicControl.Sound      |
| להפעיל ומפעילה אותו אם סאונד      | sound)                            |
| מאופשר בהגדרות.]{dir="rtl"}       |                                   |
+-----------------------------------+-----------------------------------+
| [דריסת פעולה המזומנת כאשר משתמש   | \@Override\                       |
| לוחץ על כפתור החזרה (המובנה       | public void onBackPressed()       |
| בטלפון). מטרת הדריסה היא בדיקה אם |                                   |
| יש צורך לשמור את המשחק. אם יש,    |                                   |
| הפעולה מזמנת דיאלוג השואל את      |                                   |
| המשתמש אם ברצונו לשמור את תוצאות  |                                   |
| המשחק הקיים (אם לא אפשר בהגדרות   |                                   |
| שמירה אוטומטית). אם אין צורך,     |                                   |
| הפעולה קוראת לפעולת העל           |                                   |
| (חוזרת).]{dir="rtl"}              |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המזמנת דיאלוג השואל את     | private void quitDialog()         |
| המשתמש אם ברצונו לשמור את נתוני   |                                   |
| המשחק הקיים (כדי שיוכל לטעון אותו |                                   |
| בהמשך), להשליך אותם, או לסגור את  |                                   |
| הדיאלוג ולהמשיך לשחק.]{dir="rtl"} |                                   |
+-----------------------------------+-----------------------------------+
| [דריסת פעולה הנקראת כאשר המסך     | \@Override\                       |
| \"נהרס\". מטרת הדריסה היא         | protected void onDestroy()        |
| ביטול/הסרת ה-]{dir="rtl"}         |                                   |
| Callbacks [לבקשות ה-]{dir="rtl"}  |                                   |
| post [אם קיימים.]{dir="rtl"}      |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המבטלת]{dir="rtl"}         | private void                      |
| Callbacks [לבקשות ה-]{dir="rtl"}  | removeComputerCallbacks()         |
| post [הקשורות לביצוע תור          |                                   |
| המחשב.]{dir="rtl"}                |                                   |
+-----------------------------------+-----------------------------------+

[\
]{dir="rtl"}

![](media/image29.jpeg){width="3.1486111111111112in"
height="5.802083333333333in"}

[]{#_Toc76826919 .anchor}RecordsActivity

[המחלקה מקושרת למסך תוצאות המשחקים. היא אחראית על שליפת נתוני המשחקים
ממסד הנתונים והצגתם. דרכה ניתן למחוק משחקים שנשמרו על ידי כניסה ל\"מצב
מחיקה\"-]{dir="rtl"} Delete Mode[. הכניסה למצב זה היא או ע\"י לחיצה על
הכפתור בראש הד, או ע\"י לחיצה ארוכה על אחת הרשומות כך שבנוסף לכניסה למצב
המחיקה, הרשומה הנבחרת תסומן כמיועדת למחיקה. כאשר רשומה אחת או יותר
מסומנות, ניתן למחוק אותן ע\"י לחיצה על כפתור המחיקה (ואישור הפעולה דרך
הדיאלוג). ניתן גם לסמן את כל הרשומות או לבטל את סימונן ע\"י תיבת הסימן
\"]{dir="rtl"}Select All[\". היציאה ממצב זה היא ע\"י לחיצה את הכפתור
המתאים ליציאה, או ע\"י מחיקת רשומות אשר תוביל חזרה למצב הרגיל. המחלקה גם
מאפשרת הצגת הנתונים באופן ממוין לפי קריטריון/תכונה ע\"פ בקשת המשתמש,
בסדר עולה או יורד לפי בחירתו. לחיצה (רגילה) על רשומה תציג את המשחק
המתאים באופן מפורט יותר.]{dir="rtl"}

**[תכונות המחלקה]{dir="rtl"}**

  ----------------------------------- -----------------------------------
  [החלק העליון של התצוגה של המצב      private ConstraintLayout
  הרגיל.]{dir="rtl"}                  upperDefault

  [החלק העליון של התצוגה של מצב       private ConstraintLayout
  מחיקה.]{dir="rtl"}                  upperDelete

  [משתנה בוליאני המייצג אם מצב מחיקה  private boolean isDeleteMode
  פועל.]{dir="rtl"}                   

  [הכפתור שלחיצה עליו מובילה לכניסה   private ImageButton
  למצב מחיקה.]{dir="rtl"}             btnEnterDeleteMode

  [הכפתור במצב מחיקה שלחיצה עליו      private ImageButton
  תוביל למחיקת הרשומות המסומנות       deleteSelectedBtn
  כמיועדות למחיקה (לאחר דיאלוג        
  שייפתח).]{dir="rtl"}                

  [תיבת הסימון שלחיצה עליה תסמן את כל private CheckBox cbSelectAll
  הרשומות (או אם כבר פועלת אז תבטל את 
  סימון כל הרשומות).]{dir="rtl"}      

  [ה-]{dir="rtl"} TextView [המציג את  private TextView tvDisplaySelected
  מספר הרשומות שסומנו (או טקסט מתאים  
  אם לא סומנו).]{dir="rtl"}           

  [ה-]{dir="rtl"} ListView [המכיל את  private ListView lvRecords
  כל הרשומות המייצגות את תוצאות       
  המשחקים.]{dir="rtl"}                

  [הרשימה של העצמים המכילים את תוצאות private
  המשחקים השמורים במסד                ArrayList\<FinishedGameDetails>
  הנתונים.]{dir="rtl"}                games

  [המתאם שמאפשר הצגת המשחקים השמורים  private GameDetailsAdapter adapter
  ב-]{dir="rtl"} ListView [המתאים     
  וקישור ביניהם.]{dir="rtl"}          

  [עצם המאפשר תקשורת עם הגדרות        private SettingsManager settings
  המשתמש.]{dir="rtl"}                 

  [עצם המאפשר תקשורת עם מסד הנתונים   private GameDetailsDataBase
  של המשתמש.]{dir="rtl"}              database

  [עצם המממש את המחלקה]{dir="rtl"}    private GameDetailsComparator
  Comparator [כדי לאפשר את מיון       comparator
  הרשימה לפי הפרמטרים                 
  הרצויים.]{dir="rtl"}                

  [ה-]{dir="rtl"} Spinner [המאפשר     private Spinner spnSort
  למשתמש לבחור לפי איזה פרמטר למיין   
  את רשימת המשחקים.]{dir="rtl"}       

  [משתנה בוליאני המייצג אם מיון       private boolean isSortAsc
  הרשימה הוא בסדר עולה.]{dir="rtl"}   

  [הכפתור שלחיצה עליו תשנה את סדר     private ImageButton btnAscDesc
  הצגת הרשומות (סדר עולה או           
  יורד).]{dir="rtl"}                  
  ----------------------------------- -----------------------------------

**[פעולות המחלקה]{dir="rtl"}**

  -------------------------------------- ----------------------------------------
  **[דריסת פעולה הנקראת כאשר נוצר        \@Override\
  המסך.]{dir="rtl"}**                    protected void onCreate(Bundle
                                         savedInstanceState)

  [פעולה המקשרת בין המצביעים לבין עצמי   private void linkDisplay()
  התצוגה המתאימים להם.]{dir="rtl"}       

  [פעולה המגדירה מאזינים לעצמים          private void setListeners()
  ולאירועים הרלוונטיים.]{dir="rtl"}      

  [דריסת הפעולה הנקראת כאשר זוהתה לחיצה  \@Override\
  ארוכה על פריט שנרשם למאזין המתאים.     public boolean
  מטרת הדריסה היא האזנה ללחיצה ארוכה על  onItemLongClick(AdapterView\<?>
  פריט ברשימה כדי לעבור למצב מחיקה ולבצע adapterView, View view, int i, long l)
  את הפעולות הרלוונטיות.]{dir="rtl"}     

  [דריסת הפעולה הנקראת כאשר נבחר פריט    \@Override\
  שנרשם למאזין המתאים. מטרת הדריסה היא   public void
  זיהוי בחירת המשתמש למיון הרשימה לפי    onItemSelected(AdapterView\<?>
  הפרמטר הנבחר.]{dir="rtl"}              adapterView, View view, int i, long l)

  [דריסת הפעולה הנקראת כאשר שום איבר לא  \@Override\
  נבחר (מצב זה לדוגמא יכול להיווצר כאשר  public void
  איבר שנבחר נמחק מהרשימה או שהרשימה     onNothingSelected(AdapterView\<?>
  ריקה). הדריסה נעשתה מפני שהיא חובה     adapterView)
  למימוש לאור מימוש הממשק]{dir="rtl"}    
  OnItemSelectedListener[.]{dir="rtl"}   

  [דריסת הפעולה הנקראת כאשר זוהתה לחיצה  \@Override\
  על פריט שנרשם למאזין המתאים. הדריסה    public void onItemClick(AdapterView\<?>
  היא לשם זיהוי לחיצת המשתמש על אחת      adapterView, View view, int i, long l)
  הרשומות: כאשר המצב הוא מצב מחיקה       
  הרשומת מסומנת כמיועדת למחיקה, וכאשר    
  הוא אינו מצב מחיקה הרשומה מוצגת באופן  
  מפורט יותר על המסך.]{dir="rtl"}        

  [פעולה הנקראת כאשר המשתמש לחץ על       public void changeOrder(View view)
  הכפתור המתאים לשינוי סדר המיון: הופכת  
  את סדר המיון (מעולה ליורד או מיורד     
  לעולה).]{dir="rtl"}                    

  [פעולה המעדכנת את תמונת הכפתור לשינוי  private void updateOrderBtn()
  סדר הרשימה בהתאם לסדר                  
  המתאים.]{dir="rtl"}                    

  [פעולה הגוללת לראש הרשימה (אם לא       private void scrollTop()
  ריקה).]{dir="rtl"}                     

  [פעולה הנקראת כאשר המשתמש לחץ על       public void toggleDeleteMode(View view)
  הכפתור לכניסה/יציאה ממצב מחיקה. היא    
  מזמנת את הפעולה המתאימה.]{dir="rtl"}   

  [פעולה המשנה את המצב הנוכחי: ממצב      private void toggleDeleteMode()
  מחיקה למצב רגיל או ממצב רגיל למצב      
  מחיקה.]{dir="rtl"}                     

  [פעולה המקבלת כפרמטר פרטים אודות משחק  private void
  שמור ומציגה דיאלוג המכיל פרטים מפורטים displayExtendedRow(FinishedGameDetails
  אודות משחק זה.]{dir="rtl"}             rowDetails)

  [פעולה הנקראת כאשר המשתמש לחץ על       public void selectAll(View view)
  הכפתור של סימון כל הרשומות (או ביטול   
  של סימון כל הרשומות) ופועלת            
  בהתאם.]{dir="rtl"}                     

  [פעולה הנקראת כאשר המשתמש לחץ על       public void deleteSelectedClicked(View
  הכפתור למחיקת כל הרשומות המסומנות. היא view)
  פועלת בהתאם.]{dir="rtl"}               

  [פעולה המציגה דיאלוג השואל את המשתמש   private void dialogDelete()
  אם הוא בטוח שברצונו למחוק את הרשומות   
  שסימן ופועלת בהתאם                     
  לבחירתו.]{dir="rtl"}                   

  [פעולה המקבלת כפרמטר]{dir="rtl"} Set   private void deleteRecords(Set\<Integer>
  [המכיל את האינדקסים של הרשומות למחיקה  recordsToDelete)
  ומוחקת אותן.]{dir="rtl"}               

  [פעולה המסנכרנת את התצוגה בהתאם למספר  private void syncAdapterAndBtn()
  הרשומות שסומנו כמיועדות                
  למחיקה.]{dir="rtl"}                    

  [דריסת הפעולה הנקראת כאשר המשתמש לחץ   \@Override\
  על כפתור החזרה המובנה בטלפון. מטרת     public void onBackPressed()
  הדריסה היא זיהוי אם המשתמש נמצא במצב   
  מחיקה לפני פעולה זו. אם כן, קודם תוציא 
  אותו ממצב מחיקה ותעביר אותו למצב רגיל. 
  אם הוא לא במצב מחיקה, הפעולה קוראת     
  לפעולת העל הנדרסת (חוזרת למסך          
  הקודם).]{dir="rtl"}                    
  -------------------------------------- ----------------------------------------

[\
]{dir="rtl"}

[]{#_Toc76826920 .anchor}SettingsActivity

[המחלקה מקושרת למסך ההגדרות. היא מאפשרת למשתמש לשנות את הגדרותיו, לאפס
אותן, וכן לערוך את תמונת הפרופיל שלו ולהציג אותה. ניתן להסתיר את תמונת
הפרופיל על מנת להציג על חלק נרחב יותר מהמסך את ההגדרות.]{dir="rtl"}

**[תכונות המחלקה]{dir="rtl"}**

  -------------------------------- ------------------------------------------
  [משתנה סטטי קבוע המייצג את זמן   private static final int *MIN_DURATION*
  המשחק המינימלי שיכול להיות מוקצב 
  למשחק.]{dir="rtl"}               

  [משתנה סטטי קבוע המייצג את כמות  private static final int *MIN_MINUTES*
  הדקות המינימלית שהמשתמש יכול     
  לבחור ב-]{dir="rtl"}Picker       
  [המתאים.]{dir="rtl"}             

  [משתנה סטטי קבוע המייצג את כמות  private static final int *MAX_MINUTES*
  הדקות המקסימלית שהמשתמש יכול     
  לבחור ב-]{dir="rtl"}Picker       
  [המתאים.]{dir="rtl"}             

  [משתנה סטטי קבוע המייצג את כמות  private static final int *MIN_SECONDS*
  השניות המינימלית שהמשתמש יכול    
  לבחור ב-]{dir="rtl"}Picker       
  [המתאים.]{dir="rtl"}             

  [משתנה סטטי קבוע המייצג את כמות  private static final int *MAX_SECONDS*
  השניות המקסימלית שהמשתמש יכול    
  לבחור ב-]{dir="rtl"}Picker       
  [המתאים.]{dir="rtl"}             

  [משתנה סטטי קבוע המייצג את       private static final int
  ה-]{dir="rtl"}Request Code       *REQUEST_IMAGE_CAPTURE*
  [המתאים לצילום תמונה לצורך תמונת 
  פרופיל.]{dir="rtl"}              

  [משתנה סטטי קבוע המייצג את       private static final int
  ה-]{dir="rtl"}Request Code       *REQUEST_PICK_PHOTO*
  [המתאים לבחירת תמונה לצורך תמונת 
  פרופיל.]{dir="rtl"}              

  [משתנה סטטי קבוע המייצג את       private static final int
  ה-]{dir="rtl"}Request Code       *REQUEST_CAM_PERMISSION*
  [המתאים לבקשת הרשאה לצילום תמונה 
  מהמשתמש.]{dir="rtl"}             

  [משתנה סטטי קבוע המייצג את שם    private static final String
  הקובץ המכיל את תמונת הפרופיל של  *PICTURE_PROFILE_NAME*
  המשתמש.]{dir="rtl"}              

  [עצם המייצג את שירות מוזיקת הרקע private Intent bgMusicIntent
  על מנת לתקשר עמו.]{dir="rtl"}    

  [ה-]{dir="rtl"} ConstraintLayout private ConstraintLayout rootSettings
  [הראשי של תצוגת מסך              
  ההגדרות.]{dir="rtl"}             

  [עצם ה-]{dir="rtl"}              private ConstraintSet settingsSet
  ConstraintSet [המאפשר שינוי      
  הגדרות של תצוגת]{dir="rtl"}      
  ConstraintLayout [דרך            
  הקוד.]{dir="rtl"}                

  [ה-]{dir="rtl"} ConstraintLayout private ConstraintLayout
  [המכיל את התצוגה המתאימה להצגת   choosePicContainer
  תמונת הפרופיל.]{dir="rtl"}       

  [הכפתור שמאפשר להרחיב את מרחב    private ImageButton
  הצגת ההגדרות (להסתיר את תמונת    btnToggleExpandedSettings
  הפרופיל).]{dir="rtl"}            

  [משתנה בוליאני המייצג אם מסך     private boolean isExpandSettings
  ההגדרות הורחב.]{dir="rtl"}       

  [הכפתור שמאפשר להפעיל או לכבות   private ToggleButton tbBgMusic
  את מוזיקת הרקע.]{dir="rtl"}      

  [הכפתור שמאפשר להפעיל או לכבות   private ToggleButton tbSound
  צלילים של האפליקציה.]{dir="rtl"} 

  [הכפתור שמשאפשר להפעיל או לכבות  private ToggleButton tbVibrate
  את הרטט באפליקציה.]{dir="rtl"}   

  [המתג שמאפשר להפעיל או לכבות     private SwitchCompat switchEndgameDialog
  הצגת דיאלוג בסוף                 
  משחק.]{dir="rtl"}                

  [המתג שמאפשר להפעיל או לכבות     private SwitchCompat switchShowHints
  הצגת המספרים על גבי דסקיות       
  ה\"רמז\" המייצגים את כמות        
  הדסקיות החדשות שיקבל המשתמש אם   
  יבצע לשם את מהלכו                
  הבא.]{dir="rtl"}                 

  [המתג שמאפשר להפעיל או לכבות     private SwitchCompat switchAskBeforeSave
  שמירה אוטומטית של מצב המשחק      
  ביציאת המשתמש.]{dir="rtl"}       

  [המתג שמאפשר להפעיל או לכבות     private SwitchCompat
  טעינה אוטומטית של משחק           switchAlwaysLoadSavedGame
  שמור.]{dir="rtl"}                

  [הכפתור שמאפשר לקבוע אם השחקן    private ToggleButton tbStartPlayer
  הראשון או השני מתחילים את        
  המשחק.]{dir="rtl"}               

  [הכפתור שמאפשר לקבוע אם ספירת    private ToggleButton tbTimeCounting
  הזמן הקצוב למשחק תהיה עולה או    
  יורדת.]{dir="rtl"}               

  [ה-]{dir="rtl"} TextView [שמכיל  private TextView tvToggleExpandSettings
  את הטקסט שמציג למשתמש את הפעולה  
  שתתבצע בלחיצה על הכפתור להרחיב   
  או לצמצם את מרחב הצגת            
  ההגדרות.]{dir="rtl"}             

  [ה-]{dir="rtl"} RadioGroup       private RadioGroup rgSizes
  [שמכיל את כפתורי הבחירה אם       
  ברצונו של המשתמש לקבוע ידנית את  
  גודל הלוח ולפיו את מספר הדסקיות  
  ההתחלתי של כל שחקן, או לקבוע     
  ידנית את מספר הדסקיות ההתחלתית   
  של כל שחקן ולפיו את גודל         
  הלוח.]{dir="rtl"}                

  [ה-]{dir="rtl"} TextView [המכיל  private TextView tvBoardSize
  את הטקסט של הגדרת בחירת גודל     
  הלוח.]{dir="rtl"}                

  [תיבת הטקסט הניתנת לעריכה שדרכה  private EditText etBoardSize
  יכול המשתמש לבחור ידנית את גודל  
  הלוח.]{dir="rtl"}                

  [תיבת הטקסט הניתנת לעריכה שדרכה  private EditText etStartSize
  יכול המשתמש לבחור ידנית את מספר  
  הדסקיות ההתחלתי של כל            
  שחקן.]{dir="rtl"}                

  [ה-]{dir="rtl"} Spinner [שמאפשר  private Spinner spnBoardSize
  למשתמש לקבוע את גודל הלוח לפי    
  מספר הדסקיות ההתחלתי של כל שחקן  
  שקבע ידנית.]{dir="rtl"}          

  [ה-]{dir="rtl"} Spinner [שמאפשר  private Spinner spnStartSize
  למשתמש לקבוע את מספר הדסקיות     
  ההתחלתי של כל שחקן לפי גודל הלוח 
  שקבע ידנית.]{dir="rtl"}          

  [המתאם המאפשר קישור בין רשימת    private InitSizesAdapter sizesAdapter
  הגדלים האפשריים לבין             
  ה-]{dir="rtl"} Spinner           
  [המתאים.]{dir="rtl"}             

  [הדיאלוג שמאפשר למשמש לבחור את   private AlertDialog pickerDialog
  הזמן המוקצב למשחק.]{dir="rtl"}   

  [התצוגה \"המנופחת\" של הדיאלוג   private View timerPickerLayout
  לבחירת הזמן המוקצב               
  למשחק.]{dir="rtl"}               

  [ה-]{dir="rtl"} NumberPicker     private NumberPicker durationMinutesPicker
  [המייצג את הדקות שמוקצבות        
  למשחק.]{dir="rtl"}               

  [ה-]{dir="rtl"} NumberPicker     private NumberPicker durationSecondsPicker
  [המייצג את השניות שמוקצבות       
  למשחק.]{dir="rtl"}               

  [החלונית שמציגה תיאור אודות      private PopupWindow popupWindow
  הגדרה מסוימת.]{dir="rtl"}        

  [ה-]{dir="rtl"} TextView [המכיל  private TextView tvPopup
  את הטקסט של תיאור הגדרה מסוימת   
  בתוך החלונית                     
  לתיאורה.]{dir="rtl"}             

  [ה-]{dir="rtl"} Spinner [שמאפשר  private Spinner spnFirstColor
  למשתמש לבחור את צבע הדסקיות של   
  השחקן הראשון.]{dir="rtl"}        

  [ה-]{dir="rtl"} Spinner [שמאפשר  private Spinner spnSecondColor
  למשתמש לבחור את צבע הדסקיות של   
  השחקן השני.]{dir="rtl"}          

  [המתאם המאפשר קישור בין רשימת    private ColorAdapter colorAdapter
  הצבעים האפשרית לבין הצגתם        
  ב-]{dir="rtl"} Spinner           
  [המתאים.]{dir="rtl"}             

  [ה-]{dir="rtl"} Spinner [המאפשר  private Spinner spnDifficulty
  למשתמש לבחור את רמת המשחק שתהווה 
  כברירת מחדל.]{dir="rtl"}         

  [המתאם שמאפשר קישור בין רשימת    private
  רמות הקושי האפשריות לבין הצגתן   ArrayAdapter\<GameController.Difficulty>
  ב-]{dir="rtl"} Spinner           difficultyAdapter
  [המתאים.]{dir="rtl"}             

  [הכפתור שמאפשר למשתמש לקבוע אם,  private ToggleButton tbHumanStarts
  במשחקים מול המחשב, המחשב או בן   
  האדם מתחיל את המשחק.]{dir="rtl"} 

  [הכפתור שמאפשר לאפס את הגדרת אם  private ImageButton btnResetHumanStarts
  המשתמש או המחשב מתחילים את       
  המשחק.]{dir="rtl"}               

  [עצם המאפשר תקשורת עם הגדרות     private SettingsManager settings
  המשתמש.]{dir="rtl"}              

  [עצם המאפשר תקשורת עם השמעת      private MusicControl musicControl
  הצלילים של                       
  האפליקציה.]{dir="rtl"}           

  [ה-]{dir="rtl"} Bitmap [של תמונת private Bitmap picImageBitmap
  הפרופיל של המשתמש.]{dir="rtl"}   

  [ה-]{dir="rtl"} ImageView [המכיל private ImageView picImg
  את תמונת הפרופיל של              
  המשתמש.]{dir="rtl"}              

  [משתנה שנועד למנוע ריצות מיותרות private int isInitColorSelection
  כאשר ה-]{dir="rtl"} Spinners [של 
  בחירת צבעי השחקנים               
  מאותחלים.]{dir="rtl"}            
  -------------------------------- ------------------------------------------

**[פעולות המחלקה]{dir="rtl"}**

  -------------------------------------- ----------------------------------------------
  **[דריסת פעולה הנקראת כאשר נוצר        \@Override\
  המסך.]{dir="rtl"}**                    protected void onCreate(Bundle
                                         savedInstanceState)

  [פעולה המקשרת בין המצביעים לבין עצמי   private void linkDisplay()
  התצוגה המתאימים להם.]{dir="rtl"}       

  [פעולה המאתחלת את העצמים הקשורים       private void linkPickers()
  ל]{dir="rtl"}NumberPickers [ומקשרת     
  אותם לתצוגה.]{dir="rtl"}               

  [פעולה המקשרת בין המתאמים השונים לבין  private void linkAdapters()
  הרשימות המתאימות להם.]{dir="rtl"}      

  [פעולה המגדירה רישום של העצמים         private void setListeners()
  הרלוונטיים לעצמים                      
  המתאימים.]{dir="rtl"}                  

  [פעולה המאתחלת את הדיאלוג של בחירת     private void setTimePickerDialog()
  אורך הזמן הקצוב למשחק.]{dir="rtl"}     

  [פעולה המגדירה את ההרשמות למאזינים     private void setStartSizeListeners()
  הרלוונטיים עבור שדה הטקסט של בחירת     
  מספר הדסקיות ההתחלתיות עבור כל         
  משתמש.]{dir="rtl"}                     

  [פעולה המגדירה את ההרשמות למאזינים     private void setBoardSizeListeners()
  הרלוונטיים עבור שדה הטקסט של בחירת     
  גודל הלוח.]{dir="rtl"}                 

  [פעולה המאתחלת את החלונית של תיאור     private void initPopups()
  שדות ההגדרות הרלוונטיים ורושמת אותם    
  למאזינים המתאימים.]{dir="rtl"}         

  [פעולה המסנכרנת בין ההגדרות המשתמש     private void syncSettings()
  לבין מסך ההגדרות.]{dir="rtl"}          

  [פעולה המסנכרנת בין המצב הקיים הקשור   private void syncExpandedSettings()
  לאם מסך ההגדרות הורחב ובין התצוגה      
  (מרחיבה או מצמצמת את הצגת              
  ההגדרות).]{dir="rtl"}                  

  [פעולה המסנכרנת בין הגדרות המשתמש לבין private void syncSizes()
  שדה הטקסט וה-]{dir="rtl"} Spinner [של  
  הגדלים המתאימים.]{dir="rtl"}           

  [פעולה המקבלת כפרמטר את שדה הטקסט      private void syncSize(EditText currentEt,
  \"הדלוק\" (המוצג לבחירה ידנית של       SettingsManager.Keys currentKey, Spinner
  המשתמש), את שם מפתח ההגדרות המתאים     otherSpn, List\<Integer> matchingSizes, int
  להגדרת הגודל שהוא מייצג, את            input)
  ה-]{dir="rtl"} Spinner [של הגודל האחר  
  שהוא לא מייצג (הגודל שנתון לבחירה מתוך 
  ה-]{dir="rtl"} Spinner [לפי הגודל      
  הידני), את רשימת הגדלים האפשריים       
  ל-]{dir="rtl"} Spinner [זה ואת הגודל   
  שהוכנס ידנית בשדה הטקסט הדלוק, ומעדכנת 
  את הגדרות המשתמש ומסנכרנת את התצוגה    
  בהתאם.]{dir="rtl"}                     

  [פעולה המקבלת כפרמטרים את שדה הטקסט    private void syncSize(EditText currentEt,
  \"הדלוק\" (המוצג לבחירה ידנית של       List\<Integer> matchingSizes, Spinner
  המשתמש), את רשימת הגדלים האפשריים      otherSpn)
  ל-]{dir="rtl"} Spinner [הדלוק ואת      
  ה-]{dir="rtl"} Spinner [הדלוק, ומעדכנת 
  את המתאם ואת התצוגה בהתאם.]{dir="rtl"} 

  [פעולה המסנכרנת את הגדרת אם המחשב או   private void syncHumanStarts()
  בן האדם מתחילים את המשחק עם            
  התצוגה.]{dir="rtl"}                    

  [פעולה המסנכרנת בין הגדרות המשתמש לבין private void syncDurationPicker()
  ה-]{dir="rtl"} NumberPickers           
  [המתאימים.]{dir="rtl"}                 

  [דריסת הפעולה המזומנת כאשר מצב         \@Override\
  ה-]{dir="rtl"} CompoundButton [משתנה   public void onCheckedChanged(CompoundButton
  מדלוק לכבוי או להיפך (הפרמטר הראשון    compoundButton, boolean b)
  שמקבלת זה את הכפתור שמצבו השתנה        
  והפרמטר השני את המצב הנוכחי שהוא השתנה 
  אליו). מטרת הדריסה היא האזנה מתי מצב   
  כפתורי ההגדרות השתנו על מנת לעדכן את   
  ההגדרות והתצוגה בהתאם.]{dir="rtl"}     

  [פעולה אשר טוענת את תמונת הפרופיל אם   private void loadImage()
  קיימת. אם לא, מציגה הודעה              
  מתאימה.]{dir="rtl"}                    

  [פעולה המאפשרת למשתמש לצלם תמונה לצורך public void takePic()
  תמונת הפרופיל בעזרת שימוש              
  ב-]{dir="rtl"} Implicit                
  Intent[.]{dir="rtl"}                   

  [דריסת הפעולה המזומנת כאשר מתקבלת      \@Override\
  תוצאה מ-]{dir="rtl"} Activity [שנפתח   protected void onActivityResult(int
  כדי להחזיר תוצאה. מטרת הדריסה היא      requestCode, int resultCode, \@Nullable Intent
  עדכון התמונה לאחר שהמשתמש בחר או צילם  data)
  לצורך תמונת הפרופיל.]{dir="rtl"}       

  [פעולה אשר שומרת את תמונת הפרופיל      private void savePic()
  בקובץ (על מנת לטעון אותה               
  בהמשך).]{dir="rtl"}                    

  [פעולה אשר מקבלת כפרמטר את שם הקובץ    public Bitmap loadImageBitmap(String name)
  לטעון ממנו תמונה ומחזירה את            
  ה-]{dir="rtl"} Bitmap [של              
  התמונה.]{dir="rtl"}                    

  [פעולה אשר מציגה דיאלוג שמאפשר למשתמש  public void setAction(View view)
  לבחור איך ברצונו לקבוע את תמונת        
  הפרופיל -- לצלם אותה או לבחור תמונה    
  קיימת.]{dir="rtl"}                     

  [פעולה אשר מאפשר למשתמש לבחור תמונת    private void pickGallery()
  פרופיל קיימת בעזרת]{dir="rtl"}         
  Implicit Intent[.]{dir="rtl"}          

  [דריסת הפעולה הנקראת כאשר נבחר פריט    \@Override\
  שנרשם למאזין המתאים. מטרת הדריסה היא   public void onItemSelected(AdapterView\<?>
  האזנה מתי נבחר פריט מתוך אחד           adapterView, View view, int i, long l)
  ה-]{dir="rtl"} Spinners [שבמסך ההגדרות 
  ופעילות בהתאם.]{dir="rtl"}             

  [פעולה הנקראת כאשר נבחר צבע מתוך אחד   private void colorSelected(AdapterView\<?>
  מה-]{dir="rtl"} Spinners [המגדירים את  adapterView, Piece currentColor, Piece
  צבעי השחקנים ופועלת בהתאם.]{dir="rtl"} otherColor, Piece selectedColor,
                                         SettingsManager.Keys currentKey)

  [פעולה הנקראת כאשר נבחר גודל מאחד      private void sizeSelected(SettingsManager.Keys
  ה-]{dir="rtl"} Spinners [המגדירים את   key, int i)
  גודל הלוח ומספר הדסקיות ההתחלתיות של   
  השחקנים ופועלת בהתאם.]{dir="rtl"}      

  [פעולה הנקראת כאשר נבחרה רמת קושי מתוך private void
  אחד מה-]{dir="rtl"} Spinners [המגדירים difficultySelected(GameController.Difficulty
  את רמות הקושי ופועלת                   difficulty)
  בהתאם.]{dir="rtl"}                     

  [פעולה המשביתה או מאפשרת את אפשרות     private void setEnabledHumanStarts(boolean
  עדכון הגדרת אם המחשב או בן האדם        isEnabled)
  מתחילים לשחק. הסיבה לכך היא שהגדרה זו  
  תלויה בהגדרת רמת הקושי- אם רמת הקושי   
  (ברירת המחדל) לא נגד המחשב, לא ניתן    
  לשנות את הגדרה זו.]{dir="rtl"}         

  [דריסת הפעולה הנקראת כאשר שום איבר לא  \@Override\
  נבחר (מצב זה לדוגמא יכול להיווצר כאשר  public void onNothingSelected(AdapterView\<?>
  איבר שנבחר נמחק מהרשימה או שהרשימה     adapterView)
  ריקה). הדריסה נעשתה מפני שהיא חובה     
  למימוש לאור מימוש הממשק]{dir="rtl"}    
  OnItemSelectedListener[.]{dir="rtl"}   

  [פעולה הנקראת כאשר המשתמש לחץ על כפתור public void restoreDefaultsClicked(View view)
  איפוס כל ההגדרות ופועלת                
  בהתאם.]{dir="rtl"}                     

  [פעולה המציגה למשתמש דיאלוג המאפשר לו  private void dialogResetSettings()
  לבחור האם ברצונו לאתחל את כלל ההגדרות  
  להגדרות ברירת המחדל (באופן             
  סופי).]{dir="rtl"}                     

  [פעולה המחזירה את הגדרות המשתמש        private void restoreDefaultSettings()
  להגדרות ברירת המחדל ומעדכנת את המסך    
  בהתאם.]{dir="rtl"}                     

  [פעולה הנקראת כאשר המשתמש לחץ על אחד   public void resetSetting(View view)
  מכפתורי האיפוס של הגדרה בודדת ומאפסת   
  אותה בהתאם.]{dir="rtl"}                

  [פעולה אשר נקראת כאשר המשתמש לחץ על    public void toggleExpandedSettings(View view)
  הכפתור להציג את ההגדרות באופן נרחב     
  יותר או מצומצם יותר על המסך ופועלת     
  בהתאם.]{dir="rtl"}                     

  [דריסת הפעולה המזומנת כאשר שונה כפתור  \@Override\
  ה-]{dir="rtl"}Radio [הדלוק             public void onCheckedChanged(RadioGroup
  בתוך]{dir="rtl"} RadioGroup[. מטרת     radioGroup, int i)
  הדריסה היא זיהוי מתי המשתמש משנה את    
  הגודל שברצונו להגדיר ידנית ואת הגודל   
  שברצונו להגדיר בהתאם לגודל המוגדר      
  ידנית.]{dir="rtl"}                     

  [פעולה הנקראת כדי לשנות את הגודל אשר   private void toggleEnabledSizeInp()
  מוגדר ידנית ואת הגודל אשר מותאם בהתאם  
  אליו כך שהם יתחלפו.]{dir="rtl"}        

  [פעולה אשר מציגה את הדיאלוג אשר מאפשר  public void displayTimerPicker(View view)
  למשתמש לבחור את אורך הזמן המוקצב       
  למשחק.]{dir="rtl"}                     

  [פעולה אשר מעדכנת את אורך הזמן המוקצב  private boolean updateTimerPicker()
  למשחק בהגדרות בהתאם לבחירת המשתמש (אם  
  תקף). אם הזמן שבחר המשתמש תקף, מעדכנת  
  אותו ומחזירה \"אמת\", אחרת מחזירה      
  \"שקר\".]{dir="rtl"}                   

  [פעולה אשר מקבלת כפרמטרים את תיבת      private void checkSizeValidity(EditText field,
  הטקסט של הגדרת הגודל המוגדרת ידנית ואת Spinner otherSpn)
  ה-]{dir="rtl"} Spinner [המציג את       
  האפשרויות המתאימות בהתאם אליה, בודקת   
  את תקינות הטקסט בשדה הטקסט ומציגה      
  חיווי בהתאם לתקינות הקלט.]{dir="rtl"}  

  [פעולה המקבלת כפרמטר את הקלט של שדה    private boolean checkStartSizeValidity(String
  הטקסט של הגדרת מספר הדסקיות ההתחלתיות  input)
  של כל משתמש, בודקת את תקינותו, מעדכנת  
  את ההגדרה ומחזירה \"אמת\" אם תקין, או  
  לא מעדכנת ומחזירה \"שקר\"              
  אחרת.]{dir="rtl"}                      

  [פעולה המקבלת כפרמטר את הקלט של שדה    private boolean checkBoardSizeValidity(String
  הטקסט של גודל הלוח, בודקת את תקינותו,  input)
  מעדכנת את ההגדרה ומחזירה \"אמת\" אם    
  תקין, או לא מעדכנת ומחזירה \"שקר\"     
  אחרת.]{dir="rtl"}                      

  [פעולה המקבלת כפרמטר סאונד             private void playSound(MusicControl.Sound
  (]{dir="rtl"}Enum[- תיעוד בהמשך)       sound)
  להפעיל ומפעילה אותו אם סאונד מאופשר    
  בהגדרות.]{dir="rtl"}                   

  [דריסת הפעולה המזומנת כאשר זוהתה לחיצה \@Override\
  ארוכה על]{dir="rtl"} View [שהאזין לכך. public boolean onLongClick(View view)
  מטרת הדריסה היא הקפצת חלונית המציגה    
  תיאור אודות הגדרה אשר שמה              
  מסורבל.]{dir="rtl"}                    

  [פעולה אשר מבטלת את הצגת המקלדת עבור   private void hideKeyboard()
  המשתמש (עבור מניעת באגים שכרוכים       
  במקלדת חלק מהמכשירים ושיפור חוויות     
  המשתמש). היא ניגשת לשירות שאחראי על כך 
  ודרכו מסתירה את המקלדת.]{dir="rtl"}    

  [דריסת פעולה הנקראת כאשר המסך          \@Override\
  \"נהרס\". מטרת הדריסה היא שמירת מצב    protected void onDestroy()
  הרחבת מסך ההגדרות כדי שבכניסה הבאה     
  למסך זה המצב יהיה זהה.]{dir="rtl"}     

  [פעולה סטטית אשר מקבלת כפרמטר משתנה    public static int
  בוליאני המייצג אם המצב הוא             getVisibilityConstant(boolean isVisible)
  מצב]{dir="rtl"} VISIBLE [או            
  מצב]{dir="rtl"} GONE[, ובהתאם מחזירה   
  את הערך הקבוע המייצג מצבים אלו כאשר    
  \"אמת\" מייצג]{dir="rtl"} VISIBLE      
  [ושקר מייצג]{dir="rtl"} GONE[. מטרת    
  הפעולה היא נוחות ושיפור קריאות         
  הקוד.]{dir="rtl"}                      
  -------------------------------------- ----------------------------------------------

[\
]{dir="rtl"}

[]{#_Toc76826921 .anchor}ContactActivity

[המחלקה מקושרת למסך \"צור קשר\". דרך מסך זה ניתן ליצור קשר עם המפתח
באמצעות מייל או טלפון.]{dir="rtl"}

**[תכונות המחלקה]{dir="rtl"}**

[למחלקה זו אין תכונות.]{dir="rtl"}

**[פעולות המחלקה]{dir="rtl"}**

  ----------------------------------- -----------------------------------
  **[דריסת פעולה הנקראת כאשר נוצר     \@Override\
  המסך.]{dir="rtl"}**                 protected void onCreate(Bundle
                                      savedInstanceState)

  [פעולה הנקראת כאשר המשתמש בוחר      public void mailUs(View view)
  ליצור קשר באמצעות מייל. היא מאפשרת  
  לו לשלוח מייל באמצעות]{dir="rtl"}   
  Implicit Intent [עם הודעה, נושא     
  ויעד מוכנים מראש (ניתן לערוך אותם   
  לפני השליחה).]{dir="rtl"}           

  [פעולה הנקראת כאשר המשתמש בוחר      public void callUs(View view)
  ליצור קשר באמצעות טלפון. היא מאפשרת 
  לו לבצע שיחה באמצעות]{dir="rtl"}    
  Implicit Intent [(כך שעליו לאשר     
  אותה לפני שהיא נעשית. זאת על מנת לא 
  לבקש הרשאות לטלפון מהמשתמש ללא צורך 
  ממשי) למספר מוגדר מראש.]{dir="rtl"} 

  [פעולה הנקראת כאשר המשתמש בחר לחזור public void goBack(View view)
  אחורה באמצעות הכפתור המתאים במסך.   
  היא מסיימת את פעולות המסך הנוכחי    
  באמצעות]{dir="rtl"}                 
  finish[.]{dir="rtl"}                
  ----------------------------------- -----------------------------------

[\
]{dir="rtl"}[]{#_Toc76826922 .anchor}Piece

[מחלקת **ה- **]{dir="rtl"}**Enum** [אשר מייצגת דסקית של שחקן. ערכי
הדסקית יכולים להיות או צבעי דסקית או דסקית \"ריקה\", המייצגת משבצת על
הלוח אשר טרם הונחה עליה דסקית, קרי היא אינה בבעלותו של אף
שחקן.]{dir="rtl"}

**[ערכי מחלקת ה-]{dir="rtl"} Enum**

  ----------------------------------- -----------------------------------
  [דסקית בצבע צהוב.]{dir="rtl"}       *YELLOW*

  [דסקית בצבע לבן.]{dir="rtl"}        *WHITE*

  [דסקית בצבע ירוק.]{dir="rtl"}       *GREEN*

  [דסקית בצבע אדום.]{dir="rtl"}       *RED*

  [דסקית בצבע כחול.]{dir="rtl"}       *BLUE*

  [דסקית בצבע אפור.]{dir="rtl"}       *GRAY*

  [דסקית בצבע שחור.]{dir="rtl"}       *BLACK*

  [דסקית בצבע טורקיז.]{dir="rtl"}     *CYAN*

  [דסקית בצבע ארגמן (מעין גוון        *MAGENTA*
  סגול).]{dir="rtl"}                  

  [דסקית \"ריקה\" -- לא בבעלותו של אף *EMPTY*
  שחקן.]{dir="rtl"}                   
  ----------------------------------- -----------------------------------

**[תכונות המחלקה]{dir="rtl"}**

+-----------------------------------+-----------------------------------+
| [רשימה סטטית קבועה המייצגת את כל  | private static final List\<Piece> |
| ערכי ה-]{dir="rtl"} Enum          | *validValues*                     |
| [התקניים,]{dir="rtl"}             |                                   |
|                                   |                                   |
| [כלומר, דסקיות אשר בבעלות אחד     |                                   |
| השחקנים.]{dir="rtl"}              |                                   |
|                                   |                                   |
| [הסיבה לתכונה סטטית זו היא הרצון  |                                   |
| לקבל רשימה של ערכים תקניים        |                                   |
| ביעילות ריצה מרבית (אתחול הפעולה  |                                   |
| היא בבלוק סטטי אשר ירוץ פעם אחת   |                                   |
| עבור כל המחלקה). משום             |                                   |
| שהפעולה]{dir="rtl"} values()      |                                   |
| [המובנית ב-]{dir="rtl"} Enum      |                                   |
| [יעילותה]{dir="rtl"} O(n)[,       |                                   |
| ובניית רשימה של ערכים תקניים      |                                   |
| תצטרך לעבור עליה, חשבתי כי עדיף   |                                   |
| להמיר זאת לתכונה סטטית ולמנוע     |                                   |
| ריצות מיותרות.]{dir="rtl"}        |                                   |
+-----------------------------------+-----------------------------------+
| [משתנה קבוע המייצג את מזהה צבע    | private final int color           |
| הדסקית (זאת התכונה המאפשרת תצוגה  |                                   |
| ויזואלית של הדסקית בצבע המתאים    |                                   |
| ולא תיאור מופשט של                |                                   |
| הצבע).]{dir="rtl"}                |                                   |
+-----------------------------------+-----------------------------------+

**[פעולות המחלקה]{dir="rtl"}**

  ----------------------------------- -----------------------------------
  **[הפעולה הבונה של המחלקה. מקבלת    Piece (int color)
  כפרמטר את מזהה צבע הדסקית של דסקית  
  השחקן ומאתחלת בהתאם.]{dir="rtl"}**  

  [פעולה המחזירה את מזהה צבע          public int getColor()
  השחקן.]{dir="rtl"}                  

  [פעולה המחזירה \"אמת\" אם צבע       public boolean isValid()
  הדסקית תקין (בבעלות שחקן) או        
  \"שקר\" אחרת.]{dir="rtl"}           

  [דריסת פעולת ה-]{dir="rtl"}         \@Override\
  toString [של העצם. מחזירה מחרוזת    public String toString()
  המייצגת באופן קריא את צבע           
  השחקן.]{dir="rtl"}                  

  [פעולה סטטית המחזירה את הרשימה      public static List\<Piece>
  המייצגת את כלל הדסקיות התקניות      getValidValues()
  האפשריות. יש לשים לב כי הפעולה אינה 
  מחזירה העתק, אלא את הרשימה המקורית  
  (מטעמי יעילות- אין צורך) ולכן אין   
  לבצע בה שינויים.]{dir="rtl"}        
  ----------------------------------- -----------------------------------

[\
]{dir="rtl"}

[]{#_Toc76826923 .anchor}GameDetails

[המחלקה היא מחלקה **מופשטת** אשר משמשת כבסיס לשמירת נתונים אודות משחקים.
להלן עץ תורשה הממחיש את המחלקות לשמירת הנתונים:]{dir="rtl"}

![C:\\Users\\User\\Downloads\\class-diagram
(1).png](media/image30.png){width="5.768055555555556in"
height="3.01632217847769in"}

**[תכונות המחלקה]{dir="rtl"}**

+-----------------------------------+-----------------------------------+
| [מספר התורות ששוחקו מאז תחילת     | protected final int turnsPlayed   |
| המשחק.]{dir="rtl"}                |                                   |
+-----------------------------------+-----------------------------------+
| [הדסקיות של השחקן                 | protected final Piece firstPlayer |
| הראשון.]{dir="rtl"}               |                                   |
+-----------------------------------+-----------------------------------+
| [הדסקיות של השחקן                 | protected final Piece             |
| השני.]{dir="rtl"}                 | secondPlayer                      |
+-----------------------------------+-----------------------------------+
| [הדסקית של מנצח המשחק (אם אין     | protected final Piece gameWinner  |
| מנצח, כלומר המשחק הסתיים בתיקו או |                                   |
| טרם הסתיים, ערך התכונה הוא דסקית  |                                   |
| \"ריקה\").]{dir="rtl"}            |                                   |
+-----------------------------------+-----------------------------------+
| [מספר הדסקיות הנוכחי של השחקן     | protected final int firstPieces   |
| הראשון.]{dir="rtl"}               |                                   |
+-----------------------------------+-----------------------------------+
| [מספר הדסקיות הנוכחי של השחקן     | protected final int secondPieces  |
| השני.]{dir="rtl"}                 |                                   |
+-----------------------------------+-----------------------------------+
| [האורך הממוצע (הנוכחי) של השחקן   | protected final long turnAvgFirst |
| הראשון לשחק את תורו באלפי         |                                   |
| שניות.]{dir="rtl"}                |                                   |
|                                   |                                   |
| [אם השחקן טרם שיחק את תורו        |                                   |
| הראשון, ערך התכונה יהיה בהתאם     |                                   |
| לברירת המחדל המוגדר במודל         |                                   |
| המשחק.]{dir="rtl"}                |                                   |
+-----------------------------------+-----------------------------------+
| [האורך הממוצע (הנוכחי) של השחקן   | protected final long              |
| השני לשחק את תורו באלפי           | turnAvgSecond                     |
| שניות.]{dir="rtl"}                |                                   |
|                                   |                                   |
| [אם השחקן טרם שיחק את תורו        |                                   |
| הראשון, ערך התכונה יהיה בהתאם     |                                   |
| לברירת המחדל המוגדר במודל         |                                   |
| המשחק.]{dir="rtl"}                |                                   |
+-----------------------------------+-----------------------------------+
| Enum [אשר מייצג את רמת הקושי של   | protected final                   |
| המשחק.]{dir="rtl"}                | GameController.Difficulty         |
|                                   | difficulty                        |
+-----------------------------------+-----------------------------------+

**[פעולות המחלקה]{dir="rtl"}**

  ----------------------------------- -----------------------------------
  **[הפעולה הבונה של המחלקה. מקבלת    public GameDetails(int turnsPlayed,
  כפרמטרים את תכונות המחלקה ומגדירה   Piece firstPlayer, Piece
  אותן בהתאם.]{dir="rtl"}**           secondPlayer, Piece gameWinner, int
                                      firstPieces, int secondPieces, long
                                      turnAvgFirst, long turnAvgSecond,
                                      GameController.Difficulty
                                      difficulty)

  [פעולה המחזירה את מספר התורות       public int getTurnsPlayed()
  ששוחקו מאז תחילת המשחק.]{dir="rtl"} 

  [פעולה המחזירה את דסקית השחקן       public Piece getFirstPlayer()
  הראשון.]{dir="rtl"}                 

  [פעולה המחזירה את דסקית השחקן       public Piece getSecondPlayer()
  השני.]{dir="rtl"}                   

  [פעולה המחזירה את דסקית השחקן       public Piece getGameWinner()
  המנצח.]{dir="rtl"}                  

  [פעולה המחזירה את מספר הדסקיות      public int getFirstPieces()
  הנוכחי של השחקן הראשון.]{dir="rtl"} 

  [פעולה המחזירה את מספר הדסקיות      public int getSecondPieces()
  הנוכחי של השחקן השני.]{dir="rtl"}   

  [פעולה המחזירה את הזמן הממוצע       public long getTurnAvgFirst()
  (הנוכחי) של השחקן הראשון לבצע את    
  תורו.]{dir="rtl"}                   

  [פעולה המחזירה את הזמן הממוצע       public long getTurnAvgSecond()
  (הנוכחי) של השחקן השני לבצע את      
  תורו.]{dir="rtl"}                   

  [פעולה המחזירה את רמת הקושי של      public GameController.Difficulty
  המשחק.]{dir="rtl"}                  getDifficulty()
  ----------------------------------- -----------------------------------

[\
]{dir="rtl"}

[]{#_Toc76826924 .anchor}StaticGameAttributes

[המחלקה מייצגת תכונות של משחק \"סטטי\" כלומר משחק עצור, שאינו מתנהל ברגע
נתון. מטרת מחלקה זו היא מניעת שכפול קוד ולאגד את התכונות המשותפות למשחק
שנשמר (]{dir="rtl"}OnGoingGameDetails[) ומשחק שהסתיים
(]{dir="rtl"}FinishedGameDetails[), אך אינן רלוונטיות למשחק \"חי\"
(]{dir="rtl"}LiveGameDetails[). להמחשה ראו את מודל המחלקות
לעיל.]{dir="rtl"}

**[תכונות המחלקה]{dir="rtl"}**

  ----------------------------------- -----------------------------------
  [זמן המשחק שעבר מאז תחילת המשחק     public final int timePassed
  (בשניות).]{dir="rtl"}               

  [המזהה הייחודי של המשחק             public long id
  (]{dir="rtl"}-1 [אם המשחק עדיין לא  
  נגמר ולא קיבל מזהה ממסד             
  הנתונים).]{dir="rtl"}               
  ----------------------------------- -----------------------------------

**[פעולות המחלקה]{dir="rtl"}**

  ----------------------------------- -----------------------------------
  **[הפעולה הבונה (הראשית) של המחלקה. public StaticGameAttributes(int
  היא מקבלת כפרמטרים את זמן המשחק     timePassed, long id)
  שעבר מאז תחילתו ואת המזהה הייחודי   
  של המשחק, ומגדירה את התכונות        
  בהתאם.]{dir="rtl"}**                

  **[הפעולה הבונה (המשנית) של המחלקה. public StaticGameAttributes(int
  מטרתה הגדרת משחק שעדיין לא קיבל     timePassed)
  מזהה. היא מקבלת כפרמטר את זמן המשחק 
  שעבר מאז תחילתו ומאתחלת את מזהה     
  המשחק ל-]{dir="rtl"}                
  -1[.]{dir="rtl"}**                  
  ----------------------------------- -----------------------------------

[\
]{dir="rtl"}

[]{#_Toc76826925 .anchor}FinishedGameDetails

[המחלקה מייצגת מידע אודות משחק שהסתיים. מחלקה זו מרחיבה את המחלקה
המופשטת לשמירת נתונים בסיסיים אודות משחק. השימושים העיקריים של מחלקה זו
הם שמירת נתונים אודות משחקים אלו במסד הנתונים והצגתם למשתמש.]{dir="rtl"}

**[תכונות המחלקה]{dir="rtl"}**

[המחלקה מרחיבה את המחלקה המופשטת]{dir="rtl"} GameDetails[, לכן היא יורשת
את כל תכונותיה ופעולותיה (ראו]{dir="rtl"} GameDetails[).]{dir="rtl"}

+-----------------------------------+-----------------------------------+
| [למחלקה תכונות של משחק \"סטטי\".  | private final                     |
| לכן היא מכילה עצם מסוג מחלקה זו   | StaticGameAttributes              |
| (בקשר של]{dir="rtl"}              | staticAttributes                  |
| Composition[). למידע אודות תכונות |                                   |
| אלו ראו]{dir="rtl"}               | []{dir="rtl"}                     |
| S                                 |                                   |
| taticGameAttributes[.]{dir="rtl"} |                                   |
+-----------------------------------+-----------------------------------+
| [הדסקית של השחקן שהפסיד במשחק (אם | private Piece gameLoser           |
| לא נגמר כתיקו).]{dir="rtl"}       |                                   |
+-----------------------------------+-----------------------------------+
| [התאריך המדויק בו הסתיים          | private final Date dateFinished   |
| המשחק.]{dir="rtl"}                |                                   |
+-----------------------------------+-----------------------------------+

**[פעולות המחלקה]{dir="rtl"}**

  ----------------------------------- -----------------------------------
  **[הפעולה הבונה הראשונה של המחלקה.  public FinishedGameDetails(int
  היא מקבלת כפרמטרים את כל התכונות    turnsPlayed, Piece firstPlayer,
  הרלוונטיות למחלקה למעט המפסיד במשחק Piece secondPlayer, Piece
  (שאותו היא מגדירה בעצמה) ומזהה      gameWinner, int firstPieces, int
  המשחק. פעולה בונה זו משמשת להגדיר   secondPieces, long turnAvgFirst,
  משחקים שטרם קיבלו מזהה ייחודי ממסד  long turnAvgSecond,
  הנתונים.]{dir="rtl"}**              GameController.Difficulty
                                      difficulty, int timePlayed)

  **[הפעולה הבונה השנייה של המחלקה.   public FinishedGameDetails(int
  היא מקבלת כפרמטרים את כל התכונות    turnsPlayed, Piece firstPlayer,
  הרלוונטיות למחלקה למעט המפסיד במשחק Piece secondPlayer, Piece
  (שאותו היא מגדירה בעצמה) ולרבות     gameWinner, int firstPieces, int
  המזהה הייחודי של המשחק. פעולה בונה  secondPieces, long turnAvgFirst,
  זו משמשת להגדיר משחקים שקיבלו מזהה  long turnAvgSecond,
  ייחודי ממסד הנתונים.]{dir="rtl"}**  GameController.Difficulty
                                      difficulty, int timePlayed, long
                                      id, Date dateFinished)

  **[הפעולה הבונה השלישית של המחלקה.  public
  זוהי פעולה בונה מעתיקה-]{dir="rtl"} FinishedGameDetails(GameDetails
  Copy Constructor[- למחלקה           gameDetails, int timePlayed)
  המופשטת]{dir="rtl"} GameDetails[,   
  אשר מקבלת בנוסף את זמן המשחק שעבר   
  מתחילתו ומעתיקה את התכונות          
  הרלוונטיות בעזרת הפעולה הבונה       
  הראשונה.]{dir="rtl"}**              

  [זוהי פעולת עזר לפעולות הבונות. היא private void init()
  מגדירה את האתחולים הרלוונטיים       
  המשותפים לפעולות הבונות             
  השונות.]{dir="rtl"}                 

  [הפעולה מחזירה את המזהה הייחודי של  public long getId()
  המשחק אשר ניתן ע\"י מסד הנתונים     
  (או]{dir="rtl"} -1 [אם טרם          
  ניתן).]{dir="rtl"}                  

  [הפעולה מקבלת כפרמטר את המזהה       public void setId(long id)
  הייחודי של המשחק ומגדירה את התכונה  
  בהתאם.]{dir="rtl"}                  

  [הפעולה מחזירה בייצוג של דקות       public String
  ושניות את הזמן שעבר מתחילת המשחק    getTimePlayedFormatted()
  (כמחרוזת).]{dir="rtl"}              

  [דריסת פעולה ה-]{dir="rtl"}         \@Override\
  toString [של העצם. מחזירה מחרוזת    public String toString()
  (מצומצמת בפרטים) המתארת את נתוני    
  המשחק המהותיים.]{dir="rtl"}         

  [הפעולה מחזירה את הזמן ששוחק מאז    public int getTimePlayedRaw()
  תחילת המשחק בשניות.]{dir="rtl"}     

  [הפעולה מחזירה עצם המייצג את התאריך public Date getDate()
  שבו נגמר המשחק.]{dir="rtl"}         

  [הפעולה מקבלת כפרמטר דסקית של שחקן  private int getPieces(Piece player)
  ומחזירה את מספר הדסקיות של אותו     
  שחקן.]{dir="rtl"}                   
  ----------------------------------- -----------------------------------

[\
]{dir="rtl"}

[]{#_Toc76826926 .anchor}LiveGameDetails

[המחלקה מייצגת מידע אודות משחק \"חי\"- משחק אשר מתנהל ברגע נתון (לא
עצור). מחלקה זו מרחיבה את המחלקה המופשטת לשמירת נתונים בסיסיים אודות
משחק. השימושים העיקריים של מחלקה זו הם טעינת משחקים ללוגיקה של המשחק
ומעקב אחרי משחק שמתנהל. הנתונים השמורים במחלקה זו הם רק נתונים
שרלוונטיים ללוגיקה (ל-]{dir="rtl"}Controller [ולמודל), ולא רלוונטיים
באופן ייחודי לתצוגה.]{dir="rtl"}

**[תכונות המחלקה]{dir="rtl"}**

[המחלקה מרחיבה את המחלקה המופשטת]{dir="rtl"} GameDetails[, לכן היא יורשת
את כל תכונותיה ופעולותיה (ראו]{dir="rtl"} GameDetails[).]{dir="rtl"}

  ----------------------------------- -----------------------------------
  [מספר התורות ששיחק השחקן            protected final int
  הראשון.]{dir="rtl"}                 firstTurnsPlayed

  [תכונה בוליאנית המייצגת אם המשחק    protected final boolean isGameOver
  הסתיים.]{dir="rtl"}                 

  [המטריצה של הדסקיות המייצגת את לוח  protected Piece\[\]\[\] board
  המשחק.]{dir="rtl"}                  

  [משבצות \"ריקות\" לבדיקה עבור       protected Collection\<String>
  דסקיות ה\"רמז\" (לצרכי יעילות)-     emptyToCheck
  הסבר מפורט בהמשך תחת תיעוד מחלקות   
  הלוגיקה.]{dir="rtl"}                

  [הדסקית של השחקן הנוכחי (שתורו      protected final Piece currentPlayer
  כעת).]{dir="rtl"}                   

  [אורך צלע מטריצת לוח                protected final int boardSize
  המשחק.]{dir="rtl"}                  

  [מספר הדסקיות ההתחלתי של כל         protected final int startSize
  שחקן.]{dir="rtl"}                   

  [תכנה בוליאנית המייצגת האם התור     protected final boolean isHumanTurn
  הנוכחי הוא של בן אדם.]{dir="rtl"}   
  ----------------------------------- -----------------------------------

**[פעולות המחלקה]{dir="rtl"}**

+-----------------------------------+-----------------------------------+
| **[הפעולה הבונה הראשית של המחלקה. | public LiveGameDetails(int        |
| היא מקבלת כפרמטרים את כל התכונות  | turnsPlayed, Piece firstPlayer,   |
| הרלוונטיות למחלקה ומגדירה אותן    | Piece secondPlayer, Piece         |
| בהתאם.]{dir="rtl"}**              | gameWinner, int firstPieces, int  |
|                                   | secondPieces, long turnAvgFirst,  |
|                                   | long turnAvgSecond,               |
|                                   | GameController.Difficulty         |
|                                   | difficulty, int firstTurnsPlayed, |
|                                   | boolean isGameOver, Piece\[\]\[\] |
|                                   | board, Collection\<String>        |
|                                   | emptyToCheck, Piece               |
|                                   | currentPlayer, int boardSize, int |
|                                   | startSize, boolean isHumanTurn)   |
+-----------------------------------+-----------------------------------+
| **[הפעולה הבונה המשנית של המחלקה. | public LiveGameDetails(Piece      |
| היא מקבלת כפרמטרים תכונות         | firstPlayer, Piece secondPlayer,  |
| החיוניות להגדרת משחק חדש, ומגדירה | int boardSize, int startSize,     |
| משחק חדש עם התכונות שהועברו       | Piece startPlayer,                |
| כפרמטרים.]{dir="rtl"}**           | GameController.Difficulty         |
|                                   | difficulty, boolean               |
|                                   | isHumanStarts)                    |
+-----------------------------------+-----------------------------------+
| **[הפעולה הבונה המעתיקה של המחלקה | public                            |
| (]{dir="rtl"}Copy Constructor[).  | LiveGameDetails(LiveGameDetails   |
| היא מקבלת כפרמטר עצם מטיפוס       | liveGameDetails)                  |
| המחלקה ומעתיקה את                 |                                   |
| תכונותיו.]{dir="rtl"}**           |                                   |
|                                   |                                   |
| **[יש לשים לב כי ההעתקה היא העתקה |                                   |
| רדודה-]{dir="rtl"} Shallow        |                                   |
| Copy[.]{dir="rtl"}**              |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המחזירה את מספר התורות     | public int getFirstTurnsPlayed()  |
| ששיחק השחקן הראשון.]{dir="rtl"}   |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המחזירה את מספר התורות     | public int getSecondTurnsPlayer() |
| ששיחק השחקן השני.]{dir="rtl"}     |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המחזירה \"אמת\" אם המשחק   | public boolean isGameOver()       |
| הסתיים או \"שקר\"                 |                                   |
| אחרת.]{dir="rtl"}                 |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המחזירה מצביע ללוח         | public Piece\[\]\[\] getBoard()   |
| המשחק.]{dir="rtl"}                |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המחזירה מצביע              | public Collection\<String>        |
| ל-]{dir="rtl"}Collection [המכיל   | getEmptyToCheck()                 |
| את המשבצות הריקות לבדיקה (הסבר    |                                   |
| מפורט בהמשך תחת תיעוד מחלקות      |                                   |
| הלוגיקה).]{dir="rtl"}             |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המחזירה את השחקן הנוכחי    | public Piece getCurrentPlayer()   |
| (שתורו כעת).]{dir="rtl"}          |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המחזירה את השחקן הבא       | public Piece getNextPlayer()      |
| (שתורו התור הבא).]{dir="rtl"}     |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המחזירה את אורך צלע מטריצת | public int getBoardSize()         |
| לוח המשחק.]{dir="rtl"}            |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המחזירה את כמות הדסקיות    | public int getStartSize()         |
| ההתחלתית של כל שחקן.]{dir="rtl"}  |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המחזירה \"אמת\" אם התור    | public boolean isHumanTurn()      |
| הנוכחי הוא תורו של בן אדם או      |                                   |
| \"שקר\" אחרת.]{dir="rtl"}         |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המקבלת כפרמטר מצביע        | public void                       |
| למטריצת לוח משחק וקובעת אותו כלוח | setBoard(Piece\[\]\[\] board)     |
| המשחק של העצם.]{dir="rtl"}        |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת כפרמטר מצביע     | public void                       |
| לאוסף של מחרוזות אשר מייצגות      | se                                |
| משבצות ריקות לבדיקה וקובעת אותו   | tEmptyToCheck(Collection\<String> |
| כאוסף המשבצות הריקות לבדיקה       | emptyToCheck)                     |
| הנוכחי של העצם (הסבר מפורט בהמשך  |                                   |
| תחת תיעוד מחלקות                  |                                   |
| הלוגיקה).]{dir="rtl"}             |                                   |
+-----------------------------------+-----------------------------------+

[\
]{dir="rtl"}

[]{#_Toc76826927 .anchor}OnGoingGameDetails

[המחלקה מייצגת מידע אודות משחק שנשמר, כולל מידע שרלוונטי גם לתצוגה. לכן,
היא מרחיבה את (יורשת מ) המחלקה המייצגת משחק \"חי\". עצם זה הוא העצם
שישמר ב-]{dir="rtl"} Shared Preferences [(דרך המחלקה]{dir="rtl"}
SettingsManager [שיודעת לטפל בו ולשמור את תכונותיו כך שתוכל ליצור העתק
מדויק שלו במידת הצורך לטעינה) לצורך טעינת המשחק השמור האחרון, ולחליפין
זהו העצם שתקבל המחלקה כאשר תרצה לטעון משחק שמור.]{dir="rtl"}

**[תכונות המחלקה]{dir="rtl"}**

[המחלקה מרחיבה את המחלקה]{dir="rtl"} LiveGameDetails[, לכן היא יורשת את
כל תכונותיה ופעולותיה (ראו]{dir="rtl"} LiveGameDetails[).]{dir="rtl"}

+-----------------------------------+-----------------------------------+
| [למחלקה תכונות של משחק \"סטטי\".  | private final                     |
| לכן היא מכילה עצם מסוג מחלקה זו   | StaticGameAttributes              |
| (בקשר של]{dir="rtl"}              | staticAttributes                  |
| Composition[). למידע אודות תכונות |                                   |
| אלו ראו]{dir="rtl"}               | []{dir="rtl"}                     |
| S                                 |                                   |
| taticGameAttributes[.]{dir="rtl"} |                                   |
+===================================+===================================+
+-----------------------------------+-----------------------------------+

**[פעולות המחלקה]{dir="rtl"}**

  ----------------------------------- ------------------------------------
  **[הפעולה הבונה הראשית של המחלקה.   public OngoingGameDetails(int
  היא מקבלת כפרמטרים את כל התכונות    turnsPlayed, Piece firstPlayer,
  הרלוונטיות למחלקה ומאתחלת אותן      Piece secondPlayer, Piece
  בהתאם.]{dir="rtl"}**                gameWinner, int firstPieces, int
                                      secondPieces, long turnAvgFirst,
                                      long turnAvgSecond,
                                      GameController.Difficulty
                                      difficulty, int firstTurnsPlayed,
                                      boolean isGameOver, Piece\[\]\[\]
                                      board, Collection\<String>
                                      emptyToCheck, Piece currentPlayer,
                                      int boardSize, int startSize,
                                      boolean isHumanTurn, int timePlayed,
                                      long id)

  **[זוהי פעולה בונה                  public
  מעתיקה-]{dir="rtl"} Copy            OngoingGameDetails(LiveGameDetails
  Constructor[- למחלקה]{dir="rtl"}    liveGameDetails, int timePlayed)
  LiveGameDetails[, אשר מקבלת בנוסף   
  את זמן המשחק שעבר מתחילתו, ומעתיקה  
  את התכונות הרלוונטיות בעזרת הפעולה  
  הבונה המעתיקה של מחלקת העל (ומאתחלת 
  את בהתאם את תכונות \"המשחק          
  הסטטי\").]{dir="rtl"}**             

  [פעולה אשר מחזירה את זמן המשחק שעבר public int getTimePlayed()
  מתחילתו (בשניות).]{dir="rtl"}       

  [פעולה אשר מחזירה את המזהה הייחודי  public long getId()
  של המשחק.]{dir="rtl"}               

  [פעולה אשר מקבלת כפרמטר מזהה ייחודי public void setId(long id)
  ומעדכנת את המזהה הייחודי של המשחק   
  בהתאם.]{dir="rtl"}                  
  ----------------------------------- ------------------------------------

[\
]{dir="rtl"}

[]{#_Toc76826928 .anchor}GameDetailsDataBase

[המחלקה היא מחלקת עזר כדי לתקשר עם מסד הנתונים (]{dir="rtl"}SQLite[),
אשר מרחיבה את המחלקה]{dir="rtl"} SQLiteOpenHelper[. מטרתה היא לאפשר
תקשורת (נוחה) בין האפליקציה לבין מסד הנתונים. בחרתי לממש את המחלקה
כמחלקת]{dir="rtl"} singleton[, כלומר, למחלקה יהיה עד מופע אחד ברחבי
האפליקציה, אשר ניתן יהיה לבקש את המצביע אליו. המחלקה עובדת עם עצמים
מסוג]{dir="rtl"} FinishedGameDetails[, משום שהיא שומרת מידע אודות משחקים
שהסתיימו במסד הנתונים.]{dir="rtl"}

**[תכונות המחלקה]{dir="rtl"}**

+-----------------------------------+-----------------------------------+
| [מופע ה-]{dir="rtl"} singleton    | private static                    |
| [של המחלקה. לאורך כל חיי          | GameDetailsDataBase               |
| האפליקציה לא ייווצרו מופעים אחרים | *gameDetailsDataBase*             |
| למחלקה.]{dir="rtl"}               |                                   |
+-----------------------------------+-----------------------------------+
| [תכונה סטטית קבועה המייצגת את שם  | private static final String       |
| מסד הנתונים.]{dir="rtl"}          | *DATABASE_NAME*                   |
+-----------------------------------+-----------------------------------+
| [תכונה סטטית קבועה המייצגת את שם  | private static final String       |
| הטבלה במסד הנתונים.]{dir="rtl"}   | *TABLE_RECORD*                    |
+-----------------------------------+-----------------------------------+
| [תכונה סטטית קבועה המייצגת את     | private static final int          |
| גרסת מסד הנתונים. השימוש למשתנה   | *DATABASE_VERSION*                |
| זה הוא לצרכי השוואת גרסאות עם מסד |                                   |
| הנתונים הקיים כדי לזהות שינויים   |                                   |
| ולפעול בהתאם                      |                                   |
| (]{d                              |                                   |
| ir="rtl"}onUpgrade[).]{dir="rtl"} |                                   |
+-----------------------------------+-----------------------------------+
| [תכונה קבועה למופע ה-]{dir="rtl"} | private final String COLUMN_TURNS |
| singleton [אשר מייצגת את שם       |                                   |
| העמודה למספר התורות שעברו עד      |                                   |
| שהמשחק נגמר.]{dir="rtl"}          |                                   |
+-----------------------------------+-----------------------------------+
| [תכונה קבועה למופע ה-]{dir="rtl"} | private final String              |
| singleton [אשר מייצגת את שם       | COLUMN_FIRST_PLAYER               |
| העמודה לדסקית של השחקן            |                                   |
| הראשון.]{dir="rtl"}               |                                   |
+-----------------------------------+-----------------------------------+
| [תכונה קבועה למופע ה-]{dir="rtl"} | private final String              |
| singleton [אשר מייצגת את שם       | COLUMN_SECOND_PLAYER              |
| העמודה לדסקית של השחקן            |                                   |
| השני.]{dir="rtl"}                 |                                   |
+-----------------------------------+-----------------------------------+
| [תכונה קבועה למופע ה-]{dir="rtl"} | private final String              |
| singleton [אשר מייצגת את שם       | COLUMN_WINNER                     |
| העמודה לדסקית של השחקן המנצח (או  |                                   |
| דסקית \"ריקה\" אם                 |                                   |
| תיקו).]{dir="rtl"}                |                                   |
+-----------------------------------+-----------------------------------+
| [תכונה קבועה למופע ה-]{dir="rtl"} | private final String              |
| singleton [אשר מייצגת את שם       | COLUMN_FIRST_PIECES               |
| העמודה למספר הדסקיות הסופי של     |                                   |
| השחקן הראשון.]{dir="rtl"}         |                                   |
+-----------------------------------+-----------------------------------+
| [תכונה קבועה למופע ה-]{dir="rtl"} | private final String              |
| singleton [אשר מייצגת את שם       | COLUMN_SECOND_PIECES              |
| העמודה למספר הדסקיות הסופי של     |                                   |
| השחקן השני.]{dir="rtl"}           |                                   |
+-----------------------------------+-----------------------------------+
| [תכונה קבועה למופע ה-]{dir="rtl"} | private final String              |
| singleton [אשר מייצגת את שם       | COLUMN_FIRST_AVG                  |
| העמודה לממוצע הסופי של כמות הזמן  |                                   |
| שלוקח לשחקן הראשון לשחק תור       |                                   |
| (באלפי שניות).]{dir="rtl"}        |                                   |
+-----------------------------------+-----------------------------------+
| [תכונה קבועה למופע ה-]{dir="rtl"} | private final String              |
| singleton [אשר מייצגת את שם       | COLUMN_SECOND_AVG                 |
| העמודה לממוצע הסופי של כמות הזמן  |                                   |
| שלוקח לשחקן השני לשחק תור (באלפי  |                                   |
| שניות).]{dir="rtl"}               |                                   |
+-----------------------------------+-----------------------------------+
| [תכונה קבועה למופע ה-]{dir="rtl"} | private final String              |
| singleton [אשר מייצגת את שם       | COLUMN_DIFFICULTY                 |
| העמודה לרמת הקושי של              |                                   |
| המשחק.]{dir="rtl"}                |                                   |
+-----------------------------------+-----------------------------------+
| [תכונה קבועה למופע ה-]{dir="rtl"} | private final String COLUMN_TIME  |
| singleton [אשר מייצגת את שם       |                                   |
| העמודה לזמן המשחק שעבר מתחילתו עד |                                   |
| סופו (בשניות).]{dir="rtl"}        |                                   |
+-----------------------------------+-----------------------------------+
| [תכונה קבועה למופע ה-]{dir="rtl"} | private final String COLUMN_DATE  |
| singleton [אשר מייצגת את שם       |                                   |
| העמודה לתאריך המדויק שבו הסתיים   |                                   |
| המשחק.]{dir="rtl"}                |                                   |
|                                   |                                   |
| [כדי לשמור עצם מסוג תאריך         |                                   |
| (]{dir="rtl"}Date[), אני שומר את  |                                   |
| הזמן באלפי שניות שעבר מאז התאריך  |                                   |
| 1/1/1970 בחצות. עצם זה תומך       |                                   |
| בשמירה מסוג זה, כך שיש לו פעולה   |                                   |
| בונה המקבלת את זמן זה ומאתחלת את  |                                   |
| העצם בהתאם.]{dir="rtl"}           |                                   |
+-----------------------------------+-----------------------------------+
| [תכונה קבועה למופע ה-]{dir="rtl"} | private final String COLUMN_ID    |
| singleton [אשר מייצגת את שם       |                                   |
| העמודה למזהה הייחודי של           |                                   |
| המשחק.]{dir="rtl"}                |                                   |
+-----------------------------------+-----------------------------------+
| [מסד הנתונים לצרכי תקשורת         | private SQLiteDatabase database   |
| עמו.]{dir="rtl"}                  |                                   |
+-----------------------------------+-----------------------------------+

**[פעולות המחלקה]{dir="rtl"}**

+-----------------------------------+-----------------------------------+
| **[פעולה בונה פרטית (על מנת לאפשר | private                           |
| מימוש]{dir="rtl"} singleton[)     | GameDetailsDataBase(Context       |
| למחלקה אשר מקבלת                  | context)                          |
| כפרמטר]{dir="rtl"} Context        |                                   |
| [ומזמנת את הפעולה הבונה של מחלקת  |                                   |
| העל עם מסד הנתונים הנוכחי וגרסתו. |                                   |
| ]{dir="rtl"}**                    |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה סטטית אשר מחזירה את מופע   | public static GameDetailsDataBase |
| ה-]{dir="rtl"} singleton [של      | getInstance                       |
| המחלקה. אם טרם נוצר, הפעולה תחילה |                                   |
| יוצרת אותו.]{dir="rtl"}           |                                   |
+-----------------------------------+-----------------------------------+
| [דריסת הפעולה הנקראת כאשר נוצר    | \@Override\                       |
| מסד הנתונים. היא יוצרת בו טבלה    | public void                       |
| מתאימה לצורף שמירת משחקים         | onCreate(SQLiteDatabase           |
| שהסתיימו.]{dir="rtl"}             | sqLiteDatabase)                   |
+-----------------------------------+-----------------------------------+
| [דריסת הפעולה הנקראת כאשר משודרג  | \@Override\                       |
| מסד הנתונים. השדרוג מתרחש כאשר    | public void                       |
| גרסת מסד הנתונים שקיבלה מחלקת העל | onUpgrade(SQLiteDatabase          |
| בפעולה הבונה אינה תואמת את גרסת   | sqLiteDatabase, int oldV, int     |
| מסד הנתונים הקיימת.]{dir="rtl"}   | newV)                             |
+-----------------------------------+-----------------------------------+
| [פעולה המקבלת כפרמטר עצם המכיל    | public void                       |
| פרטים אודות משחק שהסתיים ויוצרת   | createRecord(FinishedGameDetails  |
| עבורו רשומה בטבלה המתאימה במסד    | finishedGameDetails)              |
| הנתונים. פעולה זו בנוסף גם מעניקה |                                   |
| למשחק מזהה ייחודי. אופן מתן       |                                   |
| המזהים הייחודיים עובד באופן       |                                   |
| של]{dir="rtl"} Auto-Increment[,   |                                   |
| כלומר, המזהה יתחיל ב-1 וכל רשומה  |                                   |
| חדשה שתתווסף תקבל מזהה גדול ב1    |                                   |
| מהקודמת ע\"י ה-]{dir="rtl"}       |                                   |
| SQL[.]{dir="rtl"}                 |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת כפרמטר מזהה של   | public void deleteRecordById(long |
| רשומה ומוחקת את הרשומה ממסד       | id)                               |
| הנתונים.]{dir="rtl"}              |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מחזירה רשימה שבה כל    | public List\<FinishedGameDetails> |
| הרשומות הקיימות במסד הנתונים      | fetchAllRecords()                 |
| (מיוצגות ע\"י עצם של משחק         |                                   |
| שהסתיים-]{dir="rtl"}              |                                   |
| F                                 |                                   |
| inishedGameDetails[).]{dir="rtl"} |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת מזהה ייחודי של   | public FinishedGameDetails        |
| רשומה במסד הנתונים ומחזירה את     | fetchRecordById(long id)          |
| הרשומה הזאת (או]{dir="rtl"} null  |                                   |
| [אם אינה קיימת).]{dir="rtl"}      |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המקבלת כפרמטר מצביע        | private FinishedGameDetails       |
| (]{dir="rtl"}Cursor[) לרשומה במסד |                                   |
| הנתונים, ממירה רשומה זו לעצם      | makeRecord(Cursor cursor)         |
| המתאים                            |                                   |
| (                                 |                                   |
| ]{dir="rtl"}FinishedGameDetails[) |                                   |
| ומחזירה אותו.]{dir="rtl"}         |                                   |
+-----------------------------------+-----------------------------------+

[]{#_Toc76826929 .anchor}[דוגמא למסד נתונים]{dir="rtl"}

![](media/image31.png){width="5.768055555555556in"
height="4.200694444444444in"}

**[[\
]{.ul}]{dir="rtl"}**

[]{#_Toc76826930 .anchor}SettingsManager

[המחלקה היא מחלקת עזר כדי לתקשר עם הגדרות המשתמש (עם ה-]{dir="rtl"}
Shared Preferences[). מטרתה היא לאפשר תקשורת (נוחה) בין האפליקציה לבין
הגדרות המשתמש. בחרתי לממש את המחלקה כמחלקת]{dir="rtl"} singleton[,
כלומר, למחלקה יהיה עד מופע אחד ברחבי האפליקציה, אשר ניתן יהיה לבקש את
המצביע אליו. בנוסף בחרתי ששמירת מצב המשחק האחרון תתבצע אף היא
ב-]{dir="rtl"} Shared Preferences[, והיא תתבצע באמצעות המרה של עצם
המייצג מידע אודות משחק עצור (]{dir="rtl"}OnGoingGameDetails[)- פירוקו
לתכונות אשר ניתנות לשמירה ולבנייתו מחדש בעת הצורך (המחלקות אשר מתקשרות
עם מחלקה זו אינן יודעות כיצד מתבצעת השמירה -- היא מתבצעת בצורה של
\"קופסה שחורה\" כלומר הן מעבירות עצם]{dir="rtl"} OnGoingGameDetails
[ומצפות לקבל אחד כזה)- באופן דומה, הגדרות אשר דורשות המרה מומרות באופן
פנימי ע\"י המחלקה. יתר על כך, בחרתי שהתקשורת עם הגדרות המשתמש תהיה בצורה
כזאת שלמחלקה יהיה עצם מסוג מילון אשר מסונכרן עם ההגדרות (הן מטעמי יעילות
והן מטעמי נוחות). זאת ועוד, בחרתי כי העבודה עם הגדרות המשתמש תהיה בצורה
שלמפתחות המזהים יהיה]{dir="rtl"} Enum [מתאים, אשר לו גם תכונה שהיא ערך
ברירת המחדל שלו (כך להשקפתי העבודה עם ההגדרות יותר נכונה). נעשית העמסה
של פעולות עדכון ההגדרות ופעולות שליפת נתונים מותאמות סוג (ולא מותאמות
הגדרה). כך נחסכת עבודה מיותרת: בצורה זו כדי להוסיף הגדרה כל מה שצריך זה
להוסיף שורה אחת המגדירה את ה-]{dir="rtl"}Enum [של ההגדרה, במקום הצורך
להוסיף משתנה לשם ההגדרה, משתנה לערך ברירת המחדל של ההגדרה, משתנה לערך
הנוכחי של ההגדרה, פעולה לשליפת הערך, פעולה להשמת הערך ותיעוד של
הכל\....]{dir="rtl"}

[]{#_Toc76826931 .anchor}SettingsManager.Keys

[מחלקת **ה- **]{dir="rtl"}**Enum** [אשר מייצגת הגדרת משתמש כחלק
מהמחלקה]{dir="rtl"} SettingsManager[. את היתרונות שבשימוש במחלקה זו,
הרעיון שעומד מאחוריה ואיך היא מתחברת למחלקה]{dir="rtl"} SettingsManager
[הסברתי לעיל.]{dir="rtl"}

**[ערכי מחלקת ה-]{dir="rtl"} Enum**

  ----------------------------------- -----------------------------------
  [גרסת ההגדרות (השמורה): באופן דומה  *SETTINGS_VERSION*
  למחלקת מסד הנתונים, החלטתי לממש     
  מנגנון שדרוג. זאת מפני שעדכונים     
  מסוימים להגדרות שינו אותן כך שהיה   
  צורך באיפוסן (כמו שינוי שיטת איות   
  המפתחות השמורים או שינוי פורמט      
  שמירת נתונים מסוימים). המנגנון מזהה 
  כאשר גרסת ההגדרות הנוכחית שונה      
  מגרסת ההגדרות השמורה, ובמקרה כזה    
  מאפסת את ההגדרות (השארתי אופציה     
  לעתיד לשיפור המנגנון כך שגם יידע    
  להמיר את ההגדרות אך לטעמי בשלב זה,  
  הדבר מיותר).]{dir="rtl"}            

  [הגדרת המשתמש בנוגע לאפשור רטט      *VIBRATE*
  באפליקציה (\"אמת אם לאפשר, \"שקר\"  
  אחרת).]{dir="rtl"}                  

  [הגדרת המשתמש בנוגע לאפשור מוזיקת   *BACKGROUND_MUSIC*
  רקע באפליקציה (\"אמת אם לאפשר,      
  \"שקר\" אחרת).]{dir="rtl"}          

  [הגדרת המשתמש בנוגע לאפשור צלילים   *SOUND*
  באפליקציה (\"אמת אם לאפשר, \"שקר\"  
  אחרת).]{dir="rtl"}                  

  [הגדרת המשתמש בנוגע לאפשור הקפצת    *DIALOG_ENDGAME*
  דיאלוג של סוף משחק השואל את המשתמש  
  אם ברצונו להתחיל משחק חדש או לשתף   
  (או לסגור אותו): \"אמת אם לאפשר     
  הקפצת הדיאלוג, \"שקר\"              
  אחרת.]{dir="rtl"}                   

  [הגדרת המשתמש בנוגע לאפשור הצגת     *SHOW_HINTS*
  מספרי חיווי על דסקיות ה\"רמז\"      
  המייצגים את כמות הדסקיות החדשות     
  שיתווספו לשחקן אם תורו הבא יהיה     
  למשבצת הממוספרת (\"אמת אם לאפשר,    
  \"שקר\" אחרת).]{dir="rtl"}          

  [הגדרת המשתמש בנוגע לשחקן המתחיל את *FIRST_PLAYER_STARTS*
  המשחק: הראשון או השני]{dir="rtl"}   
  [(\"אמת\" אם הראשון, \"שקר\"        
  אחרת).]{dir="rtl"}                  

  [הגדרת המשתמש בנוגע לסדר ספירת זמן  *COUNT_TIME_UP*
  המשחק: ספירת עולה או יורדת (\"אמת\" 
  אם עולה, \"שקר\" אם                 
  יורדת).]{dir="rtl"}                 

  [הגדרת המשתמש בנוגע לאם בן האדם או  *IS_HUMAN_STARTS*
  המחשב מתחיל (במשחקים מול המחשב):    
  \"אמת\" אם בן האדם מתחיל, \"שקר\"   
  אם המחשב מתחיל.]{dir="rtl"}         

  [הגדרת המשתמש בנוגע לרמת המשחק      *DIFFICULTY*
  שתהווה כברירת מחדל עבור משחקים שלא  
  הוגדרה להם רמה מראש.]{dir="rtl"}    

  [הגדרת המשתמש בנוגע לדסקית של השחקן *FIRST_PLAYER_PIECE*
  הראשון.]{dir="rtl"}                 

  [הגדרת המשתמש בנוגע לדסקית של השחקן *SECOND_PLAYER_PIECE*
  השני.]{dir="rtl"}                   

  [הגדרת המשתמש בנוגע לגודל צלע       *BOARD_SIZE*
  מטריצת לוח המשחק.]{dir="rtl"}       

  [הגדרת המשתמש בנוגע למספר הדסקיות   *START_SIZE*
  ההתחלתיות של כל שחקן.]{dir="rtl"}   

  [הגדרת המשתמש בנוגע לאורך הזמן      *DURATION*
  המוקצב למשחק.]{dir="rtl"}           

  [הגדרת המשתמש בנוגע לעל פי איזה     *RECORDS_SORT*
  פרמטר למיין את רשימת המשחקים במסך   
  תוצאות המשחקים.]{dir="rtl"}         

  [הגדרת המשתמש בנוגע לסדר מיון       *RECORDS_SORT_ASCENDING*
  המשחקים במסך תוצאות                 
  המשחקים]{dir="rtl"} [(\"אמת\" אם    
  הסדר עולה, \"שקר\" אם הסדר          
  יורד).]{dir="rtl"}                  

  [הגדרת המשתמש בנוגע לאם מרחב        *EXPAND_SETTINGS*
  ההגדרות יורחב בעת כניסה למסך        
  ההגדרות (\"אמת\" אם יורחב, \"שקר\"  
  אחרת).]{dir="rtl"}                  

  [הגדרת המשתמש בנוגע לאם לטעון באופן *ALWAYS_LOAD_SAVED_GAME*
  אוטומטי משחקים שמורים, מבלי לשאול   
  תחילה את המשתמש (\"אמת\" אם לטעון,  
  \"שקר\" אם לא לטעון).]{dir="rtl"}   

  [הגדרת המשתמש בנוגע לאם לשאול את    *IS_ASK_BEFORE_SAVE*
  המשתמש לפני שמירת משחקים בעת יציאה  
  (\"אמת\" אם לשאול, \"שקר\"          
  אחרת).]{dir="rtl"}                  

  [המזהה הייחודי של המשחק האחרון      *LAST_GAME_ID*
  השמור.]{dir="rtl"}                  

  [מספר התורות (הנוכחי) ששוחקו במשחק  *LAST_TURNS_PLAYED*
  האחרון השמור.]{dir="rtl"}           

  [השחקן הראשון במשחק האחרון          *LAST_FIRST_PLAYER*
  השמור.]{dir="rtl"}                  

  [השחקן השני במשחק האחרון            *LAST_SECOND_PLAYER*
  השמור.]{dir="rtl"}                  

  [השחקן שניצח במשחק האחרון           *LAST_WINNER*
  השמור.]{dir="rtl"}                  

  [מספר הדסקיות (הנוכחי) של השחקן     *LAST_FIRST_PIECES*
  הראשון במשחק האחרון                 
  השמור.]{dir="rtl"}                  

  [מספר הדסקיות (הנוכחי) של השחקן     *LAST_SECOND_PIECES*
  השני במשחק האחרון                   
  השמור.]{dir="rtl"}                  

  [הזמן הממוצע (הנוכחי) שלוקח לשחקן   *LAST_FIRST_AVG*
  הראשון לבצע את תורו במשחק האחרון    
  השמור.]{dir="rtl"}                  

  [הזמן הממוצע (הנוכחי) שלוקח לשחקן   *LAST_SECOND_AVG*
  השני לבצע את תורו במשחק האחרון      
  השמור.]{dir="rtl"}                  

  [רמת הקושי של המשחק האחרון          *LAST_DIFFICULTY*
  השמור.]{dir="rtl"}                  

  [מספרת התורות (הנוכחי) ששיחק השחקן  *LAST_FIRST_TURNS*
  הראשון במשחק האחרון                 
  השמור.]{dir="rtl"}                  

  [האם המשחק האחרון השמור הוא משחק    *LAST_GAME_OVER*
  שהסתיים (\"אמת\" אם הסתיים, \"שקר\" 
  אחרת).]{dir="rtl"}                  

  [מטריצת לוח המשחק האחרון            *LAST_BOARD*
  השמור.]{dir="rtl"}                  

  [המשבצות הריקות (הנוכחיות) המיועדות *LAST_EMPTY_TO_CHECK*
  לבדיקה במשחק האחרון השמור (ראו      
  תיעוד מחלקות הלוגיקה                
  בהמשך).]{dir="rtl"}                 

  [השחקן הנוכחי במשחק האחרון          *LAST_CURRENT_PLAYER*
  השמור.]{dir="rtl"}                  

  [גודל צלע לוח המשחק האחרון          *LAST_BOARD_SIZE*
  השמור.]{dir="rtl"}                  

  [מספר הדסקיות ההתחלתיות של כל שחקן  *LAST_START_SIZE*
  במשחק האחרון השמור.]{dir="rtl"}     

  [האם התור הנוכחי הוא של בן אדם או   *LAST_HUMAN_TURN*
  של המחשב במשחק האחרון הנוכחי        
  (\"אמת\" אם של בן אדם, \"שקר\" אם   
  של המחשב).]{dir="rtl"}              

  [זמן המשחק (הנוכחי) שעבר מאז תחילתו *LAST_TIME_PLAYED*
  של המשחק האחרון השמור.]{dir="rtl"}  
  ----------------------------------- -----------------------------------

**[תכונות מחלקת ה-]{dir="rtl"} Enum**

  ----------------------------------- -----------------------------------
  [ערך ברירת המחדל של                 private final Object defaultValue
  ההגדרה.]{dir="rtl"}                 

  ----------------------------------- -----------------------------------

**[פעולות מחלקת ה-]{dir="rtl"} Enum**

  ----------------------------------- -----------------------------------
  **[הפעולה הבונה של המחלקה. מקבלת    Keys(Object defaultValue)
  כפרמטר את ערך ברירת המחדל של        
  ההגדרה.]{dir="rtl"}**               

  [דריסת פעולת ה-]{dir="rtl"}         \@Override\
  toString [של העצם. מחזירה מחרוזת    public String toString()
  המייצגת באופן קריא את               
  ההגדרה.]{dir="rtl"}                 
  ----------------------------------- -----------------------------------

**[תכונות המחלקה (]{dir="rtl"}SettingsManager[)]{dir="rtl"}**

  ----------------------------------- -----------------------------------
  [מופע ה-]{dir="rtl"} singleton [של  private static SettingsManager
  המחלקה. לאורך כל חיי האפליקציה לא   *settingsInstance*
  ייווצרו מופעים אחרים                
  למחלקה.]{dir="rtl"}                 

  [גרסת ההגדרות (הנוכחית): באופן דומה private static final int
  למחלקת מסד הנתונים, החלטתי לממש     *SETTINGS_VERSION*
  מנגנון שדרוג. זאת מפני שעדכונים     
  מסוימים להגדרות שינו אותן כך שהיה   
  צורך באיפוסן (כמו שינוי שיטת איות   
  המפתחות השמורים או שינוי פורמט      
  שמירת נתונים מסוימים). המנגנון מזהה 
  כאשר גרסת ההגדרות הנוכחית שונה      
  מגרסת ההגדרות השמורה, ובמקרה כזה    
  מאפסת את ההגדרות (השארתי אופציה     
  לעתיד לשיפור המנגנון כך שגם יידע    
  להמיר את ההגדרות אך לטעמי בשלב זה,  
  הדבר מיותר).]{dir="rtl"}            

  [תכונה סטטית קבועה המייצגת את שם    private static final String
  הקובץ בו שמורות ההגדרות בתיקיית     *SHARED_PREFERENCES_NAME*
  ה-]{dir="rtl"}                      
  shared_prefs[.]{dir="rtl"}          

  [תכונה סטטית קבועה המייצגת מחרוזת   private static final String
  שכל תו בה הוא תו אשר משמש להפרדה    *DELIMITERS*
  בשמירת נתונים (להסבר מפורט ראה המשך 
  התיעוד).]{dir="rtl"}                

  [האינדקס של התו הפנוי הנוכחי        private static int
  במחרוזת התווים                      *nextAvailableDelimiterIndex*
  המפרידים.]{dir="rtl"}               

  [התו המפריד הראשי שייעשה בו שימוש   private static final String
  לצורך שמירת נתונים                  *DELIMITER*
  בהגדרות.]{dir="rtl"}                

  [התכונה המאפשרת תקשורת עם           private final SharedPreferences sp
  ה-]{dir="rtl"} Shared               
  Preferences[.]{dir="rtl"}           

  [התכונה המאפשרת עריכת               private final
  ה-]{dir="rtl"} Shared               SharedPreferences.Editor editor
  Preferences[.]{dir="rtl"}           

  [מילון ההגדרות: מפתחות המילון הם    private final HashMap\<Keys,
  מסוג ה-]{dir="rtl"} Enum            Object> settings
  [המתאים-]{dir="rtl"}                
  Settings.Keys[, והערכים הם הערכים   
  העדכניים של מפתחות אלו בהגדרות      
  (מסונכרנים). הערכים הם              
  מסוג]{dir="rtl"} Object [כדי לשמור  
  על גנריות ולאפשר שמירת נתונים       
  מסוגים שונים באותו המילון. להסבר על 
  מימוש מחלקת ההגדרות ראו את פתיח     
  המחלקה לעיל.]{dir="rtl"}            
  ----------------------------------- -----------------------------------

**[פעולות המחלקה]{dir="rtl"}**

  -------------------------------------- ---------------------------------------------
  [פעולה סטטית המשמשת להמרת כתיב         public static String
  בצורת]{dir="rtl"} Capitalized Snake    capsSnakeToStandard(String capsCamel)
  Case [(לדוגמא]{dir="rtl"}              
  RANDOM_TEXT[) לכתיב סטנדרטי באנגלית    
  (לדוגמא]{dir="rtl"} Random Text[).     
  השימוש של פעולה סטטית זו הוא לדריסת    
  פעולות ה-]{dir="rtl"} toString [של     
  מחלקות ה-]{dir="rtl"} Enum [השונות     
  בפרויקט כך שימירו את שם ה-]{dir="rtl"} 
  Enum [(]{dir="rtl"}name()[) לכתיב מובן 
  לקריאה.]{dir="rtl"}                    

  **[פעולה בונה פרטית (על מנת לאפשר      private SettingsManager(Context context)
  מימוש]{dir="rtl"} singleton[) למחלקה   
  אשר מקבלת כפרמטר]{dir="rtl"} Context   
  [ומאתחלת את העצם בהתאם: בודקת אם יש    
  צורך בשדרוג, מאתחלת את התכונות         
  הרלוונטיות ומסנכרנת את מילון           
  ההגדרות.]{dir="rtl"}**                 

  [פעולה סטטית אשר מחזירה את מופע        public static SettingsManager
  ה-]{dir="rtl"} singleton [של המחלקה.   getInstance(Context context)
  אם טרם נוצר, הפעולה תחילה יוצרת        
  אותו.]{dir="rtl"}                      

  [פעולה אשר מסנכרנת את מילון ההגדרות עם private void syncSettings()
  קובץ ההגדרות.]{dir="rtl"}              

  [פעולה אשר בודקת אם יש צורך בשדרוג מסד private void checkForUpgrade()
  הנתונים ופועלת בהתאם: אם גרסת קובץ     
  ההגדרות השמורה אינה תואמת את הגרסה     
  הנוכחית, הפעולה מנקה את קובץ ההגדרות   
  ומעדכנת את גרסתו.]{dir="rtl"}          

  [פעולה אשר מקבלת כפרמטר מפתח של הגדרה  private void syncSingleSetting(Keys key)
  ומסנכרנת אותה עם מילון המחלקה. בהתאם   
  למפתח, המחלקה ממירה את ההגדרה כלפי מטה 
  לסוגה המקורי ושמה אותו במילון המחלקה.  
  בדיקת סוג הערך מתקיימת תחילה ע\"י ערך  
  ברירת המחדל שלו (כדי כמה שיותר להפוך   
  את התהליך יותר אוטומטי ופחות ידני),    
  ואם ערך זה אינו מספיק כדי לקבוע את סוג 
  הערך (שכן סוגים אינם מזוהים נשמרים     
  כמחרוזות), נדרשת הכנסת מפתח העצם למקום 
  (]{dir="rtl"}case[) המתאים בבלוק       
  ה-]{dir="rtl"} switch [(ראו            
  פעולה).]{dir="rtl"}                    

  [העמסת הפעולה]{dir="rtl"} putValue[,   public void putValue(Keys key, int value)
  אשר מקבלת כפרמטרים מפתח וערך           
  מסוג]{dir="rtl"} int [ומעדכנת את מילון 
  ההגדרות ואת קובץ ההגדרות               
  בהתאם.]{dir="rtl"}                     

  [העמסת הפעולה]{dir="rtl"} putValue[,   public void putValue(Keys key, long value)
  אשר מקבלת כפרמטרים מפתח וערך           
  מסוג]{dir="rtl"} long [ומעדכנת את      
  מילון ההגדרות ואת קובץ ההגדרות         
  בהתאם.]{dir="rtl"}                     

  [העמסת הפעולה]{dir="rtl"} putValue[,   public void putValue(Keys key, boolean value)
  אשר מקבלת כפרמטרים מפתח וערך           
  מסוג]{dir="rtl"} boolean [ומעדכנת את   
  מילון ההגדרות ואת קובץ ההגדרות         
  בהתאם.]{dir="rtl"}                     

  [העמסת הפעולה]{dir="rtl"} putValue[,   public void putValue(Keys key, Set\<String>
  אשר מקבלת כפרמטרים מפתח וערך           value)
  מסוג]{dir="rtl"} Set\<String> [ומעדכנת 
  את מילון ההגדרות ואת קובץ ההגדרות      
  בהתאם.]{dir="rtl"}                     

  [העמסת הפעולה]{dir="rtl"} putValue[,   public void putValue(Keys key, Piece value)
  אשר מקבלת כפרמטרים מפתח וערך           
  מסוג]{dir="rtl"} Piece [ומעדכנת את     
  מילון ההגדרות ואת קובץ ההגדרות         
  בהתאם.]{dir="rtl"}                     

  [העמסת הפעולה]{dir="rtl"} putValue[,   public void putValue(Keys key, Piece\[\]\[\]
  אשר מקבלת כפרמטרים מפתח וערך           value)
  מסוג]{dir="rtl"} Piece\[\]\[\]         
  [ומעדכנת את מילון ההגדרות ואת קובץ     
  ההגדרות בהתאם.]{dir="rtl"}             

  [העמסת הפעולה]{dir="rtl"} putValue[,   public void putValue(Keys key,
  אשר מקבלת כפרמטרים מפתח וערך           GameController.Difficulty value)
  מסוג]{dir="rtl"}                       
  GameController.Difficulty [ומעדכנת את  
  מילון ההגדרות ואת קובץ ההגדרות         
  בהתאם.]{dir="rtl"}                     

  [העמסת הפעולה]{dir="rtl"} putValue[,   public void putValue(Keys key,
  אשר מקבלת כפרמטרים מפתח וערך           GameDetailsComparator.CompareGDType value)
  מסוג]{dir="rtl"}                       
  GameDetailsComparator.CompareGDType    
  [ומעדכנת את מילון ההגדרות ואת קובץ     
  ההגדרות בהתאם.]{dir="rtl"}             

  [פעולה המקבלת כפרמטר מפתח לערך         public int getIntValue(Keys key)
  מסוג]{dir="rtl"} int [ומחזירה את הערך  
  הקיים בהגדרות תחת מפתח זה. אם אינו     
  מוגדר, היא מחזירה את ערך ברירת המחדל   
  שלו.]{dir="rtl"}                       

  [פעולה המקבלת כפרמטר מפתח לערך         public long getLongValue(Keys key)
  מסוג]{dir="rtl"} long [ומחזירה את הערך 
  הקיים בהגדרות תחת מפתח זה. אם אינו     
  מוגדר, היא מחזירה את ערך ברירת המחדל   
  שלו.]{dir="rtl"}                       

  [פעולה המקבלת כפרמטר מפתח לערך         public boolean getBooleanValue(Keys key)
  מסוג]{dir="rtl"} boolean [ומחזירה את   
  הערך הקיים בהגדרות תחת מפתח זה. אם     
  אינו מוגדר, היא מחזירה את ערך ברירת    
  המחדל שלו.]{dir="rtl"}                 

  [פעולה המקבלת כפרמטר מפתח לערך         public Set\<String> getStringSetValue(Keys
  מסוג]{dir="rtl"} String [ומחזירה את    key)
  הערך הקיים בהגדרות תחת מפתח זה. אם     
  אינו מוגדר, היא מחזירה את ערך ברירת    
  המחדל שלו.]{dir="rtl"}                 

  [פעולה המקבלת כפרמטר מפתח לערך         public Piece getPieceValue(Keys key)
  מסוג]{dir="rtl"} Piece [ומחזירה את     
  הערך הקיים בהגדרות תחת מפתח זה. אם     
  אינו מוגדר, היא מחזירה את ערך ברירת    
  המחדל שלו.]{dir="rtl"}                 

  [פעולה המקבלת כפרמטר מפתח לערך         public Piece\[\]\[\] getPieceMatrixValue(Keys
  מסוג]{dir="rtl"} Piece\[\]\[\]         key)
  [ומחזירה את הערך הקיים בהגדרות תחת     
  מפתח זה. אם אינו מוגדר, היא מחזירה את  
  ערך ברירת המחדל שלו.]{dir="rtl"}       

  [פעולה המקבלת כפרמטר מפתח לערך         public GameController.Difficulty
  מסוג]{dir="rtl"}                       getDifficultyValue(Keys key)
  GameController.Difficulty [ומחזירה את  
  הערך הקיים בהגדרות תחת מפתח זה. אם     
  אינו מוגדר, היא מחזירה את ערך ברירת    
  המחדל שלו.]{dir="rtl"}                 

  [פעולה המקבלת כפרמטר מפתח לערך         public GameDetailsComparator.CompareGDType
  מסוג]{dir="rtl"}                       getCompareGDTypeValue(Keys key)
  GameDetailsComparator.CompareGDType    
  [ומחזירה את הערך הקיים בהגדרות תחת     
  מפתח זה. אם אינו מוגדר, היא מחזירה את  
  ערך ברירת המחדל שלו.]{dir="rtl"}       

  [פעולה אשר מקבלת כפרמטר עצם המייצג     public void
  פרטים אודות משחק עצור ושומרת אותם      updateOngoingGameDetails(OngoingGameDetails
  לצורך טעינה בהמשך.]{dir="rtl"}         details)

  [פעולה אשר מחזירה \"אמת\" אם קיים משחק public boolean isSavedGameAvailable()
  אחרון השמור בהגדרות לצורך טעינה, או    
  \"שקר\" אם לא קיים.]{dir="rtl"}        

  [פעולה אשר מחזירה את המשחק האחרון      public OngoingGameDetails getLastGameState()
  השמור בהגדרות.]{dir="rtl"}             

  [פעולה אשר מקבלת כפרמטר מפתח להגדרה    public void resetSingleSetting(Keys key)
  (בודדת) ומאתחלת את הגדרה זו לברירת     
  המחדל.]{dir="rtl"}                     

  [פעולה אשר מאתחלת את כלל ההגדרות       public void restoreDefaultSettings()
  לברירת המחדל.]{dir="rtl"}              

  [פעולה אשר מקבלת כפרמטר מטריצה המייצגת private String formatBoardToStr(Piece\[\]\[\]
  לוח משחק וממירה אותה לייצוג בצורת      board)
  מחרוזת (כדי לאפשר לשמור אותה           
  בהגדרות).]{dir="rtl"}                  

  [פעולה אשר מקבלת כפרמטר מחרוזת המייצגת private Piece\[\]\[\]
  לוח משחק השמור בהגדרות, ממירה אותה     invertFormattedBoard(String board)
  למטריצת לוח משחק ומחזירה               
  אותה.]{dir="rtl"}                      

  [פעולה סטטית אשר מחזירה את התו המפריד  public static String getAvailableDelimiter()
  הבא הפנוי בשביל מחלקות להשתמש בו (כדי  throws NoSuchElementException
  למנוע ממחלקות שונות להשתמש בתו מפריד   
  זהה, דבר אשר עלול ליצור בעיות בהתנגשות 
  שכזאת העלולה ליצור בעיתיות בחילוץ העצם 
  המקורי). אם נגמרו התווים המפרידים      
  לחלוקה, הפעולה זורקת שגיאה             
  מסוג]{dir="rtl"}                       
  NoSuchElementException[.]{dir="rtl"}   
  -------------------------------------- ---------------------------------------------

[\
]{dir="rtl"}

[]{#_Toc76826932 .anchor}Cell

[המחלקה נועדה לייצג תא במטריצת לוח המשחק. היא מאפשרת המרות שונות הקשורות
למיקום המשבצת.]{dir="rtl"}

**[תכונות המחלקה]{dir="rtl"}**

  ----------------------------------- -----------------------------------
  [תכונה סטטית קבועה המייצגת את התו   private static final String
  המפריד המשמש את המחלקה. השימוש שלו  *DELIMITER*
  הוא הפרדה בין חלקי תג המייצג משבצת  
  בלוח המשחק.]{dir="rtl"}             

  [תכונה המייצגת את אינדקס השורה של   private final int row
  המשבצת במטריצת לוח                  
  המשחק.]{dir="rtl"}                  

  [תכונה המייצגת את אינדקס העמודה של  private final int col
  המשבצת במטריצת לוח                  
  המשחק.]{dir="rtl"}                  
  ----------------------------------- -----------------------------------

**[פעולות המחלקה]{dir="rtl"}**

  ----------------------------------- -----------------------------------
  **[הפעולה הבונה של המחלקה. היא      public Cell(int row, int col)
  מקבלת כפרמטרים את האינדקסים של שורת 
  ועמודת המשבצת ומאתחלת את העצם       
  בהתאם.]{dir="rtl"}**                

  [פעולה אשר מחזירה את אינדקס השורה   public int getRow()
  של המשבצת בלוח המשחק.]{dir="rtl"}   

  [פעולה אשר מחזירה את אינדקס העמודה  public int getCol()
  של המשבצת בלוח המשחק.]{dir="rtl"}   

  [פעולה סטטית אשר מקבלת כפרמטרים     public static String
  אינדקסים של שורה ועמודה בלוח המשחק  toSquareTag(int row, int col)
  ומחזירה את \"ייצוג התג\" של משבצת   
  זו.]{dir="rtl"}                     

  [פעולה סטטית אשר מקבלת כפרמטרים     public static String
  אינדקס המייצג שורה בלוח המשחק,      toSquareTag(int row, int col,
  אינדקס המייצג עמודה בלוח המשחק      String remainder)
  ומחרוזת \"שארית\", ומחזירה את       
  \"ייצוג התג\" של משבצת זו יחד עם    
  מחרוזת ה\"שארית\".]{dir="rtl"}      

  [פעולה סטטית אשר מקבלת כפרמטר       public static int getTagRow(String
  מחרוזת בצורת \"ייצוג תג\" ומחזירה   tag)
  את אינדקס השורה של המשבצת           
  המיוצגת.]{dir="rtl"}                

  [פעולה סטטית אשר מקבלת כפרמטר       public static int getTagCol(String
  מחרוזת בצורת \"ייצוג תג\" ומחזירה   tag)
  את אינדקס העמודה של המשבצת          
  המיוצגת.]{dir="rtl"}                

  [פעולה סטטית אשר מקבלת כפרמטר       public static String
  מחרוזת בצורת \"ייצוג תג\" בעלת      getRemainder(String tag)
  מחרוזת \"שארית\" ומחזירה את השארית  
  של התג.]{dir="rtl"}                 
  ----------------------------------- -----------------------------------

[\
]{dir="rtl"}[]{#_Toc76826933 .anchor}BoardModel

[המחלקה היא מחלקת המודל של האפליקציה (לפי מודל ה]{dir="rtl"}MVC[). היא
אחראית על שמירת רוב הנתונים על משחק קיים, תחזוקתו, מימוש הלוגיקה שלו
ופעולות הקשורות בה. כדי לאפשר את מימוש אלגוריתם הבינה
המלאכותית]{dir="rtl"} minimax [בצורה מתאימה ביותר לדעתי לפרויקט שלי,
החלטתי על פיצול מודל הפרויקט ל- 2 מחלקות-]{dir="rtl"} BoardModel [אשר
מתחזקת את המשחק והלוגיקה אשר פחות נוגעים לאלגוריתם ה-]{dir="rtl"} AI[;
ו-]{dir="rtl"} BoardState [אשר מייצגת מצב משחק ומאפשרת מהלכים הקשורים
ללוגיקה שלו ונוגעים באופן יותר מהותי באלגוריתם הבינה המלאכותית. זאת
ועוד, הפיצול מונע שמירה ועדכון של נתונים מיותרים (כמו ממוצע זמן לתור)
בזמן חישובי האלגוריתם ומבטיח שבזמן זה האלגוריתם יקבל אך ורק את הנתונים
הרלוונטיים אליו ולא יבצע חישובים מיותרים, כדי לצמצם כמה שיותר את זמן
הריצה ועומס הזיכרון שחישובים אלו גורמים. יתרון נוסף של פיצול זה הוא
חילוק הקוד כדי לא להעמיס עודף קוד על מחלקה אחת.]{dir="rtl"}

**[תכונות המחלקה]{dir="rtl"}**

  ----------------------------------- -----------------------------------
  [תכונה סטטית קבועה המייצגת את הערך  private static final long
  התחלתי לממוצע השחקנים לשחק את       *INIT_AVG*
  תורם.]{dir="rtl"}                   

  [תכונה סטטית קבועה המייצגת את הערך  private static final int
  ההתחלתי למספר התורות שעברו מתחילת   *INIT_TURNS*
  המשחק.]{dir="rtl"}                  

  [תכונה סטטית קבועה המייצגת את הערך  private static final Piece
  ההתחלתי לדסקית מנצח                 *INIT_WINNER*
  המשחק.]{dir="rtl"}                  

  [תכונה סטטית קבועה המייצגת את הערך  private static final boolean
  ההתחלתי לאם נגמר המשחק.]{dir="rtl"} *INIT_GAME_OVER*

  [תכונה סטטית קבועה המייצגת את הערך  private static final Piece\[\]\[\]
  ההתחלתי למטריצת לוח                 *INIT_BOARD*
  המשחק.]{dir="rtl"}                  

  [תכונה סטטית קבועה המייצגת את הערך  private static final
  ההתחלתי למשבצות הריקות לבדיקה       Collection\<String>
  (להסבר מפורט יותר ראו המשך התיעוד   *INIT_EMPTY_TO_CHECK*
  תחת מחלקת]{dir="rtl"}               
  BoardState[).]{dir="rtl"}           

  [תכונה סטטית קבועה המייצגת את הערך  private static final int
  ההתחלתי (ברירת המחדל) למספר הדסקיות *INIT_PIECE_COUNT*
  ההתחלתי של כל שחקן.]{dir="rtl"}     

  [אורך צלע המטריצה של לוח            private int boardSize
  המשחק.]{dir="rtl"}                  

  [עצם המייצג מצב משחק נתון אשר משמש  private final BoardState boardState
  כחלק נוסף למודל הפרויקט (ראו תיעוד  
  המחלקה]{dir="rtl"}                  
  BoardState[).]{dir="rtl"}           

  [מילון המייצג את המשבצות האפשריות   private HashMap\<String,
  לשחקן הנוכחי לשחק אליהן את תורו:    List\<Cell>\> validChoices
  המפתחות הם מחרוזות שהן תג המייצג את 
  המשבצת (כך שכלל המפתחות הן כלל      
  דסקיות ה\"רמז\"), והערכים הם רשימה  
  של המשבצות שיתווספו לשחקן אם ישחק   
  את תורו למשבצת שהמפתח מייצג (כך     
  שכלל האיברים ברשימה מהווים את       
  הדסקיות ה\"פוטנציאליות\" המתאימות   
  למשבצת שמייצג המפתח).]{dir="rtl"}   

  [מנצח המשחק (אם עדיין לא נגמר, או   private Piece winner
  שנגמר בתיקו- הערך יהיה]{dir="rtl"}  
  Piece.EMPTY[).]{dir="rtl"}          

  [תכונה בוליאנית המייצגת אם המשחק    private boolean isGameOver
  הסתיים (\"אמת\" אם הסתיים, \"שקר\"  
  אחרת).]{dir="rtl"}                  

  [מילון המייצג את כמות התורות ששיחק  private final HashMap\<Piece,
  כל שחקן:]{dir="rtl"} [המפתח זה      Integer> turnsCount
  הדסקית של השחקן והערך זה מספר       
  התורות (הנוכחי) ששיחק.]{dir="rtl"}  

  [מילון המייצג את ממוצע השחקנים לשחק private final HashMap\<Piece,
  את תורם: המפתח זה הדסקית של השחקן   Double> avgTurns
  והערך זה הממוצע (הנוכחי) של הזמן    
  שלוקח לו לשחק את תורו.]{dir="rtl"}  

  [חתימת הזמן האחרונה שנלקחה על מנת   private long lastTimeStamp
  חישוב זמן תורם של                   
  השחקנים.]{dir="rtl"}                

  [תכונה סטטית קבועה המייצגת את האורך public static final int
  המקסימלי המותר לצלע לוח             *MAX_BOARD_SIZE*
  המשחק.]{dir="rtl"}                  

  [תכונה סטטית קבועה המייצגת את האורך public static final int
  המינימלי המותר לצלע לוח             *MIN_BOARD_SIZE*
  המשחק.]{dir="rtl"}                  

  [תכונה סטטית קבועה המייצגת את       private static final List\<Integer>
  הרשימה המכילה את כל אורכי לוח המשחק *VALID_BOARD_SIZES*
  המותרים (אתחול הרשימה נעשה בבלוק    
  סטטי מתאים).]{dir="rtl"}            

  [תכונה סטטית קבועה המייצגת את       private static final List\<Integer>
  הרשימה המכילה את כל כמויות הדסקיות  *VALID_START_SIZES*
  ההתחלתיות לכל שחקן האפשריות (אתחול  
  הרשימה נעשה בבלוק סטטי              
  מתאים).]{dir="rtl"}                 
  ----------------------------------- -----------------------------------

**[פעולות המחלקה]{dir="rtl"}**

+-----------------------------------+-----------------------------------+
| **[הפעולה הבונה של המחלקה. היא    | public BoardModel(Piece           |
| מקבלת כפרמטר את השחקן הראשון      | firstPlayer, Piece secondPlayer)  |
| והשני ומאתחלת תכונות              |                                   |
| רלוונטיות.]{dir="rtl"}**          |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת עצם המכיל מידע   | public void                       |
| אודות משחק \"חי\" וטוענת אותו. אם | loadGame(LiveGameDetails          |
| ערך לוח המשחק המועבר דרך עצם זה   | gameState)                        |
| הוא הערך ההתחלתי של הלוח          |                                   |
| (]{dir="rtl"}null[), הפעולה גם    |                                   |
| תאתחל את הלוח והתכונות הנלוות     |                                   |
| אליו בהתאם.]{dir="rtl"}           |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת כפרמטרים את      | private void initModelBoard(Piece |
| השחקן הראשון, השני ואת כמות       | firstPlayer, Piece secondPlayer,  |
| הדסקיות ההתחלתיות שלהם, ומאתחלת   | int startSize)                    |
| את לוח המשחק והתכונות הנלוות אליו |                                   |
| בהתאם.]{dir="rtl"}                |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת כפרמטרים אינדקס  | public Piece                      |
| שורה ואינדקס עמודה אשר מייצגים    | getPieceByLocation(int row, int   |
| משבצת על הלוח ומחזירה את דסקית    | col)                              |
| השחקן שעל המשבצת.]{dir="rtl"}     |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת כפרמטרים את      | public boolean nextTurn(Piece     |
| דסקית השחקן הנוכחי, דסקית השחקן   | current, Piece rival, List\<Cell> |
| הבא ורשימת הדסקיות שיתווספו לשחקן | toChangeArray)                    |
| הנוכחי בתור זה (הדסקיות           |                                   |
| ה\"פוטנציאליות\" של בחירתו באיזה  |                                   |
| משבצת לשחק את תורו), ומשחקת את    |                                   |
| תורו.]{dir="rtl"} [הפעולה מחזירה  |                                   |
| \"אמת\" אם התור השתנה, כלומר התור |                                   |
| שלאחר התור ששוחק הוא של השחקן     |                                   |
| הבא; היא מחזירה \"שקר\" אחרת,     |                                   |
| כלומר התור הבא הוא שוב תורו של    |                                   |
| השחקן הנוכחי.]{dir="rtl"}         |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת כפרמטרים את      | public void finishGame(Piece      |
| השחקן הנוכחי ואת השחקן הבא,       | currentPlayer, Piece otherPlayer) |
| ומסיימת את המשחק- מעדכנת את       |                                   |
| התכונות הרלוונטיות ביניהן מנצח    |                                   |
| המשחק ואם המשחק                   |                                   |
| הסתיים.]{dir="rtl"}               |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת שחקן ומעלה       | private void                      |
| במילון המתאים את כמות התורות      | incrementTurnsCount(Piece player) |
| ששיחק ב-1.]{dir="rtl"}            | {                                 |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת שחקן ומעדכנת את  | private void updateAverage(Piece  |
| ממוצע הזמן שלוקח לו לשחק את       | currentPlayer)                    |
| תורו.]{dir="rtl"}                 |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה סטטית אשר מחזירה את הערך   | public static long getInitAvg()   |
| התחלתי לממוצע השחקנים לשחק את     |                                   |
| תורם.]{dir="rtl"}                 |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה סטטית אשר מחזירה את הערך   | public static int getInitTurns()  |
| ההתחלתי למספר התורות שעברו מתחילת |                                   |
| המשחק.]{dir="rtl"}                |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה סטטית אשר מחזירה את הערך   | public static Piece               |
| ההתחלתי לדסקית מנצח               | getInitWinner()                   |
| המשחק.]{dir="rtl"}                |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה סטטית אשר מחזירה את הערך   | public static boolean             |
| ההתחלתי לאם נגמר                  | isInitGameOver()                  |
| המשחק.]{dir="rtl"}                |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה סטטית אשר מחזירה את הערך   | public static Piece\[\]\[\]       |
| ההתחלתי למטריצת לוח               | getInitBoard()                    |
| המשחק.]{dir="rtl"}                |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה סטטית אשר מחזירה את הערך   | public static Collection\<String> |
| ההתחלתי למשבצות הריקות לבדיקה     | getInitEmptyToCheck()             |
| (להסבר מפורט יותר ראו המשך התיעוד |                                   |
| תחת מחלקת]{dir="rtl"}             |                                   |
| BoardState[).]{dir="rtl"}         |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה סטטית אשר מחזירה את הערך   | public static int                 |
| ההתחלתי (ברירת המחדל) למספר       | getInitPieceCount()               |
| הדסקיות ההתחלתי של כל             |                                   |
| שחקן.]{dir="rtl"}                 |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מחזירה את מנצח המשחק   | public Piece getWinner()          |
| (או דסקית \"ריקה\" אם המשחק טרם   |                                   |
| נגמר או נגמר בתיקו).]{dir="rtl"}  |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת כפרמטר דסקית של  | public int getTurnsCount(Piece    |
| שחקן ומחזירה את כמות התורות שהוא  | player)                           |
| שיחק.]{dir="rtl"}                 |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מחזירה את כמות התורות  | public int getTurnsCount()        |
| ששוחקו מתחילת המשחק.]{dir="rtl"}  |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מחזירה \"אמת\" אם      | public boolean isGameOver()       |
| המשחק נגמר או \"שקר\"             |                                   |
| אחרת.]{dir="rtl"}                 |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת כפרמטר דסקית של  | public int getPieceAmount(Piece   |
| שחקן ומחזירה את כמות הדסקיות שיש  | player)                           |
| (ברגע הנתון) לאותו                |                                   |
| השחקן.]{dir="rtl"}                |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת כפרמטר דסקית של  | public long getTurnAvg(Piece      |
| שחקן ומחזירה את ממוצע הזמן        | player)                           |
| (הנוכחי)]{dir="rtl"} [שלוקח לו    |                                   |
| לשחק את תורו.]{dir="rtl"}         |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מחזירה מילון המתאר את  | public HashMap\<String,           |
| משבצות ה\"רמז\" של השחקן הנוכחי-  | List\<Cell>\> getValidChoices()   |
| המשבצות האפשריות לשחקן הנוכחי     |                                   |
| להתקדם אליהן, ואת ה\"רווחים\"     |                                   |
| שיקבל השחקן מלשחק את התור אליהן   |                                   |
| (בהתאם): המפתחות מייצגים תג של    |                                   |
| משבצת אפשרית לשחק אליה את התור,   |                                   |
| והערך המתאים למפתחות הוא רשימת    |                                   |
| הדסקיות שיתווספו לשחקן עקב הנחת   |                                   |
| הדסקית של התור הנוכחי במשבצת      |                                   |
| שהמפתח מייצג.]{dir="rtl"}         |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מחזירה עותק            | public Piece\[\]\[\]              |
| (]{dir="rtl"}deep copy[) של       | getBoardClone()                   |
| מטריצת לוח המשחק.]{dir="rtl"}     |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מחזירה את המשבצות      | public Collection\<String>        |
| הריקות לבדיקה (להסבר מפורט יותר   | getEmptyToCheckClone()            |
| ראה הסבר תחת תיעוד                |                                   |
| מחלקת]{dir="rtl"}                 |                                   |
| BoardState[).]{dir="rtl"}         |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מחזירה את הפנייה       | public BoardState getBoardState() |
| (מצביע) לעצם המתאר את מצב המשחק   |                                   |
| הנוכחי.]{dir="rtl"}               |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה סטטית אשר מקבלת כפרמטר     | public static List\<Integer>      |
| אורך צלע של מטריצת לוח משחק,      | getMatchingStartSizes(int         |
| ומחזירה הפנייה לתת-רשימה (מתוך    | boardSize)                        |
| הרשימה של כמויות הדסקיות          |                                   |
| ההתחלתיות לכל שחקן אשר תקינות     |                                   |
| ובטווח) שבה כל כמויות הדסקיות     |                                   |
| ההתחלתיות השונות אשר תקינות בהתאם |                                   |
| לאורך הצלע שהועבר (או הפנייה      |                                   |
| לרשימה ריקה אם אין                |                                   |
| כאלה).]{dir="rtl"}                |                                   |
|                                   |                                   |
| [בחרתי לממש את פעולה זו כך        |                                   |
| שיעילות הריצה שלה                 |                                   |
| תהיה]{dir="rtl"} O(1)[. הדבר      |                                   |
| מתאפשר עקב ריצה המאתחלת את רשימת  |                                   |
| הדסקיות ההתחלתיות לכל שחקן        |                                   |
| התקינות בתוך בלוק סטטי, אשר       |                                   |
| מתרחשת טרם הקריאה לפעולה, ובפעולה |                                   |
| עצמה אין התייחסות לאורך הרשימה,   |                                   |
| אלא ע\"פ חישובים מתמטיים (וגם     |                                   |
| ניסיתי מינימום שימוש בתנאים)      |                                   |
| מושגים האינדקסים המתאימים לתחום   |                                   |
| הערכים התקינים מהרשימה הרצויה,    |                                   |
| והפעולה מחזירה הפנייה לרשימה      |                                   |
| באמצעות המתודה]{dir="rtl"}        |                                   |
| subList() [אשר יעילות הריצה       |                                   |
| שלה]{dir="rtl"} O(1)[- אך יש לשים |                                   |
| לב שעקב כך אין לבצע שינויים       |                                   |
| ברשימה המוחזרת (שכן המחיר של      |                                   |
| יעילות פעולה זו הוא שהיא מחזירה   |                                   |
| הפניות לאותו מערך ולא             |                                   |
| העתק).]{dir="rtl"}                |                                   |
|                                   |                                   |
| [תיעוד מפורט של החישובים המתמטיים |                                   |
| ושל הפעולה נמצאים כמובן           |                                   |
| בקוד.]{dir="rtl"}                 |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה סטטית אשר מקבלת כפרמטר     | public static List\<Integer>      |
| מספר דסקיות התחלתי לשחקנים,       | getMatchingBoardSizes(int         |
| ומחזירה הפנייה לתת-רשימה (מתוך    | startSize)                        |
| הרשימה של אורכי צלע המטריצה       |                                   |
| התקינים אשר בטווח) שבה כל אורכי   |                                   |
| צלע המטריצה התקינים השונים בהתאם  |                                   |
| למספר הדסקיות שהועבר (או הפנייה   |                                   |
| לרשימה ריקה אם אין                |                                   |
| כאלה).]{dir="rtl"}                |                                   |
|                                   |                                   |
| [בחרתי לממש את פעולה זו כך        |                                   |
| שיעילות הריצה שלה                 |                                   |
| תהיה]{dir="rtl"} O(1)[. הדבר      |                                   |
| מתאפשר עקב ריצה המאתחלת את רשימת  |                                   |
| אורכי צלע המטריצה התקינים בתוך    |                                   |
| בלוק סטטי, אשר מתרחשת טרם הקריאה  |                                   |
| לפעולה, ובפעולה עצמה אין התייחסות |                                   |
| לאורך הרשימה, אלא ע\"פ חישובים    |                                   |
| מתמטיים (וגם ניסיתי מינימום שימוש |                                   |
| בתנאים) מושגים האינדקסים המתאימים |                                   |
| לתחום הערכים התקינים מהרשימה      |                                   |
| הרצויה, והפעולה מחזירה הפנייה     |                                   |
| לרשימה באמצעות המתודה]{dir="rtl"} |                                   |
| subList() [אשר יעילות הריצה       |                                   |
| שלה]{dir="rtl"} O(1)[- אך יש לשים |                                   |
| לב שעקב כך אין לבצע שינויים       |                                   |
| ברשימה המוחזרת (שכן המחיר של      |                                   |
| יעילות פעולה זו הוא שהיא מחזירה   |                                   |
| הפניות לאותו מערך ולא             |                                   |
| העתק).]{dir="rtl"}                |                                   |
|                                   |                                   |
| [תיעוד מפורט של החישובים המתמטיים |                                   |
| ושל הפעולה נמצאים כמובן           |                                   |
| בקוד.]{dir="rtl"}                 |                                   |
+-----------------------------------+-----------------------------------+

[\
]{dir="rtl"}

[]{#_Toc76826934 .anchor}BoardState

[המחלקה מהווה את החלק השני של מחלקת המודל של האפליקציה (לפי מודל
ה]{dir="rtl"}MVC[). להסבר מלא ומפורט לסיבת פיצול המודל ל-2 מחלקות ראו את
המבוא לתיעוד המחלקה]{dir="rtl"} BoardModel [לעיל.]{dir="rtl"}

**[תכונות המחלקה]{dir="rtl"}**

  ----------------------------------- -----------------------------------
  [המטריצה המייצגת את לוח             private Piece\[\]\[\] board
  המשחק.]{dir="rtl"}                  

  [מילון המייצג את כמות הדסקיות       private final HashMap\<Piece,
  הנוכחית שיש לכל שחקן: המפתח זה      Integer> pieceCount
  הדסקית של השחקן והערך זה כמות       
  הדסקיות (הנוכחית) שיש בבעלותו על    
  המשחק.]{dir="rtl"}                  

  [אוסף המייצג את המשבצות הריקות על   private final Collection\<String>
  הלוח לבדיקה. כדי למטב את יעילות     emptyToCheck
  הקוד, החלטתי לשמור אוסף (המימוש הוא 
  של]{dir="rtl"} Set[) שבו רק המשבצות 
  הרלוונטיות שיש צורך לבדוק על מנת    
  למצוא את דסקיות ה\"רמז\" (המהלכים   
  האפשריים). משבצות או יהיו המשבצות   
  המקיפות את הדסקיות הפעילות שעל לוח  
  המשחק. כך אני נמנע מלעבור על כל לוח 
  המשחק בכל תור מחדש כדי למצוא את     
  המהלכים האפשריים לשחקן. להמחשה ראו  
  את הנספח בסוף תיעוד                 
  המחלקה.]{dir="rtl"}                 
  ----------------------------------- -----------------------------------

**[פעולות המחלקה]{dir="rtl"}**

+----------------------------------+-----------------------------------+
| **[הפעולה הבונה הריקה של המחלקה. | public BoardState()               |
| מאתחלת את התכונות                |                                   |
| הרלוונטיות.]{dir="rtl"}**        |                                   |
+----------------------------------+-----------------------------------+
| **[הפעולה הבונה המעתיקה של       | public BoardState(BoardState      |
| המחלקה- היא מקבלת כפרמטר עצם     | boardState)                       |
| מטיפוס]{dir="rtl"} BoardState    |                                   |
| [ומעתיקה את                      |                                   |
| תכונותיו.]{dir="rtl"}**          |                                   |
+----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת כפרמטרים רשימה  | public void                       |
| המייצגת משבצות על הלוח להוסיף    | updateBoard(List\<Cell>           |
| לשחקן הנוכחי, את השחקן הנוכחי    | squaresToUpdate, Piece            |
| ואת השחקן היריב, ומעדכנת את הלוח | currentPlayer, Piece otherPlayer) |
| בהתאם לתור: מעדכנת את המשבצות על |                                   |
| הלוח כך שבעלות המשבצות החדשות של |                                   |
| השחקן תועבר אליו, ובנוסף מעדכנת  |                                   |
| את כמות הדסקיות הנוכחית של כל    |                                   |
| שחקן ואת המשבצות הריקות לבדיקה   |                                   |
| בהתאם.]{dir="rtl"}               |                                   |
+----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת כפרמטרים        | public Collection\<String>        |
| אינדקסים של שורה ועמודה המייצגים | surroundingEmptySquares(int row,  |
| משבצת בלוח, ומחשבת ומחזירה אוסף  | int col)                          |
| של מחרוזות המייצגות תגים של      |                                   |
| משבצות ריקות על הלוח אשר נמצאות  |                                   |
| מסביב לה.]{dir="rtl"}            |                                   |
+----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת כפרמטרים את     | public HashMap\<String,           |
| השחקן הנוכחי ואת השחקן הבא,      | List\<Cell>\> validChoices(Piece  |
| ומחשבת ומחזירה מילון המייצג את   | currentPlayer, Piece nextPlayer)  |
| המשבצות שיכול השחקן הנוכחי לשחק  |                                   |
| אליהן את תורו כך שמפתחות המילון  |                                   |
| המייצגים את המשבצות הללו עצמן,   |                                   |
| והערכים הם רשימה של כלל המשבצות  |                                   |
| שיתווספו אם ישחק השחקן את תורו   |                                   |
| למשבצת המפתח                     |                                   |
| המתאימה.]{dir="rtl"}             |                                   |
|                                  |                                   |
| [הפעולה עוברת על כל המשבצות      |                                   |
| הריקות לבדיקה, ועבור כל אחת מהן  |                                   |
| בודקת אם השחקן רשאי לשחק את תורו |                                   |
| אליה (אם יתווספו לו משבצות עקב   |                                   |
| הנחת דסקית עליה בתורו). אם רשאי, |                                   |
| היא מוסיפה למילון התוצאה את      |                                   |
| רשימת המשבצות שיתווספו עקב הנחת  |                                   |
| הדסקית במשבצת זו כאשר היא        |                                   |
| המפתח.]{dir="rtl"}               |                                   |
+----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת כפרמטרים את     | public List\<Cell>                |
| השחקן הנוכחי, השחקן הבא(היריב של | nextAvailableSquares(Piece        |
| הנוכחי), אינדקס של שורה של משבצת | current, Piece rival, int row,    |
| על הלוח ואינדקס של עמודה על      | int col)                          |
| משבצת על הלוח, ומחזירה רשימה שבה |                                   |
| כל הדסקיות שיתווספו לשחקן הנוכחי |                                   |
| אם בתורו יניח את הדסקית על       |                                   |
| המשבצת הנתונה (אם אין כאלו       |                                   |
| הפעולה מחזירה רשימה              |                                   |
| ריקה).]{dir="rtl"}               |                                   |
|                                  |                                   |
| [הפעולה עוברת על כל המשבצות      |                                   |
| המקיפות את המשבצת הנתונה (את כל  |                                   |
| הכיוונים האפשריים כולל           |                                   |
| אלכסונים), ועבור כל אחת מהן      |                                   |
| מקבלת את הרשימה של הדסקיות מאותו |                                   |
| כיוון אשר יתווספו לשחקן אם יבצע  |                                   |
| את תורו למשבצת הנתונה, ואם       |                                   |
| קיימות כאלו, מוסיפה אותן לרשימת  |                                   |
| התוצאה (בסוף הפעולה אם אכן       |                                   |
| קיימות משבצות אפשריים להתווסף,   |                                   |
| הפעולה גם מוסיפה את הדסקית       |                                   |
| הנוכחית כדסקית                   |                                   |
| שתתווסף).]{dir="rtl"}            |                                   |
+----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת כפרמטרים דסקית  | private ArrayList\<Cell>          |
| השחקן הנוכחי, דסקית השחקן הבא,   | goDirection(Piece currentPlayer,  |
| אינדקסים (שורה ועמודה) המייצגים  | Piece rival, int row, int col,    |
| משבצת על הלוח, כיוון אנכי לתזוזה | int goRow, int goCol)             |
| (1: למטה; 0: ללא תזוזה           |                                   |
| אנכית;]{dir="rtl"} -1[: למעלה)   |                                   |
| וכיוון אופקי לתזוזה (1: ימינה;   |                                   |
| 0: ללא תזוזה אופקית;]{dir="rtl"} |                                   |
| -1[: שמאלה), ומחזירה רשימה שבה   |                                   |
| כלל הדסקיות שיתווספו לשחקן       |                                   |
| מהכיוון הנתון אם ישחק את תורו    |                                   |
| למשבצת הנתונה (או]{dir="rtl"}    |                                   |
| null [אם אין כאלו).]{dir="rtl"}  |                                   |
|                                  |                                   |
| [הפעולה מתחילה לעבור כל המשבצות  |                                   |
| בכיוון הנתון החל מהמשבצת הראשונה |                                   |
| בכיוון זה. אם המשבצת הראשונה     |                                   |
| בכיוון בתוך הלוח והיא של היריב,  |                                   |
| הפעולה תמשיך את הבדיקה. אם לא,   |                                   |
| תחזיר]{dir="rtl"} null[. בהמשך   |                                   |
| הבדיקה, עבור כל משבצת (כולל      |                                   |
| הראשונה בכיוון), אם המשבצת היא   |                                   |
| של השחקן הנוכחי, זה אומר שהוא    |                                   |
| כלא את משבצות היריב עד אליה בין  |                                   |
| המשבצת הנתונה למשבצת הנוכחית,    |                                   |
| ולכן הפעולה תחזיר את רשימת       |                                   |
| הדסקיות שעברה עליה הפעולה עד     |                                   |
| עכשיו; אם המשבצת ריקה, זה אומר   |                                   |
| שהשחקן לא כלא דסקות יריב בכיוון  |                                   |
| זה ולכן תחזיר הפעולה]{dir="rtl"} |                                   |
| null[; אחרת (על המשבצת דסקית של  |                                   |
| היריב), הפעולה תוסיף משבצת זו    |                                   |
| לרשימת התוצאה, ותמשיך להתקדם     |                                   |
| בכיוון הנתון. אם הפעולה התקדמה   |                                   |
| עד שהגיעה לקצה הלוח ועדיין לא    |                                   |
| הגיעה למשבצת בבעלות השחקן הנוכחי |                                   |
| (השחקן לא כלא דסקיות יריב בכיוון |                                   |
| זה), תחזיר הפעולה]{dir="rtl"}    |                                   |
| null[.]{dir="rtl"}               |                                   |
+----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת אינדקסים של     | public boolean isInBoard(int row, |
| שורה ועמודה ומחזירה \"אמת\" אם   | int col)                          |
| הן מייצגים משבצת בגבולות (בתוך)  |                                   |
| הלוח או \"שקר\"                  |                                   |
| אחרת.]{dir="rtl"}                |                                   |
+----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת כפרמטר אורך צלע | public void initBoard(int         |
| של לוח מטריצת המשחק ומאתחלת את   | boardSize)                        |
| מטריצת המשחק בהתאם לגודל הנתון   |                                   |
| (רק יצירת מופע של                |                                   |
| המטריצה).]{dir="rtl"}            |                                   |
+----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת כפרמטר מטריצת   | public void                       |
| לוח משחק ומעתיקה                 | copyBoard(Piece\[\]\[\] board)    |
| (]{dir="rtl"}deep copy[) את לוח  |                                   |
| המשחק הנוכחי שיהיה זהה ללוח      |                                   |
| הנתון.]{dir="rtl"}               |                                   |
+----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת כפרמטר אוסף של  | public void                       |
| משבצות ריקות ומוסיפה את כל       | addAllEmpties(Collection\<String> |
| משבצות אלו לאוסף המשבצות הריקות  | emptiesToAdd)                     |
| לבדיקה הנוכחי.]{dir="rtl"}       |                                   |
+----------------------------------+-----------------------------------+
| [פעולה אשר מנקה את אוסף המשבצות  | public void clearEmptyToCheck()   |
| הריקות לבדיקה.]{dir="rtl"}       |                                   |
+----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת כפרמטרים דסקית  | public void putPieceAmount(Piece  |
| של שחקן וכמות של דסקיות, ומעדכנת | player, int amountToPut)          |
| את כמות הדסקיות של אותו שחקן     |                                   |
| לכמות הנתונה.]{dir="rtl"}        |                                   |
+----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת כפרמטרים דסקית  | public void addPieceAmount(Piece  |
| של שחקן וכמות של דסקיות, ומוסיפה | player, int amountToAdd)          |
| את הכמות שהתקבלה לכמות הדסקיות   |                                   |
| של השחקן.]{dir="rtl"}            |                                   |
+----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת כפרמטרים דסקית  | private void                      |
| של שחקן וכמות של דסקיות, ומחסירה | subtractPieceAmount(Piece player, |
| את הכמות שהתקבלה מכמות הדסקיות   | int amountToSubtract)             |
| של השחקן.]{dir="rtl"}            |                                   |
+----------------------------------+-----------------------------------+
| [פעולה אשר מנקה את כמויות        | public void clearPieceAmounts()   |
| הדסקיות של השחקנים.]{dir="rtl"}  |                                   |
+----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת כפרמטר שחקן     | public int getPieceAmount(Piece   |
| ומחזירה את כמות הדסקיות          | player)                           |
| (הנוכחית) שיש לשחקן              |                                   |
| זה.]{dir="rtl"}                  |                                   |
+----------------------------------+-----------------------------------+
| [פעולה אשר מחזירה העתק של מטריצת | public Piece\[\]\[\]              |
| לוח המשחק.]{dir="rtl"}           | getBoardClone()                   |
+----------------------------------+-----------------------------------+
| [פעולה אשר מחזירה הפנייה (מצביע) | public Piece\[\]\[\]              |
| למטריצת לוח המשחק.]{dir="rtl"}   | getBoardRaw()                     |
+----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת כפרמטר דסקית של | public void setSquare(Piece       |
| שחקן, אינדקס של שורה ושל עמודה   | piece, int row, int col)          |
| המייצגים משבצת על לוח המשחק,     |                                   |
| ומעדכנת את משבצת זו כך שתהיה     |                                   |
| בבעלות השחקן שהתקבל.]{dir="rtl"} |                                   |
+----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת כפרמטרים        | public Piece getSquare(int row,   |
| אינדקסים של שורה ועמודה המייצגים | int col)                          |
| משבצת בלוח המשחק ומחזירה את      |                                   |
| דסקית השחקן שמשבצת זו            |                                   |
| בבעלותו.]{dir="rtl"}             |                                   |
+----------------------------------+-----------------------------------+
| [פעולה אשר מחזירה העתק של אוסף   | public Collection\<String>        |
| המשבצות הריקות                   | getEmptyToCheckClone()            |
| לבדיקה.]{dir="rtl"}              |                                   |
+----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת כפרמטרים        | public boolean isSquareEmpty(int  |
| אינדקסים של שורה ועמודה המייצגים | row, int col)                     |
| משבצת בלוח המשחק ומחזירה \"אמת\" |                                   |
| אם משבצת זו \"ריקה\" (לא בבעלות  |                                   |
| אף שחקן), או \"שקר\"             |                                   |
| אחרת.]{dir="rtl"}                |                                   |
+----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת כפרמטר מחרוזת   | public void addEmpty(String       |
| המייצגת תג של משבצת ריקה על הלוח | newEmptyToCheck)                  |
| ומוסיפה אותה לאוסף המשבצות       |                                   |
| הריקות לבדיקה.]{dir="rtl"}       |                                   |
+----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת כפרמטר מחרוזת   | public void removeEmpty(String    |
| המייצגת תג של משבצת ריקה על הלוח | emptyToRemove)                    |
| ומחסירה אותה מאוסף המשבצות       |                                   |
| הריקות לבדיקה.]{dir="rtl"}       |                                   |
+----------------------------------+-----------------------------------+
| [פעולה סטטית אשר מקבלת כפרמטר    | private static Piece\[\]\[\]      |
| מטריצה המייצגת לוח משחק ומחזירה  | cloneBoard(Piece\[\]\[\] board)   |
| העתק (]{dir="rtl"}deep copy[) של |                                   |
| מטריצה זאת.]{dir="rtl"}          |                                   |
+----------------------------------+-----------------------------------+
| [פעולה סטטית אשר מקבלת כפרמטר    | private static                    |
| אוסף של משבצות ריקות לבדיקה      | Collection\<String>               |
| ומחזירה העתק (]{dir="rtl"}deep   | clon                              |
| copy[) של אוסף זה.]{dir="rtl"}   | eEmptyToCheck(Collection\<String> |
|                                  | emptyToCheck)                     |
+----------------------------------+-----------------------------------+

**[\
]{dir="rtl"}**

[המחשת המשבצות הריקות המיועדות לבדיקה]{dir="rtl"}

![](media/image2.png){width="2.0861111111111112in"
height="2.095138888888889in"}![](media/image32.png){width="3.8168307086614175in"
height="3.790277777777778in"}

[\
]{dir="rtl"}

[]{#_Toc76826936 .anchor}GameController

[המחלקה מהווה את ה-]{dir="rtl"} Controller [של האפליקציה (לפי מודל
ה]{dir="rtl"}MVC[). היא אחראית על ניהול המשחק. היא מנהלת את תורות המשחק,
את השחקנים, היא אחראית על מנגנון ה-]{dir="rtl"} redo [וה-]{dir="rtl"}
undo [(ביטול תור ששוחק או ביצוע שלו שוב), והיא מנהלת את המחשב ומנגנון
ה-]{dir="rtl"}AI [המנחה אותו בחישוביו לביצוע תורו (בחרתי לממש לצורך זה
את אלגוריתם ה-]{dir="rtl"} minimax[). היא אחראית לתיווך בין מודל
האפליקציה לבין שאר האפליקציה ומנהלת את רמות המשחק.]{dir="rtl"}

[]{#_Toc76826937 .anchor}GameController.Difficulty

[מחלקת **ה- **]{dir="rtl"}**Enum** [אשר מייצגת רמת משחק. היא גם מכילה את
העומק הרלוונטי לאלגוריתם ה]{dir="rtl"}minimax[.]{dir="rtl"}

**[ערכי מחלקת ה-]{dir="rtl"} Enum**

  ----------------------------------- -----------------------------------
  [רמת קושי המייצגת משחק של שני בני   *LOCAL*
  אדם (לא מול מחשב).]{dir="rtl"}      

  [רמת קושי המייצגת משחק קל (מול      *EASY*
  המחשב).]{dir="rtl"}                 

  [רמת קושי המייצגת בינוני (מול       *MEDIUM*
  המחשב).]{dir="rtl"}                 

  [רמת קושי המייצגת משחק קשה (מול     *HARD*
  המחשב).]{dir="rtl"}                 

  [רמת קושי המייצגת משחק קשה מאוד     *EXTREME*
  (מול המחשב).]{dir="rtl"}            
  ----------------------------------- -----------------------------------

**[תכונות מחלקת ה-]{dir="rtl"} Enum**

  ----------------------------------- -----------------------------------
  [עומק אלגוריתם ה-]{dir="rtl"}       private final int depth
  minimax [(כמה תורות קדימה ייקח      
  המחשב בחשבון בחישוביו).]{dir="rtl"} 

  ----------------------------------- -----------------------------------

**[פעולות מחלקת ה-]{dir="rtl"} Enum**

+-----------------------------------+-----------------------------------+
| **[הפעולה הבונה של עצם            | Difficulty(int depth)             |
| ה-]{dir="rtl"} Enum[. מקבלת       |                                   |
| כפרמטר את עומק אלגוריתם           |                                   |
| ה-]{dir="rtl"}                    |                                   |
| minimax[.]{dir="rtl"}**           |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המחזירה \"אמת\" אם רמת     | public boolean isVsComputer()     |
| הקושי של המשחק מייצגת משחק מול    |                                   |
| המחשב, או \"שקר\"                 |                                   |
| אחרת.]{dir="rtl"}                 |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר משמשת להשוואה בין העצם | public int                        |
| הנוכחי לעצם אחר שמועבר כפרמטר. אם | compareByLevel(Difficulty other)  |
| רמת הקושי הנוכחית יותר קשה מרמת   |                                   |
| הקושי שהועברה כפרמטר, הפעולה      |                                   |
| תחזיר מספר חיובי; אם רמת הקושי    |                                   |
| הנוכחית יותר קלה מזו שהועברה      |                                   |
| כפרמטר, הפעולה תחזיר מספר שלילי;  |                                   |
| אם רמות הקושי זהות- תחזיר הפעולה  |                                   |
| 0.]{dir="rtl"}                    |                                   |
|                                   |                                   |
| [לא דרסתי את פעולת]{dir="rtl"}    |                                   |
| compareTo [מפני שעבור עצמים       |                                   |
| מסוג]{dir="rtl"} Enum [לא ניתן    |                                   |
| לעשות זאת. זאת מפני שחתימת הפעולה |                                   |
| הזו אצל מחלקת העל                 |                                   |
| כוללת]{dir="rtl"} final[, כלומר   |                                   |
| אינה ניתנת לדריסה. פעולת          |                                   |
| ה-]{dir="rtl"} compareTo [של      |                                   |
| עצמי]{dir="rtl"} Enum [משווה אותם |                                   |
| על בסיס המספר הסידורי שלהם        |                                   |
| (]{dir="rtl"}ordinal value[),     |                                   |
| דהיינו על בסיס סדר כתיבתם         |                                   |
| בקוד.]{dir="rtl"}                 |                                   |
+-----------------------------------+-----------------------------------+
| [דריסת פעולת ה-]{dir="rtl"}       | \@Override\                       |
| toString [של העצם. מחזירה מחרוזת  | public String toString()          |
| המייצגת באופן קריא את רמת         |                                   |
| הקושי.]{dir="rtl"}                |                                   |
+-----------------------------------+-----------------------------------+

**[תכונות המחלקה (]{dir="rtl"}GameController[)]{dir="rtl"}**

+-----------------------------------+-----------------------------------+
| [תכונה סטטית קבועה המייצגת את     | public static final long          |
| הערך התחלתי לממוצע השחקנים לשחק   | *INIT_AVG*                        |
| את תורם (מקבלת את ערכה מהתכונה של |                                   |
| מחלקת המודל כך שהגישה אליה היא    |                                   |
| ממחלקה זו ולא מהמודל, כמו התכונות |                                   |
| ההתחלתיות הבאות                   |                                   |
| להלן).]{dir="rtl"}                |                                   |
+-----------------------------------+-----------------------------------+
| [תכונה סטטית קבועה המייצגת את     | public static final int           |
| הערך ההתחלתי למספר התורות שעברו   | *INIT_TURNS*                      |
| מתחילת המשחק.]{dir="rtl"}         |                                   |
+-----------------------------------+-----------------------------------+
| [תכונה סטטית קבועה המייצגת את     | public static final Piece         |
| הערך ההתחלתי לדסקית מנצח          | *INIT_WINNER*                     |
| המשחק.]{dir="rtl"}                |                                   |
+-----------------------------------+-----------------------------------+
| [תכונה סטטית קבועה המייצגת את     | public static final boolean       |
| הערך ההתחלתי לאם נגמר             | *INIT_GAME_OVER*                  |
| המשחק.]{dir="rtl"}                |                                   |
+-----------------------------------+-----------------------------------+
| [תכונה סטטית קבועה המייצגת את     | public static final Piece\[\]\[\] |
| הערך ההתחלתי למטריצת לוח          | *INIT_BOARD*                      |
| המשחק.]{dir="rtl"}                |                                   |
+-----------------------------------+-----------------------------------+
| [תכונה סטטית קבועה המייצגת את     | public static final               |
| הערך ההתחלתי למשבצות הריקות       | Collection\<String>               |
| לבדיקה (להסבר מפורט יותר ראו את   | *INIT_EMPTY_TO_CHECK*             |
| תיעוד מחלקת]{dir="rtl"}           |                                   |
| BoardState [שלעיל).]{dir="rtl"}   |                                   |
+-----------------------------------+-----------------------------------+
| [תכונה סטטית קבועה המייצגת את     | public static final int           |
| הערך ההתחלתי (ברירת המחדל) למספר  | *INIT_PIECE_COUNT*                |
| הדסקיות ההתחלתי של כל             |                                   |
| שחקן.]{dir="rtl"}                 |                                   |
+-----------------------------------+-----------------------------------+
| [עצם המודל של המשחק, \"עליו\"     | private final BoardModel model    |
| מתבצע המשחק.]{dir="rtl"}          |                                   |
+-----------------------------------+-----------------------------------+
| [מצב המשחק ברירת המחדל (לאתחול    | private final LiveGameDetails     |
| משחקים חדשים).]{dir="rtl"}        | defaultGameState                  |
+-----------------------------------+-----------------------------------+
| [מחסנית ששומרת את מצבי המשחקים    | private final                     |
| האחרונים שהיו (לתמיכה             | Stack\<LiveGameDetails>           |
| ב-]{dir="rtl"}                    | lastStates                        |
| undo[).]{dir="rtl"}               |                                   |
+-----------------------------------+-----------------------------------+
| [מחסנית ששומרת את מצבי המשחקים    | private final                     |
| האחרונים שבוטלו (לתמיכה           | Stack\<LiveGameDetails>           |
| ב-]{dir="rtl"}                    | undoneStates                      |
| redo[).]{dir="rtl"}               |                                   |
+-----------------------------------+-----------------------------------+
| [מצב המשחק הנוכחי.]{dir="rtl"}    | private LiveGameDetails           |
|                                   | currentGameState                  |
+-----------------------------------+-----------------------------------+
| [השחקן הנוכחי.]{dir="rtl"}        | private Piece currentPlayer       |
+-----------------------------------+-----------------------------------+
| [השחקן הבא.]{dir="rtl"}           | private Piece nextPlayer          |
+-----------------------------------+-----------------------------------+
| [השחקן הראשון.]{dir="rtl"}        | private Piece firstPlayer         |
+-----------------------------------+-----------------------------------+
| [השחקן השני.]{dir="rtl"}          | private Piece secondPlayer        |
+-----------------------------------+-----------------------------------+
| [הערך הכי גבוה למשתנה             | private static final int          |
| מסוג]{dir="rtl"}                  | *MAX_VAL*                         |
| int[.]{dir="rtl"}                 |                                   |
+-----------------------------------+-----------------------------------+
| [הערך הכי נמוך למשתנה             | private static final int          |
| מסוג]{dir="rtl"}                  | *MIN_VAL*                         |
| int[.]{dir="rtl"}                 |                                   |
+-----------------------------------+-----------------------------------+
| [הזמן המקסימלי, באלפי שניות,      | private static final long         |
| לחישוב אלגוריתם המינימקס עבור תור | *MAX_TURN_CALC*                   |
| נתון.]{dir="rtl"}                 |                                   |
+-----------------------------------+-----------------------------------+
| [הבונוס, לפי אלגוריתם             | private static final int          |
| ה-]{dir="rtl"} minimax[, שיינתן   | *CORNER_BONUS*                    |
| למצב משחק בו יש לשחקן משבצת פינה  |                                   |
| (ראו הסבר על האלגוריתם            |                                   |
| בהמשך).]{dir="rtl"}               |                                   |
+-----------------------------------+-----------------------------------+
| [המגרעה שתרד ממצב משחק עבור משבצת | private static final int          |
| צמודה לפינה (אופקית או            | *ADJACENT_SIDE*                   |
| אנכית).]{dir="rtl"}               |                                   |
+-----------------------------------+-----------------------------------+
| [המגרעה שתרד ממצב משחק עבור משבצת | private static final int          |
| צמודה לפינה אלכסונית.]{dir="rtl"} | *ADJACENT_DIAGONAL*               |
+-----------------------------------+-----------------------------------+
| [מעין מילון בצורת מטריצה, אשר     | private final int\[\]\[\]         |
| מאפשר מעבר יעיל/ריצה מהירה על     | cornersAdjacent                   |
| ארבעת פינות המשחק, על המיקומים    |                                   |
| שלהן ועל המיקום המתאים להתקדם כדי |                                   |
| להגיע למשבצות                     |                                   |
| הצמודות.]{dir="rtl"}              |                                   |
|                                   |                                   |
| [השורות במטריצת המילון מייצגות אם |                                   |
| האינדקס הנוכחי הוא בתחילת המטריצה |                                   |
| (0) או קצה המטריצה                |                                   |
| (1).]{dir="rtl"}                  |                                   |
|                                   |                                   |
| [העמודה הראשונה במטריצה מייצגת את |                                   |
| האינדקס הנוכחי (בהתאם, בשורה      |                                   |
| הראשונה היא תמיד תהיה 0 ובשורה    |                                   |
| השנייה היא תהיה קצה הלוח -- אורך  |                                   |
| הצלע פחות אחד).]{dir="rtl"}       |                                   |
|                                   |                                   |
| [העמודה השנייה מייצגת את המספר    |                                   |
| להוסיף לאינדקס כדי לקבל את המשבצת |                                   |
| הסמוכה (אם אנו במשבצת תחילת לוח,  |                                   |
| כלומר בשורה הראשונה, נרצה להוסיף  |                                   |
| תמיד 1 כדי להגיע לאינדקס משבצת    |                                   |
| הסמוכה- 1 מייצג תזוזה ימינה או    |                                   |
| למטה). אם אנו במשבצת קצה הלוח,    |                                   |
| כלומר בשורה השנייה, נרצה להחסיר   |                                   |
| אחד- תזוזה למעלה או               |                                   |
| שמאלה).]{dir="rtl"}               |                                   |
|                                   |                                   |
| [כך, כדי לעבור על הקצוות ועל      |                                   |
| המשבצות הסמוכות להן, נעבור        |                                   |
| בלולאת]{dir="rtl"} for each       |                                   |
| [מקוננת על השורות (פעמיים)        |                                   |
| כך:]{dir="rtl"}                   |                                   |
|                                   |                                   |
| for (int\[\] cornerRow:           |                                   |
| this.cornersAdjacent) {\          |                                   |
| int row = cornerRow\[0\];\        |                                   |
| \                                 |                                   |
| for (int\[\] cornerCol :          |                                   |
| this.cornersAdjacent) {\          |                                   |
| int col = cornerCol\[0\];         |                                   |
|                                   |                                   |
| [נחלץ את השורה ואת העמודה         |                                   |
| המתאימות מהעמודה הראשונה כך       |                                   |
| שבסופו של דבר נעבור               |                                   |
| על:]{dir="rtl"}                   |                                   |
|                                   |                                   |
| (0;0), (0, EDGE), (EDGE, 0),      |                                   |
| (EDGE, EDGE)                      |                                   |
|                                   |                                   |
| [כדי להתקדם למשבצת סמוכה, ניגש    |                                   |
| לעמודה השנייה, כך שעבור 0 נקבל 1, |                                   |
| ועבור קצה הלוח נקבל]{dir="rtl"}   |                                   |
| -1[. נקרא לערך זה]{dir="rtl"} X[. |                                   |
| עבור האופקית הסמוכה               |                                   |
| נוסיף]{dir="rtl"} X [רק לעמודה    |                                   |
| הנוכחית, עבור האנכית הסמוכה       |                                   |
| נוסיף]{dir="rtl"} X [רק לשורה     |                                   |
| הנוכחית. עבור האלכסון הסמוך       |                                   |
| נוסיף]{dir="rtl"} X [גם לעמודה    |                                   |
| הנוכחית וגם לשורה                 |                                   |
| הנוכחית.]{dir="rtl"}              |                                   |
+-----------------------------------+-----------------------------------+
| [רמת הקושי של המשחק (ראו תיעוד    | private Difficulty difficulty     |
| ה-]{dir="rtl"} enum               |                                   |
| [לעיל).]{dir="rtl"}               |                                   |
+-----------------------------------+-----------------------------------+
| [האם המשחק הוא מול                | private boolean isVsComputer      |
| המחשב.]{dir="rtl"}                |                                   |
+-----------------------------------+-----------------------------------+
| [האם התור הנוכחי הוא של בן        | private boolean isHumanTurn       |
| אדם.]{dir="rtl"}                  |                                   |
+-----------------------------------+-----------------------------------+
| [ה-]{dir="rtl"} maximizer [עבור   | private Piece maximizer           |
| חישובי המינימקס.]{dir="rtl"}      |                                   |
+-----------------------------------+-----------------------------------+
| [ה-]{dir="rtl"} minimizer [עבור   | private Piece minimizer           |
| חישובי המינימקס.]{dir="rtl"}      |                                   |
+-----------------------------------+-----------------------------------+
| [מחרוזת המייצגת את התג של המשבצת  | private String computerMove       |
| שהמחשב בחר לאור חישובי            |                                   |
| המינימקס.]{dir="rtl"}             |                                   |
+-----------------------------------+-----------------------------------+
| [משתנה ללקיחת חתימת הזמן בתחילת   | private long minimaxStart         |
| חישובי המינימקס כדי להגביל את זמן |                                   |
| החישוב של האלגוריתם.]{dir="rtl"}  |                                   |
+-----------------------------------+-----------------------------------+

**[פעולות המחלקה]{dir="rtl"}**

+-----------------------------------+-----------------------------------+
| **[הפעולה הבונה של המחלקה. מקבלת  | public GameController(Piece       |
| כפרמטרים את דסקית השחקן הראשון,   | firstPlayer, Piece secondPlayer,  |
| דסקית השחקן השני, מספר הדסקיות    | int startSize, int boardSize,     |
| ההתחלתי של השחקנים, אורך צלע      | Piece startPlayer, Difficulty     |
| מטריצת לוח המשחק, השחקן הראשון    | difficulty, boolean isHumanTurn,  |
| שמתחיל, רמת הקושי של המשחק, האם   | LiveGameDetails lastGameState)    |
| התור הנוכחי של בן אדם ומצב משחק   |                                   |
| אחרון לטעון (]{dir="rtl"}null [אם |                                   |
| להתחיל משחק חדש).]{dir="rtl"}**   |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המתחילה משחק חדש לפי מצב   | public void newGame()             |
| המשחק ברירת המחדל.]{dir="rtl"}    |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת כפרמטר מצב משחק  | public void                       |
| וטוענת אותו.]{dir="rtl"}          | loadGame(LiveGameDetails          |
|                                   | gameDetails)                      |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מבטלת את הפעולה        | public void undo()                |
| האחרונה שנעשתה.]{dir="rtl"}       |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מבצעת שוב את הפעולה    | public void redo()                |
| האחרונה שבוטלה.]{dir="rtl"}       |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר טוענת את מצב המשחק     | public void loadGame()            |
| הנוכחי (לאחר שעודכן).]{dir="rtl"} |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה הכופה על המשחק להסתיים     | public void forceFinish()         |
| במצבו הקיים (דוגמא לשימוש בה הוא  |                                   |
| כאשר נגמר הזמן שהוקצב             |                                   |
| למשחק).]{dir="rtl"}               |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת כפרמטר את הרשימה | public void nextTurn(List\<Cell>  |
| המייצגת את הדסקיות החדשות         | toChange)                         |
| שיתווספו לשחקן לאור המשבצת שבחר   |                                   |
| לשחק אליה את תורו, ומשחקת         |                                   |
| אותו.]{dir="rtl"}                 |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת כפרמטר מילון     | public String                     |
| המייצג את המשבצות האפשריות לתור   | computerTurn(HashMap\<String,     |
| הנוכחי ומחזירה מחרוזת המייצגת את  | List\<Cell>\> availableChoices)   |
| תג המשבצת שבחר המחשב לשחק אליה את |                                   |
| תורו.]{dir="rtl"}                 |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת כפרמטר מצב משחק, | private int eval(BoardState       |
| מילון המייצג את המשבצות האפשריות  | boardState, HashMap\<String,      |
| לשחקן הנוכחי ומשתנה בוליאני       | List\<Cell>\> availableChoices,   |
| המייצג האם התור הנוכחי הוא של     | boolean isMaximizer)              |
| ה-]{dir="rtl"} maximizer[,        |                                   |
| ומחזירה מספר המייצג את הערכת מצב  |                                   |
| המשחק בהתאם לאלגוריתם המינימקס:   |                                   |
| ככל שהמספר יותר גדול מצב המשחק    |                                   |
| יותר טוב ל-]{dir="rtl"}           |                                   |
| maximizer[, וככל שהוא יותר נמוך   |                                   |
| הוא יותר טוב ל-]{dir="rtl"}       |                                   |
| minimizer[.]{dir="rtl"}           |                                   |
|                                   |                                   |
| [הפעולה מחשבת את ערך מצב המשחק    |                                   |
| בהתאם למשקלים הקבועים מראש בתור   |                                   |
| תכונות סטטיות קבועות של המחלקה.   |                                   |
| היא מוסיפה בונוסים עבור קצוות     |                                   |
| שבבעלות השחקן, גורעת קנסות עבור   |                                   |
| משבצות סמוכות לקצוות, וכוללת      |                                   |
| בחישוב את מספר המשבצות האפשריות   |                                   |
| לשיחוק התור (שכן מספר האפשרויות   |                                   |
| זהו פרמטר חשוב בקביעת מצב המשחק   |                                   |
| ובשלבי משחק מוקדמים הוא היחיד     |                                   |
| שקובע).]{dir="rtl"}               |                                   |
|                                   |                                   |
| [הסיבה שחישוב הלוח שעשיתי אינו    |                                   |
| מטריצה אשר לכל משבצת בה משקל      |                                   |
| המתאים לה היא שבחרתי שגודל לוח    |                                   |
| המשחק יהיה דינמי ולכן אי אפשר     |                                   |
| להגדיר מטריצת משקלים קבועה לכל    |                                   |
| משבצת. כך האלגוריתם שלי מתאים לכל |                                   |
| גודל לוח.]{dir="rtl"}             |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה המקבלת דסקית שחקן הנמצאת   | private int getSquareValue(Piece  |
| על משבצת בלוח ומחזירה בהתאם פרמטר | square)                           |
| להכפיל בו את הנקודות המתאימות     |                                   |
| למצב המשבצת, כלומר 1 אם היא של    |                                   |
| ה-]{dir="rtl"}                    |                                   |
| maximizer[,]{dir="rtl"} -1 [אם    |                                   |
| היא של ה-]{dir="rtl"} minimizer   |                                   |
| [ו- 0 אם היא לא בבעלות אף         |                                   |
| אחד.]{dir="rtl"}                  |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת כפרמטר מצב לוח,  | private HashMap\<String,          |
| והאם השחקן הנוכחי הוא             | List\<Cell>\>                     |
| ה-]{dir="rtl"} maximizer[,        | otherChoices(BoardState           |
| ומחזירה את המשבצות האפשריות לתור  | boardState, boolean isMaximizer)  |
| הבא של השחקן הבא (לא              |                                   |
| הנוכחי).]{dir="rtl"}              |                                   |
+-----------------------------------+-----------------------------------+
| [הפעולה המרכזית של אלגוריתם       | private int minimax(int depth,    |
| המינימקס. מקבלת כפרמטרים את עומק  | boolean isMaximizer, BoardState   |
| האלגוריתם, האם השחקן הנוכחי הוא   | boardState, HashMap\<String,      |
| ה-]{dir="rtl"} maximizer[, מצב    | List\<Cell>\> availableChoices,   |
| הלוח הנוכחי, מילון המייצג את      | int alpha, int beta, boolean      |
| המשבצות האפשריות לשיחוק התור,     | isSecondCheck)                    |
| האלפה, הביתא והאם זוהי פעם שנייה  |                                   |
| לבדיקת אותו תור, ומחזירה (באופן   |                                   |
| רקורסיבי) את ערך מצב הלוח שנבחר   |                                   |
| על ידי השחקן הנוכחי (בהנחה שמשחק  |                                   |
| את התור שהכי כדאי לו- הנחת        |                                   |
| האלגוריתם).]{dir="rtl"}           |                                   |
|                                   |                                   |
| [לתיעוד מפורט של הפעולה ראו המשך  |                                   |
| תיעוד המחלקה.]{dir="rtl"}         |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר בונה עצם המייצג את מצב | private LiveGameDetails           |
| המשחק הנוכחי ומחזירה              | createCurrentState()              |
| אותו.]{dir="rtl"}                 |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מחזירה \"אמת\" אם התור | public boolean isHumanTurn()      |
| הנוכחי או תור של בן אדם או        |                                   |
| \"שקר\" אחרת.]{dir="rtl"}         |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מחזירה \"אמת\" אם      | public boolean isUndoPossible()   |
| ביטול פעולה אחרונה אפשרי או       |                                   |
| \"שקר\" אחרת.]{dir="rtl"}         |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מחזירה \"אמת\" אם      | public boolean isRedoPossible()   |
| ביצוע חוזר של פעולה שהתבטלה אפשרי |                                   |
| או \"שקר\" אחרת.]{dir="rtl"}      |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מחזירה \"אמת\" אם אמת  | public boolean isStateChanged()   |
| אם מצב המשחק השתנה מאז שנטען או   |                                   |
| \"שקר\" אחרת.]{dir="rtl"}         |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת כפרמטרים         | public Piece                      |
| אינדקסים המייצגים משבצת על הלוח   | getPieceByLocation(int row, int   |
| ומחזירים את הדסקית של השחקן (ברגע | col)                              |
| הנתון) שעל משבצת זו.]{dir="rtl"}  |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מחזירה מילון המייצג את | public HashMap\<String,           |
| דסקיות ה\"רמז\" ואת הדסקיות       | List\<Cell>\> getValidChoices()   |
| ה\"פוטנציאליות\" אשר מתאימות להן, |                                   |
| דהיינו, מילון המייצג את המשבצות   |                                   |
| האפשריות לתור של השחק             |                                   |
| הנוכחי.]{dir="rtl"}               |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מחזירה את דסקית מנצח   | public Piece getWinner()          |
| המשחק (\"הנוכחי\").]{dir="rtl"}   |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת כפרמטר דסקית של  | private int getTurnsCount(Piece   |
| שחקן ומחזירה את מספר התורות ששיחק | player)                           |
| מאז שהתחיל המשחק.]{dir="rtl"}     |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מחזירה את מספר התורות  | public int getTurnsCount()        |
| הכללי ששוחקו מאז שהתחיל           |                                   |
| המשחק.]{dir="rtl"}                |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מחזירה \"אמת\" אם      | public boolean isGameOver()       |
| המשחק הסתיים, או \"שקר\"          |                                   |
| אחרת.]{dir="rtl"}                 |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת כפרמטר דסקית של  | public int getPieceAmount(Piece   |
| שחקן ומחזירה את מספר הדסקיות      | player)                           |
| הנוכחי שיש לו.]{dir="rtl"}        |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת כפרמטר דסקית של  | public long getTurnAvg(Piece      |
| שחקן ומחזירה את ממוצע הזמן הנוכחי | player)                           |
| שלוקח לו לשחק את                  |                                   |
| תורו.]{dir="rtl"}                 |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מחזירה העתק של מטריצת  | public Piece\[\]\[\]              |
| לוח המשחק הנוכחי.]{dir="rtl"}     | getBoardClone()                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מחזירה העתק של אוסף    | public Collection\<String>        |
| המשבצות הריקות                    | getEmptyToCheckClone()            |
| לבדיקה.]{dir="rtl"}               |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מחזירה את דסקית השחקן  | public Piece getCurrentPlayer()   |
| הנוכחי.]{dir="rtl"}               |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מחזירה את דסקית השחקן  | public Piece getFirstPlayer()     |
| הראשון.]{dir="rtl"}               |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מחזירה את דסקית השחקן  | public Piece getSecondPlayer()    |
| השני.]{dir="rtl"}                 |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מחזירה את מצב המשחק    | public LiveGameDetails            |
| הנוכחי.]{dir="rtl"}               | getCurrentGameState()             |
+-----------------------------------+-----------------------------------+

**[[\
]{.ul}]{dir="rtl"}**

[]{#_Toc76826938 .anchor}[תרשים אלגוריתם המינימקס]{dir="rtl"}

![](media/image33.png){width="2.3333333333333335in"
height="2.1041666666666665in"}![](media/image34.jpeg){width="2.763888888888889in"
height="1.9791666666666667in"}![](media/image35.jpeg){width="5.263888888888889in"
height="2.7708333333333335in"}

[\
]{dir="rtl"}

[]{#_Toc76826939 .anchor}[פירוט פעולת אלגוריתם המינימקס]{dir="rtl"}

[לנוחיות אצרף גם את תיעוד ה-]{dir="rtl"} JavaDoc [של הפעולה.]{dir="rtl"}

*/\*\*\
\* A recursive method that receives as parameters the depth of the
minimax run (decremented\
\* every deeper layer in the tree until 0); a boolean that indicates
whether the current\
\* minimax run is of the maximizer or the minimizer; an object that
represents a board state;\
\* a dictionary (HashMap) that holds the available choices of the
current minimax player;\
\* the alpha (current highest guaranteed value); the beta (current
lowest guaranteed value);\
\* and a boolean that indicates whether the method was called again
after a player had no\
\* available choices so that the other player be checked as well to
determine if the\
\* game is indeed finished (or a player had a second turn). It considers
all the possible\
\* game outcomes of all the possible moves in the given depth or until
run-time limit is\
\* reached, and based on the current player determines what move will he
make (based on\
\* the assumption that every player strives to play the best possible
move available). Then,\
\* it updates the computer move (static) to be the best possible choice
of a move of the\
\* maximizer.\
\*\
\* **\@param** depth the depth of the minimax run (decremented every
deeper layer in the tree\
\* until 0, and then stops the minimax from going deeper).\
\* **\@param** isMaximizer true if the current checked player is the
maximizer, or false otherwise.\
\* **\@param** boardState an object that represents a board state.\
\* **\@param** availableChoices a dictionary (HashMap) that represents
the available choices\
\* of the current player (keys) and their outcomes (values).\
\* **\@param** alpha the current highest guaranteed value of the board
(best for maximizer).\
\* **\@param** beta the current lowest guaranteed value of the board
(best for minimizer).\
\* **\@param** isSecondCheck true if the method was called again after a
player had no available\
\* choices (to check if the game is really over).\
\* **\@return** the value selected by the current player (highest if
maximizer or lowest if\
\* minimizer).\
\*/\
*private int minimax(int depth, boolean isMaximizer,\
BoardState boardState, HashMap\<String, List\<Cell>\> availableChoices,\
int alpha, int beta, boolean isSecondCheck) {\
\
if (availableChoices.size() == 0)

if (isSecondCheck)\
return boardState.getPieceAmount(this.maximizer)\
- boardState.getPieceAmount(this.minimizer);

else\
return minimax(depth, !isMaximizer, boardState,\
otherChoices(boardState, isMaximizer), alpha, beta, true);\
\
if (depth == 0 \|\| *MAX_TURN_CALC* - (System.*currentTimeMillis*() -
this.minimaxStart) \<= 0)

return eval(boardState, availableChoices, isMaximizer);\
\
int bestValue;\
\
if (isMaximizer) {\
bestValue = *MIN_VAL*;

for (String choice : availableChoices.keySet()) {\
BoardState currentState = new BoardState(boardState);\
currentState.updateBoard(Objects.*requireNonNull*(availableChoices.get(choice)),\
this.maximizer, this.minimizer);\
\
int currentValue = minimax(depth - 1, false,\
currentState, currentState.validChoices(\
this.minimizer, this.maximizer), alpha, beta, false);\
\
if (currentValue \> bestValue) {\
bestValue = currentValue;\
\
if (depth == this.difficulty.depth)

this.computerMove = choice;\
}\
\
alpha = Math.*max*(alpha, bestValue);\
if (beta \<= alpha)\
break;\
}\
} else {\
bestValue = *MAX_VAL*;\
\
for (String choice : availableChoices.keySet()) {\
BoardState currentState = new BoardState(boardState);\
currentState.updateBoard(Objects.*requireNonNull*(availableChoices.get(choice)),\
this.minimizer, this.maximizer);\
\
int currentValue = minimax(depth - 1, true,\
currentState, currentState.validChoices(\
this.maximizer, this.minimizer), alpha, beta, false);\
\
if (currentValue \< bestValue) {\
bestValue = currentValue;\
\
if (depth == this.difficulty.depth) // not really needed - safe check\
this.computerMove = choice;\
}\
\
beta = Math.*min*(beta, bestValue);\
if (beta \<= alpha)\
break;\
}\
}\
\
return bestValue;\
}

[\
]{dir="rtl"}

[]{#_Toc76826940 .anchor}GameDetailsComparator

[המחלקה מממשת את הממשק]{dir="rtl"} Comparator\<FinishedGameDetails> [אשר
מאפשרת להשוות בין שני עצמים מסוג]{dir="rtl"} FinishedGameDetails [לפי
פרמטרים שהמשתמש בוחר. מימשתי מחלקה זו כדי לאפשר מיון של רשימה של עצמים
אלו לפי בחירת המשתמש.]{dir="rtl"}

[]{#_Toc76826941 .anchor}GameDetailsComparator.CompareGDType

[מחלקת **ה- **]{dir="rtl"}**Enum** [אשר מייצגת פרמטר לפיו להשוות עצמים
של]{dir="rtl"} FinishedGameDetails[.]{dir="rtl"}

**[ערכי מחלקת ה-]{dir="rtl"} Enum**

  ----------------------------------- -----------------------------------
  [השוואה לפי מזהה המשחק.]{dir="rtl"} *ID*

  [השוואה לפי זמן המשחק שעבר          *TIME*
  מתחילתו.]{dir="rtl"}                

  [השוואה לפי כמות התורות ששוחקו      *TURNS*
  במשחק.]{dir="rtl"}                  

  [השוואה לפי השחקן הראשון            *FIRST_PLAYER*
  במשחק.]{dir="rtl"}                  

  [השוואה לפי השחקן השני              *SECOND_PLAYER*
  במשחק.]{dir="rtl"}                  

  [השוואה לפי מנצח המשחק.]{dir="rtl"} *WINNER*

  [השוואה לפי כמות דסקיות השחקן       *FIRST_PIECES*
  הראשון במשחק.]{dir="rtl"}           

  [השוואה לפי כמות דסקיות השחקן השני  *SECOND_PIECES*
  במשחק.]{dir="rtl"}                  

  [השוואה לפי רמת הקושי של            *DIFFICULTY*
  המשחק.]{dir="rtl"}                  

  [השוואה לפי התאריך בו הסתיים        *DATE*
  המשחק.]{dir="rtl"}                  

  [השוואה לפי ממוצע הזמן שלקח לשחקן   *FIRST_AVERAGE_TIME*
  הראשון במשחק לשחק את                
  תורו.]{dir="rtl"}                   

  [השוואה לפי ממוצע הזמן שלקח לשחקן   *SECOND_AVERAGE_TIME*
  השני במשחק לשחק את                  
  תורו.]{dir="rtl"}                   
  ----------------------------------- -----------------------------------

**[תכונות מחלקת ה-]{dir="rtl"} Enum**

[ל-]{dir="rtl"} Enum [זה אין תכונות.]{dir="rtl"}

**[פעולות מחלקת ה-]{dir="rtl"} Enum**

  ----------------------------------- -----------------------------------
  [דריסת פעולת ה-]{dir="rtl"}         \@Override\
  toString [של העצם. מחזירה מחרוזת    public String toString()
  המייצגת באופן קריא את               
  ההגדרה.]{dir="rtl"}                 

  ----------------------------------- -----------------------------------

**[תכונות המחלקה (]{dir="rtl"}GameDetailsComparator[)]{dir="rtl"}**

  ----------------------------------- -----------------------------------
  [תכונת המחלקה המייצגת את הפרמטר     private CompareGDType compareAttr
  לפיו ההשוואה תתבצע.]{dir="rtl"}     

  [תכונת המחלקה המייצגת אם ההשוואה    private boolean isAscending
  תהיה לפי העצם ה\"גדול\" יותר או     
  ה\"קטן יותר\"- לצורך קביעת סדר      
  המיון.]{dir="rtl"}                  
  ----------------------------------- -----------------------------------

**[פעולות המחלקה]{dir="rtl"}**

  ----------------------------------- -------------------------------------
  **[הפעולה הבונה של המחלקה. היא      public
  מקבלת כפרמטרים את התכונה לפיה       GameDetailsComparator(CompareGDType
  להשוות והאם סדר ההשוואה עולה או     compareAttr, boolean isAscending)
  יורד.]{dir="rtl"}**                 

  [דריסת הפעולה המשוואה בין שני       \@Override\
  עצמים. היא מקבלת כפרמטרים שני עצמים public int
  מסוג]{dir="rtl"}                    compare(FinishedGameDetails gd1,
  FinishedGameDetails [ומחזירה מספר   FinishedGameDetails gd2)
  חיובי אם העצם הראשון \"גדול\"       
  מהשני; מספר שלילי אם העצם הראשון    
  \"קטן\" מהשני; ו-0 אם הם            
  שווים.]{dir="rtl"}                  

  [פעולה אשר מקבלת כפרמטר פרמטר לפיו  public void
  להשוות את העצמים ומעדכנת אותו       setCompareAttr(CompareGDType
  בהתאם.]{dir="rtl"}                  compareAttr)

  [פעולה אשר מקבלת כפרמטר משתנה       public void setAscending(boolean
  בוליאני המייצג האם להשוות בסדר עולה ascending)
  או יורד ומעדכנת בהתאם.]{dir="rtl"}  
  ----------------------------------- -------------------------------------

[\
]{dir="rtl"}

[]{#_Toc76826942 .anchor}GameDetailsAdapter

[המחלקה מהווה מתאם על מנת לאפשר הצגת רשימות של עצמים מסוג]{dir="rtl"}
FinishedGameDetails [בתצוגה. מחלקת המסך]{dir="rtl"} RecordsActivity
[נעזרת בה לצורך הצגת רשימת המשחקים של המשתמש.]{dir="rtl"}

**[תכונות המחלקה]{dir="rtl"}**

  ----------------------------------- -----------------------------------
  [ה-]{dir="rtl"} Context [של המחלקה  private final Context context
  על מנת לאפשר קישור למסך וגישה       
  למשאבים הנדרשים.]{dir="rtl"}        

  [הרשימה שברצוננו לקשר               private final
  לתצוגה.]{dir="rtl"}                 ArrayList\<FinishedGameDetails>
                                      list

  Set [אשר מכיל את האינדקסים של       private final Set\<Integer>
  העצמים המיועדים למחיקה- כדי לאפשר   toDelete
  יעילות]{dir="rtl"}                  
  O(1)[.]{dir="rtl"}                  

  [תכונה המייצגת האם המשתמש כרגע במצב private boolean isDeleteMode
  מחיקה כדי להציג את הרשומות          
  בהתאם.]{dir="rtl"}                  
  ----------------------------------- -----------------------------------

**[פעולות המחלקה]{dir="rtl"}**

+-----------------------------------+-----------------------------------+
| **[הפעולה הבונה של המחלקה. מקבלת  | public GameDetailsAdapter(Context |
| כפרמטרים]{dir="rtl"} Context      | context,                          |
| [ורשימת עצמים מסוג]{dir="rtl"}    | ArrayList\<FinishedGameDetails>   |
| FinishedGameDetails[, ומאתחלת את  | list)                             |
| המתאם בהתאם.]{dir="rtl"}**        |                                   |
+-----------------------------------+-----------------------------------+
| [דריסת הפעולה הנקראת בכל פעם      | \@Override\                       |
| שרשומה חדשה מוצגת על המסך. הדריסה | public View getView(int position, |
| היא לשם עדכונה והצגתה             | \@Nullable View convertView,      |
| בהתאם.]{dir="rtl"}                | \@NonNull ViewGroup parent)       |
+-----------------------------------+-----------------------------------+
| [פעולה סטטית אשר מקבלת            | public static void updateRow(View |
| כפרמטרים]{dir="rtl"} layout [אשר  | rowView, FinishedGameDetails      |
| \"מנופח\" ל-]{dir="rtl"} View     | finishedGameDetails)              |
| [ועצם מסוג]{dir="rtl"}            |                                   |
| FinishedGameDetails[, ומעדכנת     |                                   |
| את]{dir="rtl"} layout [זה בהתאם   |                                   |
| לעצם ולתצוגת רשימה                |                                   |
| מצומצמת.]{dir="rtl"}              |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה סטטית אשר מקבלת            | public static void                |
| כפרמטרים]{dir="rtl"} layout [אשר  | updateExtendedRow(View rowView,   |
| \"מנופח\" ל-]{dir="rtl"} View     | FinishedGameDetails               |
| [ועצם מסוג]{dir="rtl"}            | finishedGameDetails)              |
| FinishedGameDetails[, ומעדכנת     |                                   |
| את]{dir="rtl"} layout [זה בהתאם   |                                   |
| לעצם ולתצוגת רשימה                |                                   |
| מורחבת.]{dir="rtl"}               |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה סטטית אשר מקבלת כפרמטר     | public static int                 |
| מזהה של צבע ומחזירה בהתאם לגוון   | contrastColor(int color)          |
| הצבע שחור או לבן כך שיהיה מנוגד   |                                   |
| לו.]{dir="rtl"}                   |                                   |
|                                   |                                   |
| [יש לשים לב כי את הנוסחה שהשתמשתי |                                   |
| בה לא אני המצאתי.]{dir="rtl"}     |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מקבלת כפרמטר ממוצע     | private static String             |
| (מספר ממשי) ובהתאם, מחזירה מחרוזת | convertAvgToStr(float avg)        |
| המייצגת אותו.]{dir="rtl"}         |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מעדכנת את תכונת מצב    | public void setDeleteMode(boolean |
| המחיקה.]{dir="rtl"}               | isDeleteMode)                     |
+-----------------------------------+-----------------------------------+
| [פעולה אשר נקראת כאשר נלחצה רשומה | public void clickedItem(int i)    |
| במצב מחיקה. היא מוסיפה או מוחקת   |                                   |
| את הרשומה בהתאם מהרשימות המיועדות |                                   |
| למחיקה (כך כאשר המשתמש לוחץ על    |                                   |
| המחיקה, האינדקסים של העצמים       |                                   |
| הנמחקים כבר מוכנים).]{dir="rtl"}  |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מבטלת את סימון כל      | public void clearToDelete()       |
| הרשומות כמיועדות                  |                                   |
| למחיקה.]{dir="rtl"}               |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר בוחרת את כל הרשומות    | public void selectAll()           |
| כמיועדות למחיקה.]{dir="rtl"}      |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מחזירה את              | public Set\<Integer> getToDelete  |
| ה-]{dir="rtl"} Set [המכיל את      | ()                                |
| האינדקסים של הרשומות המיועדות     |                                   |
| למחיקה.]{dir="rtl"}               |                                   |
+-----------------------------------+-----------------------------------+
| [פעולה אשר מחזירה את מספר הרשומות | public int toDeleteLength()       |
| המיועדות למחיקה.]{dir="rtl"}      |                                   |
+-----------------------------------+-----------------------------------+

[\
]{dir="rtl"}

[]{#_Toc76826943 .anchor}ColorAdapter

[המחלקה מהווה מתאם על מנת לאפשר הצגת רשימות של עצמים מסוג]{dir="rtl"}
Piece [בתצוגה. מחלקת המסך]{dir="rtl"} SettingsActivity [נעזרת בה לצורך
הצגת צבעי הדסקיות האפשריות למשתמש.]{dir="rtl"}

**[תכונות המחלקה]{dir="rtl"}**

  ----------------------------------- -----------------------------------
  [ה-]{dir="rtl"} Context [של המחלקה  private final Context context
  על מנת לאפשר קישור למסך וגישה       
  למשאבים הנדרשים.]{dir="rtl"}        

  [הרשימה שברצוננו לקשר               private final List\<Piece> list
  לתצוגה.]{dir="rtl"}                 
  ----------------------------------- -----------------------------------

**[פעולות המחלקה]{dir="rtl"}**

  ----------------------------------- -----------------------------------
  **[הפעולה הבונה של מחלקת המתאם. היא public ColorAdapter(\@NonNull
  מקבלת כפרמטר]{dir="rtl"} Context    Context context)
  [ומאתחלת את העצם ואת רשימת צבעי     
  הדסקיות האפשריים                    
  בהתאם.]{dir="rtl"}**                

  [דריסת הפעולה אשר נקראת כאשר יש     \@Override\
  להציג בתצוגה]{dir="rtl"} View       public View getDropDownView(int
  [בתצורת]{dir="rtl"} dropdown        position, \@Nullable View
  [(ההבדל בינה לבין]{dir="rtl"}       convertView, \@NonNull ViewGroup
  getView [הוא שהיא נקראת כאשר מוצגים parent)
  למשתמש רשומות במצב של]{dir="rtl"}   
  dropdown[, לדוגמא ב-]{dir="rtl"}    
  Spinner [כאשר ברצונו לבחור,         
  ו-]{dir="rtl"} getView [זה איך יוצג 
  העצם במצב רגיל, לדוגמא העצם הנבחר   
  ב-]{dir="rtl"} Spinner [כאשר המשתמש 
  לא לחץ עליו להצגת האפשרויות לבחירה- 
  מעין מצב \"סטטי\"). הדריסה היא לשם  
  הצגת רשומת הצבע בהתאם.]{dir="rtl"}  

  [דריסת הפעולה אשר נקראת כאשר יש     \@Override\
  להציג בתצוגה]{dir="rtl"} View       public View getView(int position,
  [מהרשימה. הדריסה היא לשם הצגת רשומת \@Nullable View convertView,
  הצבע בהתאם.]{dir="rtl"}             \@NonNull ViewGroup parent)

  [דריסת הפעולה אשר מקבלת כפרמטר עצם  \@Override\
  מהרשימה ומחזירה את מיקומו בה        public int getPosition(\@Nullable
  (האינדקס).]{dir="rtl"}              Piece item)

  [דריסת הפעולה אשר מקבלת כפרמטר      \@Override\
  אינדקס של איבר ברשימה ומחזירה       public Piece getItem(int position)
  אותו.]{dir="rtl"}                   

  [דריסת הפעולה אשר מחזירה את כמות    \@Override\
  האיברים ברשימה.]{dir="rtl"}         public int getCount()
  ----------------------------------- -----------------------------------

[\
]{dir="rtl"}

[]{#_Toc76826944 .anchor}InitSizesAdapter

[המחלקה מהווה מתאם על מנת לאפשר הצגת רשימות של גדלים התחלתיים (גודל צלע
לוח מטריצת המשחק או כמות הדסקיות ההתחלתיות לכל שחקן) בתצוגה. מחלקת
המסך]{dir="rtl"} SettingsActivity [נעזרת בה לצורך הצגת בחירת הגדלים
ההתחלתיים האפשריים למשתמש.]{dir="rtl"}

**[תכונות המחלקה]{dir="rtl"}**

  ----------------------------------- -----------------------------------
  [ה-]{dir="rtl"} Context [של המחלקה  private final Context context
  על מנת לאפשר קישור למסך וגישה       
  למשאבים הנדרשים.]{dir="rtl"}        

  [הרשימה שברצוננו לקשר               private List\<Integer> list
  לתצוגה.]{dir="rtl"}                 
  ----------------------------------- -----------------------------------

**[פעולות המחלקה]{dir="rtl"}**

  ----------------------------------- -----------------------------------
  **[הפעולה הבונה של מחלקת המתאם. היא public InitSizesAdapter(\@NonNull
  מקבלת כפרמטר]{dir="rtl"} Context    Context context)
  [ומאתחלת את העצם                    
  בהתאם.]{dir="rtl"}**                

  [דריסת הפעולה אשר נקראת כאשר יש     \@Override\
  להציג בתצוגה]{dir="rtl"} View       public View getDropDownView(int
  [בתצורת]{dir="rtl"} dropdown        position, \@Nullable View
  [(ההבדל בינה לבין]{dir="rtl"}       convertView, \@NonNull ViewGroup
  getView [הוא שהיא נקראת כאשר מוצגים parent)
  למשתמש רשומות במצב של]{dir="rtl"}   
  dropdown[, לדוגמא ב-]{dir="rtl"}    
  Spinner [כאשר ברצונו לבחור,         
  ו-]{dir="rtl"} getView [זה איך יוצג 
  העצם במצב רגיל, לדוגמא העצם הנבחר   
  ב-]{dir="rtl"} Spinner [כאשר המשתמש 
  לא לחץ עליו להצגת האפשרויות לבחירה- 
  מעין מצב \"סטטי\"). הדריסה היא לשם  
  הצגת רשומת הגודל ההתחלתי            
  בהתאם.]{dir="rtl"}                  

  [דריסת הפעולה אשר נקראת כאשר יש     \@Override\
  להציג בתצוגה]{dir="rtl"} View       public View getView(int position,
  [מהרשימה. הדריסה היא לשם הצגת רשומת \@Nullable View convertView,
  הגודל ההתחלתי בהתאם.]{dir="rtl"}    \@NonNull ViewGroup parent)

  [פעולה אשר מקבלת כפרמטר             public void
  מצביע/הפנייה לרשימה ומעדכנת אותה    updateList(List\<Integer> list)
  כרשימת המתאם. הרשימה היא            
  ממוינת.]{dir="rtl"}                 

  [דריסת הפעולה אשר מחזירה את גודל    \@Override\
  רשימת המתאם.]{dir="rtl"}            public int getCount()

  [דריסת הפעולה אשר מקבלת כפרמטר      \@Override\
  אינדקס של איבר ברשימת המתאם ומחזירה public Integer getItem(int
  אותו.]{dir="rtl"}                   position)

  [פעולה אשר מקבלת כפרמטר עצם ברשימת  public int getPosition(int item)
  המתאם ומחזירה את מיקומו (האינדקס    
  שלו).]{dir="rtl"}                   

  [פעולה סטטית אשר מקבלת כפרמטרים     private static int
  רשימה של מספרים                     binarySearch(List\<Integer> list,
  (]{dir="rtl"}Integer[) ואיבר בה,    int item)
  ומחזירה את מיקומו בעזרת אלגוריתם    
  חיפוש בינארי (או]{dir="rtl"} -1 [אם 
  לא נמצא). (הנחה: הרשימה             
  ממוינת.)]{dir="rtl"}                

  [פעולת עזר לפעולת החיפוש            private static int
  הבינארי.]{dir="rtl"}                binarySearch(List\<Integer> list,
                                      int item, int start, int end)
  ----------------------------------- -----------------------------------

[\
]{dir="rtl"}

[]{#_Toc76826945 .anchor}MusicControl

[המחלקה מהווה מחלקת עזר על מנת השמעת צלילים באפליקציה. בחרתי לממש את
המחלקה כמחלקת]{dir="rtl"} singleton[, כלומר, למחלקה יהיה עד מופע אחד
ברחבי האפליקציה, אשר ניתן יהיה לבקש את המצביע אליו.]{dir="rtl"}

[]{#_Toc76826946 .anchor}MusicControl.Sound

[מחלקת **ה- **]{dir="rtl"}**Enum** [אשר מייצגת צליל להשמעה.]{dir="rtl"}

**[ערכי מחלקת ה-]{dir="rtl"} Enum**

  ----------------------------------- -----------------------------------
  [הצליל להשמיע כאשר דסקית            *PIECE_MOVED*
  הונחה.]{dir="rtl"}                  

  [הצליל להשמיע כאשר משחק             *GAME_START*
  מתחיל.]{dir="rtl"}                  

  [הצליל להשמיע כאשר משחק             *GAME_OVER*
  נגמר.]{dir="rtl"}                   

  [הצליל להשמיע כאשר זוהה             *SUPER_MOVE*
  \"מהלך-על\".]{dir="rtl"}            

  [הצליל להשמיע כאשר דיאלוג           *DIALOG_POPUP*
  קופץ.]{dir="rtl"}                   

  [הצליל להשמיע כאשר המשתמש בחר       *INVALID_SELECTION*
  אפשרות לא תקינה.]{dir="rtl"}        
  ----------------------------------- -----------------------------------

**[תכונות מחלקת ה-]{dir="rtl"} Enum**

  ----------------------------------- -----------------------------------
  [המזהה של משאב הצליל.]{dir="rtl"}   private final int rawId

  [העדיפות של הצליל (אין השפעה אך     private final int priority
  מצאתי אותה כתכונה מתאימה, אולי      
  בעתיד יהיה שימוש).]{dir="rtl"}      

  [המזהה של הצליל לאחר שנטען          private int loadedId
  באמצעות]{dir="rtl"}                 
  SoundPool[.]{dir="rtl"}             
  ----------------------------------- -----------------------------------

**[פעולות מחלקת ה-]{dir="rtl"} Enum**

  ----------------------------------- -----------------------------------
  **[הפעולה הבונה של המחלקה. מקבלת    Sound(int rawId)
  כפרמטר את מזהה הצליל במשאבי         
  האפליקציה.]{dir="rtl"}**            

  ----------------------------------- -----------------------------------

**[תכונות המחלקה (]{dir="rtl"}MusicControl[)]{dir="rtl"}**

  ----------------------------------- -----------------------------------
  [מופע ה-]{dir="rtl"} singleton [של  private static MusicControl
  המחלקה. לאורך כל חיי האפליקציה לא   *musicControl*
  ייווצרו מופעים אחרים                
  למחלקה.]{dir="rtl"}                 

  [עצם מסוג]{dir="rtl"} SoundPool     private final SoundPool soundPool
  [כדי לאפשר תקשורת עם השמעת הצלילים  
  של הטלפון.]{dir="rtl"}              
  ----------------------------------- -----------------------------------

**[פעולות המחלקה]{dir="rtl"}**

  ----------------------------------- -----------------------------------
  **[הפעולה הבונה של המחלקה. מקבלת    private MusicControl(Context
  כפרמטר]{dir="rtl"} Context [וטוענת  context)
  את הצלילים.]{dir="rtl"}**           

  [פעולה סטטית אשר מחזירה את מופע     public static MusicControl
  ה-]{dir="rtl"} singleton [של        getInstance(Context context)
  המחלקה. אם טרם נוצר, הפעולה תחילה   
  יוצרת אותו.]{dir="rtl"}             

  [פעולה אשר מקבלת צליל ומשמיעה       public void playSound(Sound sound)
  אותו.]{dir="rtl"}                   
  ----------------------------------- -----------------------------------

[\
]{dir="rtl"}

[]{#_Toc76826947 .anchor}BgMusicService

[המחלקה מהווה מחלקת שירות (]{dir="rtl"}Service[) אשר מאפשרת השמעת מוזיקת
רקע. בחרתי שהשירות יפעל במהלך כל חיי האפליקציה (אם מאופשר
בהגדרות).]{dir="rtl"}

**[תכונות המחלקה]{dir="rtl"}**

  ----------------------------------- -----------------------------------
  [מזהה המשאב של מוזיקת               private static final int
  הרקע.]{dir="rtl"}                   *MUSIC_SRC*

  [הווליום להשמיע את מוזיקת           private static final float *VOLUME*
  הרקע.]{dir="rtl"}                   

  [המיקום האחרון שהופסק בו השמעת השיר private static int *lastPosition*
  במהלך חיי האפליקציה (]{dir="rtl"}-1 
  [אם זוהי ההשמעה                     
  הראשונה).]{dir="rtl"}               

  [עצם ה-]{dir="rtl"} MediaPlayer     private MediaPlayer player
  [המאפשר השמעת מוזיקת                
  רקע.]{dir="rtl"}                    
  ----------------------------------- -----------------------------------

**[פעולות המחלקה]{dir="rtl"}**

  ----------------------------------- -----------------------------------
  [דריסת הפעולה הנקראת כאשר מאותחל    \@Override\
  השירות בפעם הראשונה.]{dir="rtl"}    public void onCreate()

  [דריסת הפעולה אשר נקראת כאשר השירות \@Override\
  מופעל על ידי פקודה מפורשת. היא      public int onStartCommand(Intent
  מפעילה את מוזיקת הרקע.]{dir="rtl"}  intent, int flags, int startId)

  [דריסת הפעולה אשר נקראת כאשר השירות \@Override\
  \"נהרס\"- היא מפסיקה את מוזיקת הרקע public void onDestroy()
  (ושומרת את נקודת עצירת              
  המזיקה).]{dir="rtl"}                

  [דריסת הפעולה הנקראת כאשר השירות    \@Override\
  מוצמד ללקוח. אני לא משתמש בהצמדת    public IBinder onBind(Intent
  השירות ללקוחות באפליקציה זו- זוהי   intent)
  פעולת חובה למימוש עבור              
  שירות.]{dir="rtl"}                  
  ----------------------------------- -----------------------------------

[\
]{dir="rtl"}

[]{#_Toc76826948 .anchor}MarginRunnable

[המחלקה מהווה מחלקת]{dir="rtl"} Runnable[. השימוש בה הוא כדי להתאים
באופן דינמי את הרווחים (]{dir="rtl"}margins[) של הדסקיות מהמשבצות בעת
הצגתן בתוכן. השימוש הוא ב-]{dir="rtl"} Runnable [משום שבעת אתחול התצוגה
לא נתונים נתוני הגובה והרוחב, אז בעזרת מחלקה זו כאשר נתונים אלו
מאותחלים, גם הרווחים יאותחלו בהתאם.]{dir="rtl"}

**[תכונות המחלקה]{dir="rtl"}**

  ----------------------------------- -----------------------------------
  [הרווח הסופי של הדסקית מהמשבצת-     private static int *margin*
  מעודכן לאחר הקריאה הראשונה          
  למדידה.]{dir="rtl"}                 

  [הגודל היחסי של הרווח- איזה חלק     private final int SCALE
  מהמשבצת כאשר]{dir="rtl"} SCALE      
  [מכנה של שבר שהמונה שלו הוא 1.      
  כלומר, אם ה-]{dir="rtl"} SCALE [הוא 
  10, הרווח יהיה 10% מהמשבצת, 1 חלקי  
  10.]{dir="rtl"}                     

  [הכפתור המייצג את                   private final Button btn
  הדסקית.]{dir="rtl"}                 

  [ה-]{dir="rtl"} FrameLayout [המכיל  private final FrameLayout parent
  בתוכו את המשבצת ואת                 
  הדסקית.]{dir="rtl"}                 
  ----------------------------------- -----------------------------------

**[פעולות המחלקה]{dir="rtl"}**

  ----------------------------------- -----------------------------------
  **[הפעולה הבונה של המחלקה. מקבלת    public MarginRunnable(FrameLayout
  כפרמטר את ה-]{dir="rtl"}            parent, Button btn, int
  FrameLayout [המכיל בתוכו את המשבצת  marginScale)
  ואת הדסקית, את הדסקית ואת הגודל     
  היחסי של הרווח                      
  מהמשבצת.]{dir="rtl"}**              

  [הפעולה אשר מכילה את הקוד שיבוצע    \@Override\
  כאשר נקרא ה-]{dir="rtl"} Runnable[. public void run()
  היא מעדכנת את הרווח בהתאם. בחרתי    
  למדוד את הרווח של הדסקית הראשונה    
  ביחס למשבצת המתאימה לה, ואת שאר     
  הדסקיות בהתאם לרווח זה, כדי לשמור   
  על אחידות.]{dir="rtl"}              
  ----------------------------------- -----------------------------------
